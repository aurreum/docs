
<!DOCTYPE html>


<html lang="en-US" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>User Guide for OpenStack &#8212; ADPS V3.0.44811</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=84d92f63" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=6da122b0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'openstack/openstack';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User Guide for Hyper-V" href="../hyper_v/hyper_v.html" />
    <link rel="prev" title="User Guide for VMware" href="../vmware/vmware.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en-US"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="ADPS V3.0.44811 - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="ADPS V3.0.44811 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agent_install/agent_install.html">Agent Installation Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Management</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../administrator/administrator.html">Administrator’s Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Databases</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../oracle/oracle.html">User Guide for Oracle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mysql/mysql.html">User Guide for MySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mssql/mssql.html">User Guide for Microsoft SQL Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db2/db2.html">User Guide for DB2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sybase/sybase.html">User Guide for Sybase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../informix/informix.html">User Guide for Informix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postgresql/postgresql.html">User Guide for PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cachedb/cachedb.html">User Guide for Caché</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hana/hana.html">User Guide for SAP HANA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mariadb/mariadb.html">User Guide for MariaDB</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Files</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../file/file.html">User Guide for File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ndmp/ndmp.html">User Guide for NDMP</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Big Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../mongodb/mongodb.html">User Guide for MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hadoop/hadoop.html">User Guide for Hadoop</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Object Storage</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../obs/obs.html">User Guide for Object Storage</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Applications</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../exchange/exchange.html">User Guide for Microsoft Exchange Server</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Operating Systems</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../linux_os/linux_os.html">User Guide for Linux OS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Containers</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../k8s/k8s.html">User Guide for Kubernetes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Virtualization</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../vmware/vmware.html">User Guide for VMware</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">User Guide for OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hyper_v/hyper_v.html">User Guide for Hyper-V</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>User Guide for OpenStack</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#planning-and-preparation">Planning and preparation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-the-backup-host">Configure the backup host</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verify-the-compatibility">Verify the compatibility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-agent">Install the agent</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#activate-licenses-and-authorize-users">Activate licenses and authorize users</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-openstack">Add OpenStack</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-openstack">Enable OpenStack</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#register-openstack">Register OpenStack</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manage-openstack">Manage OpenStack</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backup">Backup</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-policies">Backup policies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#before-you-begin">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-backup-job">Create a backup job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-options">Backup options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#restore">Restore</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-virtual-machine-restore-job">Create a virtual machine restore job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-virtual-disk-restore-job">Create a virtual disk restore job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restore-options">Restore options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations">Limitations</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="user-guide-for-openstack">
<h1>User Guide for OpenStack<a class="headerlink" href="#user-guide-for-openstack" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>This guide introduces how to install and configure the ADPS agent, and how to properly use ADPS to back up and restore OpenStack.</p>
<p>The backup and restore features supported by ADPS include:</p>
<ul>
<li><p>Backup types</p>
<p>Full backup</p>
</li>
<li><p>Backup sources</p>
<p>Virtual machines (VMs), virtual disks, domains, and projects</p>
</li>
<li><p>Backup targets</p>
<p>Standard storage pool, deduplication storage pool, tape library pool, object storage pool, and LAN-free pool</p>
</li>
<li><p>Backup schedules</p>
<p>Immediate, one-time, hourly, daily, weekly, and monthly</p>
</li>
<li><p>Data processing</p>
<p>Data compression, multiple channels, reconnection, speed limit, and backup retries</p>
</li>
<li><p>Restore types</p>
<p>Virtual machine restore, virtual disk restore</p>
</li>
<li><p>Restore location</p>
<p>Original project, another project, another host</p>
</li>
</ul>
</section>
<section id="planning-and-preparation">
<h2>Planning and preparation<a class="headerlink" href="#planning-and-preparation" title="Link to this heading">#</a></h2>
<p>Before you install the agent, check the following prerequisites:</p>
<ol class="arabic simple">
<li><p>You have already installed and configured other backup components, including the backup server and the storage server.</p></li>
<li><p>You have created a user with roles of operator and administrator on the ADPS console. Log in to the console with this user to back up and restore the resource.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The administrator role can install and configure agents, activate licenses, and authorize users. The operator role can create backup and restore jobs.</p>
</div>
</section>
<section id="configure-the-backup-host">
<h2>Configure the backup host<a class="headerlink" href="#configure-the-backup-host" title="Link to this heading">#</a></h2>
<p>To configure the backup host, note that:</p>
<ul class="simple">
<li><p>Use an independent virtual machine on OpenStack as the backup host. Ensure that the backup host can communicate with the ADPS.</p></li>
<li><p>Ensure that the backup host can access API URL. If the host address in the URL is a domain name, you can configure the domain mapping in <code class="docutils literal notranslate"><span class="pre">/etc/hosts</span></code>.</p></li>
</ul>
<section id="verify-the-compatibility">
<h3>Verify the compatibility<a class="headerlink" href="#verify-the-compatibility" title="Link to this heading">#</a></h3>
<p>Ensure that your environment is in the following compatibility list:</p>
<table class="table" id="id3">
<caption><span class="caption-text">Backup host compatibility</span><a class="headerlink" href="#id3" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Operating system</p></th>
<th class="head"><p>OS bits</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ubuntu 16.04</p></td>
<td><p>x86_64</p></td>
</tr>
<tr class="row-odd"><td><p>Ubuntu 18.04</p></td>
<td><p>x86_64</p></td>
</tr>
<tr class="row-even"><td><p>Ubuntu 20.04</p></td>
<td><p>x86_64</p></td>
</tr>
<tr class="row-odd"><td><p>CentOS 7.5</p></td>
<td><p>x86_64</p></td>
</tr>
<tr class="row-even"><td><p>CentOS 7.6</p></td>
<td><p>x86_64</p></td>
</tr>
<tr class="row-odd"><td><p>Ubuntu 18.04</p></td>
<td><p>aarch64</p></td>
</tr>
<tr class="row-even"><td><p>CentOS 7.6</p></td>
<td><p>aarch64</p></td>
</tr>
</tbody>
</table>
</section>
<section id="install-the-agent">
<h3>Install the agent<a class="headerlink" href="#install-the-agent" title="Link to this heading">#</a></h3>
<p>ADPS agent can be installed on Linux and supports online and offline installation. We recommend online installation.</p>
<ol class="arabic simple">
<li><p>Online installation:
ADPS provides <code class="docutils literal notranslate"><span class="pre">curl</span></code> and <code class="docutils literal notranslate"><span class="pre">wget</span></code> commands for installation.</p></li>
<li><p>Offline installation:
See <a class="reference internal" href="../agent_install/agent_install.html#offline-installation"><span class="std std-ref">Offline installation</span></a> in Aurreum Data Protection Suite Agent Installation Guide.</p></li>
</ol>
<p>To install the agent online, do the following:</p>
<ol class="arabic">
<li><p>Log in to the ADPS console.</p></li>
<li><p>From the menu, click <strong>Resource</strong> &gt; <strong>Resource</strong>. The <strong>Resource</strong> page appears.</p></li>
<li><p>From the toolbar, click the <strong>Install agent</strong> icon. The <strong>Install agent</strong> window appears.</p></li>
<li><p>In the <strong>Install agent</strong> window, do the following:</p>
<p>(1) From the <strong>Select system</strong> list, select <strong>Linux</strong>.</p>
<p>(2) From the <strong>Component</strong> list, select <strong>OpenStack</strong>. The <code class="docutils literal notranslate"><span class="pre">curl</span></code> and <code class="docutils literal notranslate"><span class="pre">wget</span></code> commands appear in the window.</p>
<p>(3) If you want to delete the downloaded package automatically after the installation, select the <strong>Delete installation package</strong> check box.</p>
<p>(4) If you enable <strong>Ignore SSL errors</strong>, the installation will ignore certificate errors and so on. If you disable the feature, the installation will prompt you to enter Y/N to continue or discontinue the process when an error occurs.</p>
</li>
<li><p>Click the <strong>Copy</strong> icon to copy the <code class="docutils literal notranslate"><span class="pre">curl</span></code> or <code class="docutils literal notranslate"><span class="pre">wget</span></code> command.</p></li>
<li><p>Log in to the Linux host as user <em>root</em>. Paste the command in the terminal and press Enter to start the installation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ubuntu</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -o- &quot;http://192.168.18.112:50305/d2/update/script?modules=openstack&amp;location=http%3A%2F%2F192.168.18.112%3A50305&amp;access_key=61861596d3988682cc2ac008caa9a46c&amp;rm=&amp;tool=curl&quot; | sh</span>
<span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                             <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>  <span class="mi">9211</span>    <span class="mi">0</span>  <span class="mi">9211</span>    <span class="mi">0</span>     <span class="mi">0</span>   <span class="mi">817</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>  <span class="mi">899</span><span class="n">k</span>
<span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                             <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>     <span class="mi">0</span>
<span class="mi">100</span> <span class="mf">52.2</span><span class="n">M</span>  <span class="mi">100</span> <span class="mf">52.2</span><span class="n">M</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mf">43.3</span><span class="n">M</span>      <span class="mi">0</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">01</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mf">93.9</span><span class="n">M</span>
<span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                             <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>     <span class="mi">0</span>
<span class="mi">100</span> <span class="mi">5730</span><span class="n">k</span>  <span class="mi">100</span> <span class="mi">5730</span><span class="n">k</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mf">38.3</span><span class="n">M</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mf">38.3</span><span class="n">M</span>
<span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                             <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>     <span class="mi">0</span>
<span class="mi">100</span> <span class="mi">5137</span><span class="n">k</span>  <span class="mi">100</span> <span class="mi">5137</span><span class="n">k</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mf">34.3</span><span class="n">M</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mf">34.3</span><span class="n">M</span>
</pre></div>
</div>
</li>
<li><p>Wait for the installation to complete.</p></li>
</ol>
</section>
</section>
<section id="activate-licenses-and-authorize-users">
<h2>Activate licenses and authorize users<a class="headerlink" href="#activate-licenses-and-authorize-users" title="Link to this heading">#</a></h2>
<p>After the agent installation, go back to the <strong>Resource</strong> page. The backup host with the agent installed appears on the page.</p>
<p>To activate licenses and authorize users, do the following:</p>
<ol class="arabic simple">
<li><p>From the menu, click <strong>Resource</strong> &gt; <strong>Resource</strong>. The <strong>Resource</strong> page appears.</p></li>
<li><p>On the <strong>Resource</strong> page, select the backup host. Click the <strong>Register</strong> icon. Then the <strong>Activate</strong> window appears.</p></li>
<li><p>In the <strong>Activate</strong> window, select the resource and click <strong>Submit</strong>.</p></li>
<li><p>After you activate the license, the <strong>Authorize</strong> window appears. From the <strong>User group</strong> list, select user groups to authorize access to the resource. Click <strong>Submit</strong>.</p></li>
</ol>
</section>
<section id="add-openstack">
<h2>Add OpenStack<a class="headerlink" href="#add-openstack" title="Link to this heading">#</a></h2>
<section id="enable-openstack">
<h3>Enable OpenStack<a class="headerlink" href="#enable-openstack" title="Link to this heading">#</a></h3>
<p>To enable the OpenStack features on the console, do the following:</p>
<ol class="arabic simple">
<li><p>Log in to the console as admin.</p></li>
<li><p>From the menu, click <strong>Settings</strong> &gt; <strong>Settings</strong>. The <strong>Settings</strong> page appears.</p></li>
<li><p>On the <strong>Resource</strong> tab, select the <strong>OpenStack</strong> checkbox.</p>
</li>
</ol>
</section>
<section id="register-openstack">
<h3>Register OpenStack<a class="headerlink" href="#register-openstack" title="Link to this heading">#</a></h3>
<p>To add the OpenStack resource, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Resource</strong> &gt; <strong>Resource</strong>. The <strong>Resource</strong> page appears.</p></li>
<li><p>From the toolbar, click the “+” icon and select <strong>OpenStack</strong>. The <strong>Add OpenStack</strong> window appears.</p></li>
<li><p>In the <strong>Add OpenStack</strong> window, do the following:</p>
<ul class="simple">
<li><p>In the <strong>Name</strong> field, enter a name for the resource.</p></li>
<li><p>In the <strong>Address</strong> field, enter the IP or domain address of the OpenStack host.</p></li>
<li><p>You can enable <strong>SSL</strong> for secure connection.</p></li>
<li><p>In the <strong>Port</strong> field, the default value is 5000.</p></li>
<li><p>In the <strong>Type</strong> field, select <strong>Domain</strong> or <strong>Project</strong>. You can register the resource by using a domain or a project.</p></li>
<li><p>In the <strong>Domain</strong> or <strong>Project</strong> field, enter the name of the domain or project.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The domain or project will be used to store the temporary resources created during the backup (such as snapshots, images, and disks).</p></li>
<li><p>If you use <strong>Project</strong>, the temporary resources will be under the project. If you use <strong>Domain</strong>, they will be under any one of the projects in the domain.</p></li>
<li><p>To use <strong>Domain</strong>, the user must have read, write, and delete permissions on the resource. Only the default user admin has these permissions. Log in to the OpenStack server and execute the <code class="docutils literal notranslate"><span class="pre">openstack</span> <span class="pre">role</span> <span class="pre">add</span> <span class="pre">--user</span> <span class="pre">admin</span> <span class="pre">--domain</span> <span class="pre">default</span> <span class="pre">admin</span></code> command.</p></li>
</ul>
</div>
<ul class="simple">
<li><p>In the <strong>Username</strong> field, enter the username to log in to the OpenStack server. The user must have read and write permissions on the domain or project.</p></li>
<li><p>In the <strong>Password</strong> field, enter the password of the user.</p></li>
<li><p>From the <strong>Backup host</strong> list, select a backup host.</p></li>
<li><p>The <strong>Advanced options</strong> area is for configuration extension. You can do the following:</p>
<ul>
<li><p>In the <strong>UUID</strong> field, enter the UUID of the backup host when the Neutron Metadata service is not in effect.</p></li>
<li><p>In the <strong>User domain name</strong> field, enter the domain name that the user belongs to. The default value is <strong>default</strong>.</p></li>
<li><p>In the <strong>Project domain name</strong> field, enter the domain name that the project belongs to. The default value is <strong>default</strong>.</p></li>
<li><p>From the <strong>Directory interface type</strong>, select admin, public, or internal.</p></li>
<li><p>In the <strong>Compute service</strong> field, enter the URI address of the compute service. When errors occur in the compute service configuration of OpenStack Catalog, you can enter the correct URI address here.</p></li>
<li><p>In the <strong>Storage service</strong> field, enter the URI address of the compute service. When errors occur in the storage service configuration of OpenStack Catalog, you can enter the correct URI address here.</p></li>
<li><p>In the <strong>Mirroring service</strong> field, enter the URI address of the compute service. When errors occur in the mirroring service configuration of OpenStack Catalog, you can enter the correct URI address here.</p></li>
<li><p>In the <strong>Network service</strong> field, enter the URI address of the compute service. When errors occur in the network service configuration of OpenStack Catalog, you can enter the correct URI address here.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>After you add the OpenStack resource, see <a class="reference internal" href="#activate-licenses-and-authorize-users">Activate licenses and authorize users</a> to activate the resource and authorize user access to the resource.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can enable the <strong>Protected</strong> option in the <strong>Authorize</strong> window to prevent the resource from overwriting.</p>
</div>
</li>
</ol>
</section>
<section id="manage-openstack">
<h3>Manage OpenStack<a class="headerlink" href="#manage-openstack" title="Link to this heading">#</a></h3>
<p>After you add the OpenStack resource, you can manage it on the <strong>Resource</strong> page.</p>
<ul class="simple">
<li><p><strong>Modify</strong>: To change the name and network of the virtualization platform, click the <strong>Modify</strong> icon to edit the above information in the pop-up <strong>Modify OpenStack</strong> window.</p></li>
<li><p><strong>Configure</strong>: When the registered information of the virtualization platform is changed, you can click the <strong>Configure</strong> icon to update the information in the pop-up <strong>Configure OpenStack</strong> window.</p></li>
<li><p><strong>Unregister</strong>: If you do not want to back up and restore the OpenStack, click the <strong>Unregister</strong> icon to delete the resource.</p></li>
<li><p><strong>Tag</strong>: You can add a tag for the resource.</p></li>
</ul>
</section>
</section>
<section id="backup">
<h2>Backup<a class="headerlink" href="#backup" title="Link to this heading">#</a></h2>
<p>ADPS provides full backup for OpenStack.</p>
<ul>
<li><p>Full backup</p>
<p>Backs up all the disks and configuration files on virtual machines at some point in time.</p>
</li>
</ul>
<section id="backup-policies">
<h3>Backup policies<a class="headerlink" href="#backup-policies" title="Link to this heading">#</a></h3>
<p>ADPS provides six backup schedule types: immediate, one-time, hourly, daily, weekly, and monthly.</p>
<ul class="simple">
<li><p>Immediate: ADPS will immediately start the job after it is created.</p></li>
<li><p>One-time: ADPS will perform the job at the specified time once only.</p></li>
<li><p>Hourly: ADPS will perform the job periodically at the specified hour/minute intervals within the time range according to the setting.</p></li>
<li><p>Daily: ADPS will perform the job periodically at the specified time and day intervals.</p></li>
<li><p>Weekly: ADPS will perform the job periodically at the specified time and week intervals.</p></li>
<li><p>Monthly: ADPS will perform the job periodically at the specified dates and times.</p></li>
</ul>
<p>You can set an appropriate backup policy based on your situation and requirements. Usually, we recommend the following common backup policy:</p>
<p>Perform a full backup once a week when the application traffic is relatively small (Example: on the weekend) to ensure that you have a recoverable point in time every week.</p>
</section>
<section id="before-you-begin">
<h3>Before you begin<a class="headerlink" href="#before-you-begin" title="Link to this heading">#</a></h3>
<p>Before you back up and restore OpenStack, check the following:</p>
<ol class="arabic">
<li><p>Check the resource.</p>
<p>(1) Click <strong>Resource</strong> &gt; <strong>Resource</strong>. The <strong>Resource</strong> page appears.</p>
<p>(2) Check whether the backup host and the OpenStack resource are on the page with an <em>Online</em> state. If no, see <a class="reference internal" href="#activate-licenses-and-authorize-users">Activate licenses and authorize users</a>.</p>
</li>
<li><p>Check storage pools.</p>
<p>(1) From the menu, click <strong>Storage</strong> &gt; <strong>Storage pool</strong>. The <strong>Storage pool</strong> page appears.</p>
<p>(2) Check whether the display area has any storage pools. If no, create a storage pool and authorize it for the current user. For details, see <a class="reference internal" href="#../manager/manager.md#add-a-storage-pool"><span class="xref myst">Add a storage pool</span></a> in Aurreum Data Protection Suite Administrator’s Guide.</p>
</li>
</ol>
</section>
<section id="create-a-backup-job">
<h3>Create a backup job<a class="headerlink" href="#create-a-backup-job" title="Link to this heading">#</a></h3>
<p>To create a backup job, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Backup</strong>. The backup job wizard appears.</p></li>
<li><p>At the <strong>Hosts and resources</strong> step, select the OpenStack host and resource. The wizard goes to the next step automatically.</p></li>
<li><p>At the <strong>Backup source</strong> step, do the following:</p>
<p>(1) From the <strong>Backup type</strong> list, select <strong>Full backup</strong>.</p>
<p>(2) In the <strong>Backup source</strong> section, click the “+” icon. The <strong>Add backup source</strong> window appears. You can enter the virtual machine name in the search box for accurate search (keyword query is supported) or expand the backup source by domains or projects. Select the virtual machines that you want to back up and click <strong>Submit</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use Ctrl and Shift to select multiple items. Confirm the range that you want, select the checkbox of the first item in the range, press Ctrl or Shift, and click the checkbox of the last item in the range. All the items between the first and the last are selected automatically.</p>
</div>
<p>(3) Confirm the selected backup source. You can use the <strong>Filter</strong> to exclude virtual machines that you do not want to back up. Click <strong>Next</strong>.</p>
</li>
<li><p>At the <strong>Backup host</strong> step, select a backup host. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Backup target</strong> step, select a storage pool. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Backup schedule</strong> step, set the job schedule. For details, see <a class="reference internal" href="#backup-policies">Backup policies</a>. Click <strong>Next</strong>.</p>
<ul class="simple">
<li><p>Select <strong>Immediate</strong>. ADPS performs the job immediately after it is created.</p></li>
<li><p>Select <strong>One time</strong> and set the start time for the job.</p></li>
<li><p>Select <strong>Hourly</strong>. Set the start time, end time, and time interval for job execution. The unit can be hour(s) or minute(s).</p></li>
<li><p>Select <strong>Daily</strong>. Set the start time and enter the time interval for job execution. The unit is day(s).</p></li>
<li><p>Select <strong>Weekly</strong>. Set the start time, enter the time interval, and select the specific dates in a week for job execution. The unit is week.</p></li>
<li><p>Select <strong>Monthly</strong>. Set the start time and months for job execution. You can select the natural dates in one month or select the specific dates in one week.</p></li>
</ul>
</li>
<li><p>At the <strong>Backup options</strong> step, set the common and advanced options according to your needs. For details, see <a class="reference internal" href="#backup-options">Backup options</a>. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Finish</strong> step, set the job name and confirm the job information. Click <strong>Submit</strong>.</p></li>
<li><p>After the submission, you will be redirected to the <strong>Job</strong> page automatically. On this page, you can start, modify, and delete the job.</p></li>
</ol>
</section>
<section id="backup-options">
<h3>Backup options<a class="headerlink" href="#backup-options" title="Link to this heading">#</a></h3>
<p>ADPS provides the following backup options:</p>
<ul class="simple">
<li><p>Common options</p></li>
</ul>
<table class="longtable table" id="id4">
<caption><span class="caption-text">Backup common options</span><a class="headerlink" href="#id4" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Compression</p></td>
<td><p>Fast is enabled by default. Backup data is compressed at the source side for transmission. It can reduce the backup time, improve backup efficiency, and save backup space.</p></td>
</tr>
<tr class="row-odd"><td><p>Channels</p></td>
<td><p>Defines the maximum number of concurrent processes in one job based on the backup host’s CPU cores and the virtual load capacity. The default value is 2.</p></td>
</tr>
<tr class="row-even"><td><p>Concurrent backup of VMs</p></td>
<td><p>The maximum number of virtual machines that can be backed up simultaneously. The default value is 8. We recommend that the value is no more than the number of CPU cores. If it exceeds, the efficiency will not be improved obviously.</p></td>
</tr>
<tr class="row-odd"><td><p>Concurrent disks per VM</p></td>
<td><p>The maximum number of disks per VM that can be processed concurrently. Note that a high value will lead to a high VM IO usage.</p></td>
</tr>
<tr class="row-even"><td><p>Concurrent processes per disk</p></td>
<td><p>The maximum number of concurrent processes that can be assigned to one disk. Note that a high value will lead to a high VM IO usage.</p></td>
</tr>
<tr class="row-odd"><td><p>Do not perform backup when</p></td>
<td><p>Before taking a snapshot of a virtual machine, the job will check whether the remaining space meets all the specified conditions.</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Advanced options</p></li>
</ul>
<table class="longtable table" id="id5">
<caption><span class="caption-text">Backup advanced options</span><a class="headerlink" href="#id5" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reconnection time</p></td>
<td><p>The value ranges from 1 to 60 minutes. The job continues after the abnormal reset occurs in the network within the set time.</p></td>
</tr>
<tr class="row-odd"><td><p>Resumption buffer size</p></td>
<td><p>Specifies the resumption buffer size. The default value is 10 MiB. The bigger the resumption buffer size is, the more physical storage will be consumed. However, a bigger resumption buffer size can prevent data loss when the throughput of the business system is high.</p></td>
</tr>
<tr class="row-even"><td><p>Speed limit</p></td>
<td><p>Limits data transfer speed or disk read/write speed for different time periods. The unit can be KiB/s, MiB/s, and GiB/s.</p></td>
</tr>
<tr class="row-odd"><td><p>Precondition</p></td>
<td><p>Checked before the job starts. The job execution will be aborted and the job state will be idle when the precondition is invalid.</p></td>
</tr>
<tr class="row-even"><td><p>Pre-/Post-script</p></td>
<td><p>The pre-script is executed after the job starts and before the resource is backed up. The post-script is executed after the resource is backed up.</p></td>
</tr>
<tr class="row-odd"><td><p>Request retry</p></td>
<td><p>- Request timeout seconds: Specifies the maximum time in seconds for a request to complete. If a request times out, it will be terminated. <br> - Request try times: Specifies the maximum number of request retries to connect to OpenStack when a request fails. If the retries exceed the value, the request will be terminated.</p></td>
</tr>
<tr class="row-even"><td><p>Backup retry</p></td>
<td><p>- Backup retry count: Refers to the number of attempts to run the backup job if it fails to back up some virtual machines. Only the failed virtual machines are processed during a job retry. 0 means no retries.  <br> - Backup retry interval: Refers to the time interval between job retries if it fails to back up some virtual machines. Only the failed virtual machines are processed during a job retry. <br> Manually stopping the backup job will not initiate the retry.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="restore">
<h2>Restore<a class="headerlink" href="#restore" title="Link to this heading">#</a></h2>
<p>ADPS provides several restore types for OpenStack, including:</p>
<ul>
<li><p>Virtual machine restore</p>
<p>When a disaster occurs in the virtual machine, a virtual machine restore job can help you to restore the entire machine. It supports restoring to another project, another host, the original path, and a new path.</p>
</li>
<li><p>Virtual disk restore</p>
<p>When a disaster occurs in some disks of the virtual machine, a virtual disk restore job can restore those disks to the original or another virtual machine.</p>
</li>
</ul>
<section id="id1">
<h3>Before you begin<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>You have a completed backup job. See <a class="reference internal" href="#create-a-backup-job">Create a backup job</a>.</p></li>
<li><p>To restore to another OpenStack platform, deploy the backup host, register and activate the resource, and authorize user access to the resource.</p></li>
</ol>
</section>
<section id="create-a-virtual-machine-restore-job">
<h3>Create a virtual machine restore job<a class="headerlink" href="#create-a-virtual-machine-restore-job" title="Link to this heading">#</a></h3>
<p>To create a virtual machine restore job, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Restore</strong>. The restore job wizard appears.</p></li>
<li><p>At the <strong>Hosts and resources</strong> step, select the OpenStack host and resource. The wizard goes to the next step automatically.</p></li>
<li><p>At the <strong>Backup sets</strong> step, do the following:</p>
<p>(1) From the <strong>Storage pool</strong> list, select a storage pool with backup sets, including the source and target pools with pool replication relation. With the <strong>Default</strong> option, the <strong>Restore source</strong> section shows the backup sets from all storage pools.</p>
<p>(2) From the <strong>Restore type</strong> list, select <strong>Virtual machine restore</strong>.</p>
<p>(3) In the <strong>Restore source</strong> section, expand the resource and select points in time under virtual machines for the restore. You can search the name or UUID to find the virtual machine.</p>
<p>(4) Click <strong>Next</strong>.</p>
</li>
<li><p>At the <strong>Restore target</strong> step, select a restore target. The wizard automatically goes to the next step.</p></li>
<li><p>At the <strong>Backup host</strong> step, select a backup host. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Restore schedule</strong> step, set the job schedule. Click <strong>Next</strong>.</p>
<ul class="simple">
<li><p>Select <strong>Immediate</strong>. ADPS will perform the job immediately after its creation.</p></li>
<li><p>Select <strong>One time</strong> and set the start time for the job.</p></li>
</ul>
</li>
<li><p>At the <strong>Restore options</strong> step, set the options according to your needs. See <a class="reference internal" href="#restore-options">Restore options</a>. Click <strong>Next</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the <strong>Restore location</strong> option:</p>
<ul class="simple">
<li><p>Original path: The virtual machine will be restored to its original path with its original name and configuration.</p></li>
<li><p>New path: The virtual machine will be restored to a customized path with its configuration modified. If you click the icon beside <strong>New path</strong>, a wizard will appear.</p>
<ol class="arabic simple">
<li><p>At the <strong>Virtual machine</strong> step, configure a new virtual machine name, the target availability zone, the target project, a key pair, a security group, and an instance type ID. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Datastore</strong> step, configure the volume type. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Network</strong> step, configure the MAC address, IP address, and NIC. Click <strong>Next</strong>.</p></li>
</ol>
</li>
</ul>
</div>
</li>
<li><p>At the <strong>Finish</strong> step, set the job name and confirm the job information. Click <strong>Submit</strong>.</p></li>
</ol>
</section>
<section id="create-a-virtual-disk-restore-job">
<h3>Create a virtual disk restore job<a class="headerlink" href="#create-a-virtual-disk-restore-job" title="Link to this heading">#</a></h3>
<p>To create a virtual disk restore job, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Restore</strong>. The restore job wizard appears.</p></li>
<li><p>At the <strong>Hosts and resources</strong> step, select the OpenStack host and resource. The wizard goes to the next step automatically.</p></li>
<li><p>At the <strong>Backup sets</strong> step, do the following:</p>
<p>(1) From the <strong>Storage pool</strong> list, select a storage pool with backup sets, including the source and target pools with pool replication relation. With the <strong>Default</strong> option, the <strong>Restore source</strong> section shows the backup sets from all storage pools.</p>
<p>(2) From the <strong>Restore type</strong> list, select <strong>Virtual disk restore</strong>.</p>
<p>(3) In the <strong>Restore source</strong> section, expand the resource and select disks under points in time for the restore. You can search the name or UUID to find the virtual machine.</p>
<p>(4) Click <strong>Next</strong>.</p>
</li>
<li><p>At the <strong>Restore target</strong> step, select a restore target. The wizard automatically goes to the next step.</p></li>
<li><p>At the <strong>Backup host</strong> step, select a backup host. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Restore schedule</strong> step, set the job schedule. Click <strong>Next</strong>.</p>
<ul class="simple">
<li><p>Select <strong>Immediate</strong>. ADPS will perform the job immediately after its creation.</p></li>
<li><p>Select <strong>One time</strong> and set the start time for the job.</p></li>
</ul>
</li>
<li><p>At the <strong>Restore options</strong> step, set the options according to your needs. See <a class="reference internal" href="#restore-options">Restore options</a>. Click <strong>Next</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To set the <strong>Restore location</strong>, select a target virtual machine.</p>
</div>
</li>
<li><p>At the <strong>Finish</strong> step, set the job name and confirm the job information. Click <strong>Submit</strong>.</p></li>
</ol>
</section>
<section id="restore-options">
<h3>Restore options<a class="headerlink" href="#restore-options" title="Link to this heading">#</a></h3>
<p>ADPS provides the following restore options:</p>
<ul class="simple">
<li><p>Common options</p></li>
</ul>
<table class="longtable table" id="id6">
<caption><span class="caption-text">Restore common options</span><a class="headerlink" href="#id6" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Channels</p></td>
<td><p>Defines the maximum number of concurrent processes in one job based on the backup host’s CPU cores and the virtual load capacity. The default value is 1.</p></td>
</tr>
<tr class="row-odd"><td><p>Restore location</p></td>
<td><p>See the respective job section for more details.</p></td>
</tr>
<tr class="row-even"><td><p>Start virtual machine after restore</p></td>
<td><p>The restored virtual machines are automatically started after the successful restore job.</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Advanced options:</p></li>
</ul>
<table class="longtable table" id="id7">
<caption><span class="caption-text">Restore advanced options</span><a class="headerlink" href="#id7" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reconnection time</p></td>
<td><p>The value ranges from 1 to 60 minutes. The job continues after the abnormal reset occurs in the network within the set time.</p></td>
</tr>
<tr class="row-odd"><td><p>Resumption buffer size</p></td>
<td><p>Specifies the resumption buffer size. The default value is 10 MiB. The bigger the resumption buffer size is, the more physical storage will be consumed. However, a bigger resumption buffer size can prevent data loss when the throughput of the business system is high.</p></td>
</tr>
<tr class="row-even"><td><p>Speed limit</p></td>
<td><p>Limits data transfer speed or disk read/write speed for different time periods. The unit can be KiB/s, MiB/s, and GiB/s.</p></td>
</tr>
<tr class="row-odd"><td><p>Precondition</p></td>
<td><p>Checked before the job starts. The job execution will be aborted and the job state will be idle when the precondition is invalid.</p></td>
</tr>
<tr class="row-even"><td><p>Pre-/Post-script</p></td>
<td><p>The pre-script is executed after the job starts and before the resource is restored. The post-script is executed after the resource is restored.</p></td>
</tr>
<tr class="row-odd"><td><p>Request retry</p></td>
<td><p>- Request timeout seconds: Specifies the maximum time in seconds for a request to complete. If a request times out, it will be terminated. <br> - Request try times: Specifies the maximum number of request retries to connect to OpenStack when a request fails. If the retries exceed the value, the request will be terminated.</p></td>
</tr>
<tr class="row-even"><td><p>Target virtual machine</p></td>
<td><p>You can create a new user or modify the password of an existing user for the target VM. If you leave it blank, only the original user information will be restored by default. To ensure that the settings can take effect, the tool <code class="docutils literal notranslate"><span class="pre">cloudbase-init</span></code> (Windows) or <code class="docutils literal notranslate"><span class="pre">cloud-init</span></code> (Linux) must be installed on the original VM before backup. Without the tool, the settings will not take effect and only the original user information will be restored.</p></td>
</tr>
<tr class="row-odd"><td><p>Operating system</p></td>
<td><p>Please confirm whether the VM is Windows or not. If you do not select the check box, the VM will be regarded as a Linux VM. Because Windows and Linux have different methods of setting the username and password, a wrong selection will lead to invalid settings.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>After you install <code class="docutils literal notranslate"><span class="pre">cloud-init</span></code> on the Linux VM, add the following configuration in <code class="docutils literal notranslate"><span class="pre">/etc/cloud/cloud.cfg</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>datasource:
<span class="w">   </span>OpenStack:
<span class="w">   </span>metadata_urls:<span class="w"> </span><span class="o">[</span><span class="s2">&quot;http://169.254.169.254&quot;</span><span class="o">]</span>
<span class="w">   </span>max_wait:<span class="w"> </span>-1
<span class="w">   </span>timeout:<span class="w"> </span><span class="m">10</span>
<span class="w">   </span>retries:<span class="w"> </span><span class="m">5</span>
<span class="w">   </span>apply_network_config:<span class="w"> </span>True
</pre></div>
</div>
</li>
<li><p>After you install <code class="docutils literal notranslate"><span class="pre">cloudbase-init</span></code> on the Windows VM, add the following configuration in <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Cloudbase</span> <span class="pre">Solutions\Cloudbase-Init\conf\cloudbase-init.conf</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>DEFAULT<span class="o">]</span>
<span class="w">               </span><span class="nv">username</span><span class="o">=</span>Admin
<span class="w">      </span><span class="nv">groups</span><span class="o">=</span>Administrators
<span class="w">      </span><span class="nv">inject_user_password</span><span class="o">=</span><span class="nb">true</span>
<span class="w">      </span><span class="nv">config_drive_raw_hhd</span><span class="o">=</span><span class="nb">true</span>
<span class="w">      </span><span class="nv">config_drive_cdrom</span><span class="o">=</span><span class="nb">true</span>
<span class="w">      </span><span class="nv">config_drive_vfat</span><span class="o">=</span><span class="nb">true</span>
<span class="w">      </span><span class="nv">bsdtar_path</span><span class="o">=</span>C:<span class="se">\P</span>rogram<span class="w"> </span>Files<span class="se">\C</span>loudbase<span class="w"> </span>Solutions<span class="se">\C</span>loudbase-Init<span class="se">\b</span>in<span class="se">\b</span>sdtar.exe
<span class="w">      </span><span class="nv">mtools_path</span><span class="o">=</span>C:<span class="se">\P</span>rogram<span class="w"> </span>Files<span class="se">\C</span>loudbase<span class="w"> </span>Solutions<span class="se">\C</span>loudbase-Init<span class="se">\b</span>in<span class="se">\</span>
<span class="w">      </span><span class="nv">verbose</span><span class="o">=</span><span class="nb">true</span>
<span class="w">      </span><span class="nv">debug</span><span class="o">=</span><span class="nb">true</span>
<span class="w">      </span><span class="nv">logdir</span><span class="o">=</span>C:<span class="se">\P</span>rogram<span class="w"> </span>Files<span class="se">\C</span>loudbase<span class="w"> </span>Solutions<span class="se">\C</span>loudbase-Init<span class="se">\l</span>og<span class="se">\</span>
<span class="w">      </span><span class="nv">logfile</span><span class="o">=</span>cloudbase-init.log
<span class="w">      </span><span class="nv">default_log_levels</span><span class="o">=</span><span class="nv">comtypes</span><span class="o">=</span>INFO,suds<span class="o">=</span>INFO,iso8601<span class="o">=</span>WARN,requests<span class="o">=</span>WARN
<span class="w">      </span><span class="nv">logging_serial_port_settings</span><span class="o">=</span>COM1,115200,N,8
<span class="w">      </span><span class="nv">mtu_use_dhcp_config</span><span class="o">=</span><span class="nb">true</span>
<span class="w">      </span><span class="nv">ntp_use_dhcp_config</span><span class="o">=</span><span class="nb">true</span>
<span class="w">      </span><span class="nv">local_scripts_path</span><span class="o">=</span>C:<span class="se">\P</span>rogram<span class="w"> </span>Files<span class="se">\C</span>loudbase<span class="w"> </span>Solutions<span class="se">\C</span>loudbase-Init<span class="se">\L</span>ocalScripts<span class="se">\</span>
<span class="w">      </span><span class="nv">check_latest_version</span><span class="o">=</span><span class="nb">true</span>
<span class="w">      </span><span class="nv">metadata_services</span><span class="o">=</span>cloudbaseinit.metadata.services.configdrive.ConfigDriveService,
<span class="w">      </span>cloudbaseinit.metadata.services.httpservice.HttpService,
<span class="w">      </span>cloudbaseinit.metadata.services.ec2service.EC2Service,
<span class="w">      </span>cloudbaseinit.metadata.services.maasservice.MaaSHttpService
<span class="w">      </span><span class="nv">plugins</span><span class="o">=</span>cloudbaseinit.plugins.common.mtu.MTUPlugin,
<span class="w">      </span>cloudbaseinit.plugins.common.sethostname.SetHostNamePlugin,
<span class="w">      </span>cloudbaseinit.plugins.windows.extendvolumes.ExtendVolumesPlugin,
<span class="w">      </span>cloudbaseinit.plugins.windows.userdata.UserDataPlugin,
<span class="w">      </span>cloudbaseinit.plugins.windows.setuserpassword.SetUserPasswordPlugin,
<span class="w">      </span>cloudbaseinit.plugins.windows.localscripts.LocalScriptsPlugin
<span class="w">      </span><span class="nv">allow_reboot</span><span class="o">=</span><span class="nb">false</span>
<span class="w">      </span><span class="nv">stop_service_on_exit</span><span class="o">=</span><span class="nb">false</span>
</pre></div>
</div>
</li>
</ul>
</div>
</section>
</section>
<section id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Link to this heading">#</a></h2>
<table class="longtable table" id="id8">
<caption><span class="caption-text">Limitations</span><a class="headerlink" href="#id8" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Limitations</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Backup</p></td>
<td><p>Versions older than or equal to Kilo are not supported. <br> Currently, incremental backup and cumulative incremental backup are not supported. <br> Multi-agent scheduling is not supported. <br> Multiple concurrent jobs are not supported.</p></td>
</tr>
<tr class="row-odd"><td><p>Restore</p></td>
<td><p>File-level restore is not supported. <br> If you want to restore a Windows VM with a new user, log in to the system using the original user and log out so that the new user will be displayed.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../vmware/vmware.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">User Guide for VMware</p>
      </div>
    </a>
    <a class="right-next"
       href="../hyper_v/hyper_v.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">User Guide for Hyper-V</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#planning-and-preparation">Planning and preparation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-the-backup-host">Configure the backup host</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verify-the-compatibility">Verify the compatibility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-agent">Install the agent</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#activate-licenses-and-authorize-users">Activate licenses and authorize users</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#add-openstack">Add OpenStack</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#enable-openstack">Enable OpenStack</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#register-openstack">Register OpenStack</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manage-openstack">Manage OpenStack</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backup">Backup</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-policies">Backup policies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#before-you-begin">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-backup-job">Create a backup job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-options">Backup options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#restore">Restore</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-virtual-machine-restore-job">Create a virtual machine restore job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-virtual-disk-restore-job">Create a virtual disk restore job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restore-options">Restore options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations">Limitations</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Aurreum
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  Copyright © 2022-2024 Aurreum
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>