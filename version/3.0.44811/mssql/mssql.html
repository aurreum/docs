
<!DOCTYPE html>


<html lang="en-US" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>User Guide for Microsoft SQL Server &#8212; ADPS V3.0.44811</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=84d92f63" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=6da122b0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'mssql/mssql';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User Guide for DB2" href="../db2/db2.html" />
    <link rel="prev" title="User Guide for MySQL" href="../mysql/mysql.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en-US"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="ADPS V3.0.44811 - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="ADPS V3.0.44811 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../install/install.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agent_install/agent_install.html">Agent Installation Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Management</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../administrator/administrator.html">Administrator’s Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Databases</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../oracle/oracle.html">User Guide for Oracle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mysql/mysql.html">User Guide for MySQL</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">User Guide for Microsoft SQL Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db2/db2.html">User Guide for DB2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sybase/sybase.html">User Guide for Sybase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../informix/informix.html">User Guide for Informix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postgresql/postgresql.html">User Guide for PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cachedb/cachedb.html">User Guide for Caché</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hana/hana.html">User Guide for SAP HANA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mariadb/mariadb.html">User Guide for MariaDB</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Files</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../file/file.html">User Guide for File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ndmp/ndmp.html">User Guide for NDMP</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Big Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../mongodb/mongodb.html">User Guide for MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hadoop/hadoop.html">User Guide for Hadoop</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Object Storage</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../obs/obs.html">User Guide for Object Storage Service</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Applications</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../exchange/exchange.html">User Guide for Microsoft Exchange Server</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Operating Systems</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../linux_os/linux_os.html">User Guide for Linux OS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Containers</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../k8s/k8s.html">User Guide for Kubernetes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Virtualization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../vmware/vmware.html">User Guide for VMware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openstack/openstack.html">User Guide for OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hyper_v/hyper_v.html">User Guide for Hyper-V</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>User Guide for Microsoft SQL Server</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#planning-and-preparation">Planning and preparation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-and-configure-the-agent">Install and configure the agent</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verify-the-compatibility">Verify the compatibility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-agent">Install the agent</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#windows">Windows</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#linux">Linux</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#activate-licenses-and-authorize-users">Activate licenses and authorize users</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backup">Backup</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-types">Backup types</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-policies">Backup policies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#before-you-begin">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#log-in-to-the-instance">Log in to the instance</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-backup-job">Create a backup job</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-options">Backup options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#restore">Restore</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restore-types">Restore types</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-media-restore-job">Create a media restore job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-point-in-time-restore-job">Create a point-in-time restore job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-an-instant-recovery-job">Create an instant recovery job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-disaster-recovery-job">Create a disaster recovery job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-recovery-testing-job">Create a recovery testing job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restore-options">Restore options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#copy-data-management">Copy data management</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#view-a-copy">View a copy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-a-copy">Clone a copy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unmount-a-copy">Unmount a copy</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-and-restore">Backup and restore</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bind-nodes-into-a-cluster">Bind nodes into a cluster</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Backup and restore</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations">Limitations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glossary">Glossary</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="user-guide-for-microsoft-sql-server">
<h1>User Guide for Microsoft SQL Server<a class="headerlink" href="#user-guide-for-microsoft-sql-server" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>This guide introduces how to install and configure the ADPS agent and how to properly use ADPS to back up and restore SQL Server.</p>
<p>The backup and restore features supported by ADPS include:</p>
<ul>
<li><p>Backup sources</p>
<p>Database (single or multiple) and transaction logs</p>
</li>
<li><p>Backup types</p>
<p>Full backup, cumulative incremental backup, log backup, and synthetic backup</p>
</li>
<li><p>Backup targets</p>
<p>Standard storage pool, deduplication storage pool, local storage pool, data synthetic pool, tape library pool, object storage service pool, and LAN-free pool</p>
</li>
<li><p>Backup schedules</p>
<p>Immediate, one-time, hourly, daily, weekly, and monthly.</p>
</li>
<li><p>Data processing</p>
<p>Data compression, data encryption, multiple channels, reconnection, speed limit, and replication</p>
</li>
<li><p>Restore types</p>
<p>Media restore, point-in-time restore, instant recovery, disaster recovery, and recovery testing</p>
</li>
<li><p>Restore targets</p>
<p>Original host and different host</p>
</li>
</ul>
</section>
<section id="planning-and-preparation">
<h2>Planning and preparation<a class="headerlink" href="#planning-and-preparation" title="Link to this heading">#</a></h2>
<p>Before you install the agent, check the following prerequisites:</p>
<ol class="arabic simple">
<li><p>You have already installed and configured other backup components, including the backup server and the storage server.</p></li>
<li><p>You have created a user with roles of operator and administrator on the ADPS console. Log in to the console with this user to back up and restore the resource.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The administrator role can install and configure agents, activate licenses, and authorize users. The operator role can create backup/restore jobs and conduct copy data management (CDM).</p>
</div>
</section>
<section id="install-and-configure-the-agent">
<h2>Install and configure the agent<a class="headerlink" href="#install-and-configure-the-agent" title="Link to this heading">#</a></h2>
<p>To back up and restore SQL Server, first install the ADPS agent on the host where SQL Server resides.</p>
<section id="verify-the-compatibility">
<h3>Verify the compatibility<a class="headerlink" href="#verify-the-compatibility" title="Link to this heading">#</a></h3>
<p>Before you install the agent, ensure that the environment of the host where SQL Server resides is on the Aurreum Data Protection Suite’s compatibility lists.</p>
<p>ADPS supports the backup and restore of SQL Server standalone, failover cluster, Always On availability groups (AGs), and Always On failover cluster instances (FCIs). Supported versions include:</p>
<ul class="simple">
<li><p>SQL Server 2000/2005/2008/2008 R2/2012/2014/2016/2017/2019/2022</p></li>
</ul>
</section>
<section id="install-the-agent">
<h3>Install the agent<a class="headerlink" href="#install-the-agent" title="Link to this heading">#</a></h3>
<p>The ADPS agent can be installed on Windows and Linux. You can select the installation method according to your environment.</p>
<section id="windows">
<h4>Windows<a class="headerlink" href="#windows" title="Link to this heading">#</a></h4>
<p>To install the agent, do the following:</p>
<ol class="arabic">
<li><p>Log in to the ADPS console.</p></li>
<li><p>From the menu, click <strong>Resource</strong> &gt; <strong>Resource</strong>. The <strong>Resource</strong> page appears.</p></li>
<li><p>From the toolbar, click the <strong>Install agent</strong> icon. The <strong>Install agent</strong> window appears.</p></li>
<li><p>In the <strong>Install agent</strong> window, do the following:</p>
<p>(1) From the <strong>Select system</strong> list, select <strong>Windows</strong>.</p>
<p>(2) From the <strong>Select file</strong> list, select the package that you want to install.</p>
<p>(3) Click <strong>Download</strong>.</p>
</li>
<li><p>Upload the package to the Windows host.</p></li>
<li><p>Log in to the Windows host as a user with administrative privileges. Double-click the package and open the installation wizard. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Select components</strong> step, select <strong>Microsoft SQL Server</strong> from the component list. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Configure Aurreum Data Protection Suite agent</strong> step, enter the following:</p>
<p>(1) In the <strong>Backup server address</strong> field, enter the IP or domain name of the backup server.</p>
<p>(2) In the <strong>Backup server port</strong> field, enter the port number. The default value is 50305. If you enable the <strong>Use SSL secure connection</strong> option, enter 60305 in the <strong>Backup server port</strong> field.</p>
<p>(3) The <strong>Access key</strong> field is optional and blank by default. If your backup server adopts multi-tenancy, you must enter the access key of the tenant for the agent.</p>
<p>(4) Click <strong>Next</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To get the access key of the user/tenant:</p>
<ol class="arabic simple">
<li><p>Log in to the ADPS console.</p></li>
<li><p>On the upper right corner, click your avatar, and go to <strong>Personal settings</strong> &gt; <strong>Account settings</strong>.</p></li>
<li><p>On the <strong>Preference</strong> tab, click <strong>View</strong> to get the access key of the current user/tenant.</p></li>
</ol>
</div>
</li>
<li><p>Confirm the <strong>Destination folder</strong> or specify another folder. Click <strong>Next</strong>.</p></li>
<li><p>Wait for the installation to complete.</p></li>
</ol>
</section>
<section id="linux">
<h4>Linux<a class="headerlink" href="#linux" title="Link to this heading">#</a></h4>
<p>For Linux OS, ADPS agent supports online and offline installation. We recommend online installation.</p>
<ol class="arabic simple">
<li><p>Online installation:
ADPS provides <code class="docutils literal notranslate"><span class="pre">curl</span></code> and <code class="docutils literal notranslate"><span class="pre">wget</span></code> commands for installation.</p></li>
<li><p>Offline installation:
See <a class="reference internal" href="../agent_install/agent_install.html#offline-installation"><span class="std std-ref">Offline installation</span></a> in Aurreum Data Protection Suite Agent Installation Guide.</p></li>
</ol>
<p>To install the agent online, do the following:</p>
<ol class="arabic">
<li><p>Log in to the ADPS console.</p></li>
<li><p>From the menu, click <strong>Resource</strong> &gt; <strong>Resource</strong>. The <strong>Resource</strong> page appears.</p></li>
<li><p>From the toolbar, click the <strong>Install agent</strong> icon. The <strong>Install agent</strong> window appears.</p></li>
<li><p>In the <strong>Install agent</strong> window, do the following:</p>
<p>(1) From the <strong>Select system</strong> list, select <strong>Linux</strong>.</p>
<p>(2) From the <strong>Component</strong> list, select <strong>MS SQL Server</strong>. The <code class="docutils literal notranslate"><span class="pre">curl</span></code> and <code class="docutils literal notranslate"><span class="pre">wget</span></code> commands appear in the window.</p>
<p>(3) If you want to delete the downloaded package automatically after the installation, select the <strong>Delete installation package</strong> checkbox.</p>
<p>(4) If you enable <strong>Ignore SSL errors</strong>, the installation will ignore certificate errors and so on. If you disable the option, the installation will prompt you to enter Y/N to continue or discontinue the process when an error occurs.</p>
</li>
<li><p>Click the <strong>Copy</strong> icon to copy the <code class="docutils literal notranslate"><span class="pre">curl</span></code> or <code class="docutils literal notranslate"><span class="pre">wget</span></code> command.</p></li>
<li><p>Log in to the Linux host as user <em>root</em>. Paste the command in the terminal and press Enter to start the installation. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">root</span><span class="nd">@localhost</span> <span class="o">~</span><span class="p">]</span><span class="c1"># curl -o- &quot;http://192.168.20.85:50305/d2/update/script?modules=mssql&amp;location=http%3A%2F%2F192.168.20.85%3A50305&amp;access_key=2042288d749dba47e963d1ab09a6472b&amp;rm=&amp;tool=curl&quot; | sh</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     	<span class="n">Time</span>  <span class="n">Current</span>
                                <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
<span class="mi">100</span>  <span class="mi">7905</span>    <span class="mi">0</span>  <span class="mi">7905</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">23844</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">44661</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
  <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>     <span class="mi">0</span>
<span class="mi">100</span> <span class="mf">58.7</span><span class="n">M</span>  <span class="mi">100</span> <span class="mf">58.7</span><span class="n">M</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">1804</span><span class="n">k</span>      <span class="mi">0</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">33</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">33</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">4859</span><span class="n">k</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
  <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>     <span class="mi">0</span>
<span class="mi">100</span> <span class="mi">6728</span><span class="n">k</span>  <span class="mi">100</span> <span class="mi">6728</span><span class="n">k</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">1900</span><span class="n">k</span>      <span class="mi">0</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">03</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">03</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">1874</span><span class="n">k</span>
  <span class="o">%</span> <span class="n">Total</span>    <span class="o">%</span> <span class="n">Received</span> <span class="o">%</span> <span class="n">Xferd</span>  <span class="n">Average</span> <span class="n">Speed</span>   <span class="n">Time</span>    <span class="n">Time</span>     <span class="n">Time</span>  <span class="n">Current</span>
                                <span class="n">Dload</span>  <span class="n">Upload</span>   <span class="n">Total</span>   <span class="n">Spent</span>    <span class="n">Left</span>  <span class="n">Speed</span>
  <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>    <span class="mi">0</span>     <span class="mi">0</span>      <span class="mi">0</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span>     <span class="mi">0</span>
<span class="mi">100</span> <span class="mi">3879</span><span class="n">k</span>  <span class="mi">100</span> <span class="mi">3879</span><span class="n">k</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">5703</span><span class="n">k</span>      <span class="mi">0</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">6247</span><span class="n">k</span>
</pre></div>
</div>
</li>
<li><p>Wait for the installation to complete.</p></li>
</ol>
</section>
</section>
</section>
<section id="activate-licenses-and-authorize-users">
<h2>Activate licenses and authorize users<a class="headerlink" href="#activate-licenses-and-authorize-users" title="Link to this heading">#</a></h2>
<p>After the agent installation, go back to the <strong>Resource</strong> page. The host with the agent installed appears on the page. Before you back up and restore SQL Server, register the host, activate the backup license, and authorize users.</p>
<p>To activate licenses and authorize users, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Resource</strong> &gt; <strong>Resource</strong>. The <strong>Resource</strong> page appears.</p></li>
<li><p>On the <strong>Resource</strong> page, select the host where SQL Server resides. Click the <strong>Register</strong> icon. After the registration, the <strong>Activate</strong> window appears.</p>
</li>
<li><p>In the <strong>Activate</strong> window, select the SQL Server backup license, and click <strong>Submit</strong>. After the activation, the <strong>Authorize</strong> window appears.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are prompted with “No enough licenses”, contact the administrator to add licenses.</p>
</div>
</li>
<li><p>In the <strong>Authorize</strong> window, select user groups to authorize access to the resource. Click <strong>Submit</strong>.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With many agents, install them first, then <strong>batch register</strong>, <strong>batch activate</strong>, and <strong>batch authorize</strong> the agents and resources for convenience. For details, see <a class="reference internal" href="#../manager/manager.md#batch-registerbatch-activatebatch-authorize"><span class="xref myst">Batch register/Batch activate/Batch authorize</span></a> in Aurreum Data Protection Suite Administrator’s Guide.</p>
</div>
</section>
<section id="backup">
<h2>Backup<a class="headerlink" href="#backup" title="Link to this heading">#</a></h2>
<section id="backup-types">
<h3>Backup types<a class="headerlink" href="#backup-types" title="Link to this heading">#</a></h3>
<p>ADPS provides three common backup types (full backup, cumulative incremental backup, and log backup) and one advanced (synthetic backup) for SQL Server.</p>
<ul>
<li><p>Full backup</p>
<p>Backs up all the data of one or more databases and enough logs to recover these data.</p>
</li>
<li><p>Cumulative incremental backup</p>
<p>Backs up only the data that has changed since the last full backup with a full backup as the baseline.</p>
</li>
<li><p>Log backup</p>
<p>If your databases use the full or bulk-logged recovery model, you can back up transaction logs periodically based on full backups or cumulative incremental backups. Transaction log backups save more time and space than full backups and truncate the log after the job is completed to avoid the log fills.</p>
</li>
<li><p>Synthetic backup</p>
<p>The first synthetic backup is a full backup, and the subsequent ones are incremental. When the synthesis condition is reached, the latest full backup and subsequent incremental backup will be synthesized to create a new full backup copy. Synthetic backups can improve the restore performance. You can directly mount the full backup copy to the target host through an instant recovery job without physical copies and additional storage space.</p>
<p>Synthetic backups have the following requirements:</p>
<p>(1) You have the advanced licenses: MS SQL Server Synthetic Backup and MS SQL Server Copy Data Management.</p>
<p>(2) You have configured the iSCSI or FC link between the backup server and the host with the agent installed.</p>
<p>(3) The data disks of the storage server use the ZFS file system.</p>
<p>(4) You have created a data synthetic pool for the current user.</p>
</li>
</ul>
</section>
<section id="backup-policies">
<h3>Backup policies<a class="headerlink" href="#backup-policies" title="Link to this heading">#</a></h3>
<p>ADPS provides six backup schedule types: immediate, one-time, hourly, daily, weekly, and monthly.</p>
<ul class="simple">
<li><p>Immediate: ADPS will immediately start the job after it is created.</p></li>
<li><p>One-time: ADPS will perform the job at the specified time once only.</p></li>
<li><p>Hourly: ADPS will perform the job periodically at the specified hour/minute intervals within the time range according to the setting.</p></li>
<li><p>Daily: ADPS will perform the job periodically at the specified time and day intervals.</p></li>
<li><p>Weekly: ADPS will perform the job periodically at the specified time and week intervals.</p></li>
<li><p>Monthly: ADPS will perform the job periodically at the specified dates and times.</p></li>
</ul>
<p>You can set an appropriate backup policy based on your situation and requirements. Usually, we recommend the following common backup policy:</p>
<ol class="arabic simple">
<li><p>Perform a <strong>full backup</strong> once a week when the application traffic is relatively small (Example: on the weekend) to ensure that you have a recoverable point in time every week.</p></li>
<li><p>Perform a <strong>cumulative incremental backup</strong> every day when the application traffic is relatively small (Example: at 2 a.m.) to ensure that you have a recoverable point in time every day, which can save storage space and backup time.</p></li>
<li><p>Perform a <strong>log backup</strong> hourly if your database supports log backups to achieve the precise point-in-time restore and ensure that the restore granularity can reach the second level.</p></li>
</ol>
<p>To use the advanced synthetic backup, we recommend the following backup policy:</p>
<ol class="arabic simple">
<li><p>Perform a <strong>synthetic backup</strong> every day to ensure that you have a recoverable point in time every day.</p></li>
<li><p>Perform a <strong>log backup</strong> hourly based on the synthetic backup to achieve the precise point-in-time instant recovery.</p></li>
</ol>
</section>
<section id="before-you-begin">
<h3>Before you begin<a class="headerlink" href="#before-you-begin" title="Link to this heading">#</a></h3>
<p>Before you back up and restore SQL Server, check the following:</p>
<ol class="arabic">
<li><p>Check the SQL Server instance status.</p>
<ul class="simple">
<li><p>Windows</p></li>
</ul>
<p>Log in to the host and open the service list. Check whether the SQL Server service status is <em>Started</em> or not.</p>
<ul class="simple">
<li><p>Linux</p></li>
</ul>
<p>Open the terminal on the host and use the <code class="docutils literal notranslate"><span class="pre">systemctl</span> <span class="pre">status</span></code> command to check the SQL Server service status.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@localhost<span class="w"> </span>~<span class="o">]</span><span class="c1"># systemctl status mssql-server</span>
●<span class="w"> </span>mssql-server.service<span class="w"> </span>-<span class="w"> </span>Microsoft<span class="w"> </span>SQL<span class="w"> </span>Server<span class="w"> </span>Database<span class="w"> </span>Engine
<span class="w">  </span>Loaded:<span class="w"> </span>loaded<span class="w"> </span><span class="o">(</span>/usr/lib/systemd/system/mssql-server.service<span class="p">;</span><span class="w"> </span>enabled<span class="p">;</span><span class="w"> </span>vendor<span class="w"> </span>preset:<span class="w"> </span>disabled<span class="o">)</span>
<span class="w">  </span>Active:<span class="w"> </span>active<span class="w"> </span><span class="o">(</span>running<span class="o">)</span><span class="w"> </span>since<span class="w"> </span>Two<span class="w"> </span><span class="m">2022</span>-05-31<span class="w"> </span><span class="m">04</span>:55:30<span class="w"> </span>EDT<span class="p">;</span><span class="w"> </span>5s<span class="w"> </span>ago
<span class="w">    </span>Docs:<span class="w"> </span>https://docs.microsoft.com/en-us/sql/linux
Main<span class="w"> </span>PID:<span class="w"> </span><span class="m">15804</span><span class="w"> </span><span class="o">(</span>sqlservr<span class="o">)</span>
<span class="w">  </span>CGroup:<span class="w"> </span>/system.slice/mssql-server.service
<span class="w">          </span>└─15804<span class="w"> </span>/opt/mssql/bin/sqlservr

<span class="m">2022</span>-05-31<span class="w"> </span><span class="m">04</span>:55:30<span class="w"> </span>localhost.localdomain<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>Started<span class="w"> </span>Microsoft<span class="w"> </span>SQL<span class="w"> </span>Server<span class="w"> </span>Database<span class="w"> </span>Engine.
<span class="m">2022</span>-05-31<span class="w"> </span><span class="m">04</span>:55:30<span class="w"> </span>localhost.localdomain<span class="w"> </span>systemd<span class="o">[</span><span class="m">1</span><span class="o">]</span>:<span class="w"> </span>Starting<span class="w"> </span>Microsoft<span class="w"> </span>SQL<span class="w"> </span>Server<span class="w"> </span>Database<span class="w"> </span>Engine...
</pre></div>
</div>
</li>
<li><p>Check storage pools.</p>
<p>(1) From the menu, click <strong>Storage</strong> &gt; <strong>Storage pool</strong>. The <strong>Storage pool</strong> page appears.</p>
<p>(2) Check whether the display area has any storage pools. If no, create a storage pool and authorize it for the current user. For details, see <a class="reference internal" href="#../manager/manager.md#add-a-storage-pool"><span class="xref myst">Add a storage pool</span></a> in Aurreum Data Protection Suite Administrator’s Guide.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To use synthetic backups, ensure that you have created a data synthetic pool for the current user.</p>
</div>
</li>
</ol>
</section>
<section id="log-in-to-the-instance">
<h3>Log in to the instance<a class="headerlink" href="#log-in-to-the-instance" title="Link to this heading">#</a></h3>
<p>Before you create a backup or restore job, log in to the SQL Server instance on the console. ADPS provides three authentication methods for SQL Server:</p>
<ul>
<li><p>Database authentication</p>
<p>The SQL Server user should have the following roles: server roles of <code class="docutils literal notranslate"><span class="pre">sysadmin</span></code> and <code class="docutils literal notranslate"><span class="pre">dbcreator</span></code>, database roles of <code class="docutils literal notranslate"><span class="pre">db_backupoperator</span></code> and <code class="docutils literal notranslate"><span class="pre">db_owner</span></code>. If the SQL Server user changes its password, you must re-log in to the instance. Otherwise, the job will fail.</p>
</li>
<li><p>OS authentication</p>
<p>The Windows user can be the Administrator or the one who installed the SQL Server. OS Authentication does not require the password of the SQL Server user. The password changes of SQL Server users will not affect the backup and restore jobs.</p>
</li>
<li><p>Access Key</p>
<p>You can use the access key of the ADPS user who is authorized with access to the resource. This method is suitable for the following scenarios:</p>
<ul class="simple">
<li><p>You cannot get the OS user’s username and password.</p></li>
<li><p>The user’s password changes frequently.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Access key authentication is not enabled by default. To enable this feature, log in to the ADPS console, go to <strong>Settings</strong>, open the <strong>Security</strong> tab, and select the <strong>Access key login instance</strong> checkbox.</p></li>
<li><p>To get the access key, log in to the console, click <strong>Personal settings</strong> &gt; <strong>Account settings</strong> on the upper right corner, find <strong>Access key</strong> on the <strong>Preferences</strong> tab, and click <strong>View</strong>.</p></li>
</ol>
</div>
</li>
</ul>
<p>To log in to the resource, do the following:</p>
<ol class="arabic simple">
<li><p>From the menu, click <strong>Resource</strong> &gt; <strong>Resource</strong>. The <strong>Resource</strong> page appears.</p></li>
<li><p>From the host list, find the host where SQL Server resides. If you have many hosts, use the search bar to find the host quickly. Click the host to expand its resource list.</p></li>
<li><p>Click <strong>Login</strong> beside the resource. The <strong>Login</strong> window appears.</p>
</li>
<li><p>In the <strong>Login</strong> window, select an authentication method according to your needs.</p>
<ul class="simple">
<li><p>Select <strong>Database authentication</strong>, enter the <strong>Username</strong> and <strong>Password</strong>, and click <strong>Login</strong>.</p></li>
<li><p>Select <strong>OS authentication</strong>, enter the <strong>Username</strong> and <strong>Password</strong> of the OS user, and click <strong>Login</strong>.</p></li>
<li><p>Select <strong>Access key</strong>, enter the access key of the current ADPS user, and click <strong>Login</strong>.</p></li>
</ul>
</li>
<li><p>If your information is correct, you will be prompted that you have logged in to the resource successfully.</p></li>
</ol>
</section>
</section>
<section id="create-a-backup-job">
<h2>Create a backup job<a class="headerlink" href="#create-a-backup-job" title="Link to this heading">#</a></h2>
<p>To create a backup job, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Backup</strong>. The backup job wizard appears.</p></li>
<li><p>At the <strong>Hosts and resources</strong> step, select the host where SQL Server resides and select the resource. The wizard goes to the next step automatically.</p></li>
<li><p>At the <strong>Backup source</strong> step, do the following:</p>
<p>(1) From the <strong>Backup type</strong> list, select a backup type.</p>
<p>(2) In the <strong>Backup source</strong> section, select the databases that you want to back up.</p>
</li>
<li><p>At the <strong>Backup target</strong> step, select a storage pool. Click <strong>Next</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cumulative incremental backups and log backups must have the same backup target as their baseline backups.</p>
</div>
</li>
<li><p>At the <strong>Backup schedule</strong> step, set the job schedule. For details, see <a class="reference internal" href="#backup-policies">Backup policies</a>. Click <strong>Next</strong>.</p>
<ul class="simple">
<li><p>Select <strong>Immediate</strong>. ADPS performs the job immediately after it is created.</p></li>
<li><p>Select <strong>One time</strong> and set the start time for the job.</p></li>
<li><p>Select <strong>Hourly</strong>. Set the start time, end time, and time interval for job execution. The unit can be hour(s) or minute(s).</p></li>
<li><p>Select <strong>Daily</strong>. Set the start time and enter the time interval for job execution. The unit is day(s).</p></li>
<li><p>Select <strong>Weekly</strong>. Set the start time, enter the time interval, and select the specific dates in a week for job execution. The unit is week.</p></li>
<li><p>Select <strong>Monthly</strong>. Set the start time and months for job execution. You can select the natural dates in one month or select the specific dates in one week.</p></li>
</ul>
</li>
<li><p>At the <strong>Backup options</strong> step, set the common and advanced options according to your needs. For details, see <a class="reference internal" href="#backup-options">Backup options</a>. Click <strong>Next</strong>.</p>
</li>
<li><p>At the <strong>Finish</strong> step, set the job name and confirm the job information. Click <strong>Submit</strong>.</p></li>
<li><p>After the submission, you will be redirected to the <strong>Job</strong> page automatically. On this page, you can start, modify, and delete the job.</p></li>
</ol>
<section id="backup-options">
<h3>Backup options<a class="headerlink" href="#backup-options" title="Link to this heading">#</a></h3>
<p>ADPS provides the following backup options for SQL Server:</p>
<ul class="simple">
<li><p>Common options</p></li>
</ul>
<table class="longtable table" id="id4">
<caption><span class="caption-text">Backup common options</span><a class="headerlink" href="#id4" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Limitations</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Compression</p></td>
<td><p>Fast is enabled by default. <br> - None: No compression during the backup job. <br> - Tunable: Customizes the compression level. The Advanced Compression license is required.  <br> - Fast: Uses the fast compression algorithms to compress data during the backup job.</p></td>
<td><p>Not available for synthetic backup jobs.</p></td>
</tr>
<tr class="row-odd"><td><p>Channels</p></td>
<td><p>It can improve backup efficiency. The default value is 1 and the value ranges from 1 to 64. <br> We recommend a value the same as the number of CPU cores. If the value exceeds the core number, the efficiency improvement will not be obvious. <br> The value for synthetic backup jobs ranges from 1 to 255.</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Verify backup files</p></td>
<td><p>Uses RESTORE VERIFYONLY to verify whether the backup set is intact and available after the backup without restoring the backup set.</p></td>
<td><p>Not available for synthetic backup jobs.</p></td>
</tr>
<tr class="row-odd"><td><p>Backup new databases</p></td>
<td><p>Not enabled by default. When enabled, it will check whether the SQL Server instance has new databases before the backup job starts. If so, the new databases will be added to the backup job.</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Log backup threshold</p></td>
<td><p>Not enabled by default. You can use it to set the log space usage threshold. The job will first check the log space usage rate and then decide whether to start the backup or not. The log backup will be performed on the databases whose log space usage reaches the threshold.</p></td>
<td><p>Only available for periodical log backup jobs.</p></td>
</tr>
<tr class="row-odd"><td><p>Full backup threshold</p></td>
<td><p>The synthetic backup job first checks the data page changes. When the data page changes of the database reach the full backup threshold, the job will be performed as a full backup but not an incremental one. The value is 50 by default and ranges from 5 to 100.</p></td>
<td><p>Only available for synthetic backup jobs.</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Advanced options</p></li>
</ul>
<table class="longtable table" id="id5">
<caption><span class="caption-text">Backup advanced options</span><a class="headerlink" href="#id5" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Limitations</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reconnection time</p></td>
<td><p>The value ranges from 1 to 60 minutes. The job continues after the abnormal reset occurs in the network within the set time.</p></td>
<td><p>Not available for synthetic backup jobs.</p></td>
</tr>
<tr class="row-odd"><td><p>Resumption buffer size</p></td>
<td><p>Specifies the resumption buffer size. The default value is 10 MiB. The bigger the resumption buffer size is, the more physical storage will be consumed. However, a bigger resumption buffer size can prevent data loss when the throughput of the business system is high.</p></td>
<td><p>Not available for synthetic backup jobs.</p></td>
</tr>
<tr class="row-even"><td><p>Speed limit</p></td>
<td><p>Limits data transfer speed or disk read/write speed for different time periods. The unit can be KiB/s, MiB/s, and GiB/s.</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Precondition</p></td>
<td><p>Checked before the job starts. The job execution will be aborted and the job state will be idle when the precondition is invalid.</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Pre-/Post-script</p></td>
<td><p>The pre-script is executed after the job starts and before the resource is backed up. The post-script is executed after the resource is backed up.</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Shadow copy provider</p></td>
<td><p>Specifies a shadow copy provider in the host to perform the synthetic backup job.</p></td>
<td><p>Only available for synthetic backup jobs.</p></td>
</tr>
<tr class="row-even"><td><p>Backup tail-log</p></td>
<td><p>When the database is damaged or data files are deleted, you can try to create a log backup first before the restore and enable this option. It can capture any log records (tail log) that have not been backed up.  <br> After the log backup, you can create a restore job and restore the database to a point in time before the failure.</p></td>
<td><p>Only available for log backup jobs. <br> To perform a successful tail-log backup, check the following:  <br> 1. The SQL Server instance runs normally under the full or bulk-logged recovery model. <br> 2. The database state is Online, Recovery, Recovery Pending, and Suspect. The database does not contain any bulk-logged changes.  <br> 3. Not available for databases with the following states: Offline, Restoring, and Emergency.  <br> 4. The <strong>Backup new databases</strong> option is not compatible with the <strong>Backup tail-log</strong> option. You cannot enable them at the same time.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="restore">
<h2>Restore<a class="headerlink" href="#restore" title="Link to this heading">#</a></h2>
<section id="restore-types">
<h3>Restore types<a class="headerlink" href="#restore-types" title="Link to this heading">#</a></h3>
<p>For different needs, ADPS provides several restore types for SQL Server, including:</p>
<ul>
<li><p>Media restore</p>
<p>When a media error occurs in a SQL Server database, such as data file corruption or accidental deletion, you can perform a media restore job to restore one or more data files to the latest state of the newest backup set.</p>
</li>
<li><p>Point-in-time restore</p>
<p>When a disaster occurs in a SQL Server database, you can perform a point-in-time restore job to restore the database to a specified point-in-time state. You can restore to the original or a different host.</p>
</li>
<li><p>Instant recovery</p>
<p>When a disaster occurs in a SQL Server database, you can perform an instant recovery job to create a database copy using the synthetic backup set and mount the copy directly to a host with the agent installed, with which the database can become online quickly. The data can be recovered quickly to reduce the recovery time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Instant recovery jobs require that you have performed a synthetic backup.</p>
</div>
</li>
<li><p>Disaster recovery</p>
<p>When a disaster occurs in a SQL Server database, you can create a disaster recovery job to restore one or more databases to the latest state of the newest backup set. You can restore to the original or a different host.</p>
</li>
<li><p>Recovery testing</p>
<p>Restores the latest backup sets to another instance on the original host or a different host hourly, daily, weekly, and monthly.</p>
</li>
</ul>
</section>
<section id="id1">
<h3>Before you begin<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>To restore SQL Server to a different host, install the agent on that host, activate the licenses, and authorize user access to the resource.</p>
</section>
<section id="create-a-media-restore-job">
<h3>Create a media restore job<a class="headerlink" href="#create-a-media-restore-job" title="Link to this heading">#</a></h3>
<p>To create a media restore job, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Restore</strong>. The restore job wizard appears.</p></li>
<li><p>At the <strong>Hosts and resources</strong> step, select the host where SQL Server resides and select the resource. The wizard goes to the next step automatically.</p></li>
<li><p>At the <strong>Backup sets</strong> step, do the following:</p>
<p>(1) From the <strong>Restore type</strong> list, select <strong>Media restore</strong>.</p>
<p>(2) In the <strong>Restore source</strong> section, select what you want to restore.</p>
<p>(3) If you want to restore data files to another path or as other names, click <strong>Modify the path for restored files</strong>. In the pop-up window, click the data files. The <strong>Rename</strong> icon appears beside the file. Click the <strong>Rename</strong> icon and modify its name or path in the pop-up window.</p>
<p>(4) Click <strong>Next</strong>.</p>
</li>
<li><p>At the <strong>Restore schedule</strong> step, set the job schedule. Click <strong>Next</strong>.</p>
<ul class="simple">
<li><p>Select <strong>Immediate</strong>. ADPS will perform the job immediately after its creation.</p></li>
<li><p>Select <strong>One time</strong> and set the start time for the job.</p></li>
</ul>
</li>
<li><p>At the <strong>Restore options</strong> step, set the options according to your needs. See <a class="reference internal" href="#restore-options">Restore options</a>. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Finish</strong> step, set the job name and confirm the job information. Click <strong>Submit</strong>.</p></li>
<li><p>After the submission, you will be redirected to the <strong>Job</strong> page. You can start, modify, and delete the job.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Media restore jobs can only restore to the original host.</p></li>
<li><p>Under the simple recovery model, files must belong to a read-only filegroup for media restore jobs.</p></li>
</ol>
</div>
</section>
<section id="create-a-point-in-time-restore-job">
<h3>Create a point-in-time restore job<a class="headerlink" href="#create-a-point-in-time-restore-job" title="Link to this heading">#</a></h3>
<p>To create a point-in-time restore job, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Restore</strong>. The restore job wizard appears.</p></li>
<li><p>At the <strong>Hosts and resources</strong> step, select the host where SQL Server resides and select the resource. The wizard goes to the next step automatically.</p></li>
<li><p>At the <strong>Backup sets</strong> step, do the following:</p>
<p>(1) From the <strong>Restore type</strong> list, select <strong>Point-in-time restore</strong>.</p>
<p>(2) From the <strong>Database</strong> list, select a database for the restore job.</p>
<p>(3) In the <strong>Restore as</strong> field, the default setting is to restore the database as the original. You can click the <strong>Rename</strong> icon beside the database name to rename the database, data file, and path.</p>
<p>(4) In the <strong>Restore point in time</strong> section, specify a point in time for the restore job.</p>
<ul class="simple">
<li><p>Select <strong>Restore to point in time</strong>. The default setting is to restore the database to the latest point in time of the newest backup set. You can click the time beside the option. In the pop-up window, drag the slider to specify or enter a point in time for the restore and click the tick button. The restore branch and backup set information of the point in time appear. This option is only available for databases with successful log backups.</p></li>
<li><p>Select <strong>Restore to LSN</strong>. The default setting is to restore the database to the latest SCN of the newest backup set. You can click the LSN beside the option. In the pop-up window, drag the slider control to specify or enter an LSN for the restore job and click the tick button. The restore branch and backup set information of the LSN appear. This option is only available for databases with successful log backups.</p></li>
<li><p>Select <strong>Restore to backup state</strong>. The default setting is to restore the database to the latest state of the newest backup set. You can select a backup set in the <strong>Backup sets</strong> field to restore to its latest backup state.</p></li>
</ul>
<p>(5) Click <strong>Next</strong>.</p>
</li>
<li><p>At the <strong>Restore target</strong> step, select a restore target. The wizard automatically goes to the next step.</p></li>
<li><p>At the <strong>Restore schedule</strong> step, set the job schedule. Click <strong>Next</strong>.</p>
<ul class="simple">
<li><p>Select <strong>Immediate</strong>. ADPS will perform the job immediately after its creation.</p></li>
<li><p>Select <strong>One time</strong> and set the start time for the job.</p></li>
</ul>
</li>
<li><p>At the <strong>Restore options</strong> step, set the options according to your needs. See <a class="reference internal" href="#restore-options">Restore options</a>. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Finish</strong> step, set the job name and confirm the job information. Click <strong>Submit</strong>.</p></li>
<li><p>After the submission, you will be redirected to the <strong>Job</strong> page. You can start, modify, and delete the job.</p></li>
</ol>
</section>
<section id="create-an-instant-recovery-job">
<h3>Create an instant recovery job<a class="headerlink" href="#create-an-instant-recovery-job" title="Link to this heading">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>If the storage pool storing synthetic backup sets is of the iSCSI type, you must install the iSCSI Initiator on the host where you perform the restore job.</p></li>
<li><p>If the storage pool storing synthetic backup sets is of the FC type, you must install the HBA API Driver corresponding to the HBA card on the agent where you perform the restore job.</p></li>
</ol>
</div>
<p>To create an instant recovery job, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Restore</strong>. The restore job wizard appears.</p></li>
<li><p>At the <strong>Hosts and resources</strong> step, select the host where SQL Server resides and select the resource. The wizard goes to the next step automatically.</p></li>
<li><p>At the <strong>Backup sets</strong> step, do the following:</p>
<p>(1) From the <strong>Restore type</strong> list, select <strong>Instant recovery</strong>.</p>
<p>(2) From the <strong>Database</strong> list, select a database for the restore job.</p>
<p>(3) In the <strong>Restore as</strong> field, the default setting is to restore the database as the original. You can click the <strong>Rename</strong> icon beside the database name to rename the database, data file, and path.</p>
<p>(4) In the <strong>Restore point in time</strong> section, specify a point in time for the restore job.</p>
<ul class="simple">
<li><p>Select <strong>Restore to point in time</strong>. The default setting is to restore the database to the latest point in time of the newest backup set. You can click the time beside the option. In the pop-up window, drag the slider to specify or enter a point in time for the restore and click the tick button. The restore branch and backup set information of the point in time appear. This option is only available for databases with successful log backups.</p></li>
<li><p>Select <strong>Restore to LSN</strong>. The default setting is to restore the database to the latest SCN of the newest backup set. You can click the LSN beside the option. In the pop-up window, drag the slider control to specify or enter an LSN for the restore job and click the tick button. The restore branch and backup set information of the LSN appear. This option is only available for databases with successful log backups.</p></li>
<li><p>Select <strong>Restore to backup state</strong>. The default setting is to restore the database to the latest state of the newest backup set. You can select a backup set in the <strong>Backup sets</strong> field to restore to its latest backup state.</p></li>
</ul>
<p>(5) Click <strong>Next</strong>.</p>
</li>
<li><p>At the <strong>Restore target</strong> step, select a restore target. The wizard automatically goes to the next step.</p></li>
<li><p>At the <strong>Restore schedule</strong> step, set the job schedule. Click <strong>Next</strong>.</p>
<ul class="simple">
<li><p>Select <strong>Immediate</strong>. ADPS will perform the job immediately after its creation.</p></li>
<li><p>Select <strong>One time</strong> and set the start time for the job.</p></li>
</ul>
</li>
<li><p>At the <strong>Restore options</strong> step, set the options according to your needs. See <a class="reference internal" href="#restore-options">Restore options</a>. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Finish</strong> step, set the job name and confirm the job information. Click <strong>Submit</strong>.</p></li>
<li><p>After the instant recovery, go to the <strong>CDM</strong> page. A mounted copy is added below the full copy. See <a class="reference internal" href="#view-a-copy">View a copy</a>.</p></li>
</ol>
</section>
<section id="create-a-disaster-recovery-job">
<h3>Create a disaster recovery job<a class="headerlink" href="#create-a-disaster-recovery-job" title="Link to this heading">#</a></h3>
<p>To create a disaster recovery job, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Restore</strong>. The restore job wizard appears.</p></li>
<li><p>At the <strong>Hosts and resources</strong> step, select the host where SQL Server resides and select the resource. The wizard goes to the next step automatically.</p></li>
<li><p>At the <strong>Backup sets</strong> step, do the following:</p>
<p>(1) From the <strong>Restore type</strong> list, select <strong>Disaster recovery</strong>.</p>
<p>(2) In the <strong>Restore source</strong> section, select databases for the restore job. If you want to rename the restore source, click the database, the data file, or the path. The <strong>Rename</strong> icon appears beside the name. Click the icon and specify a name in the pop-up window.</p>
<p>(3) Click <strong>Next</strong>.</p>
</li>
<li><p>At the <strong>Restore target</strong> step, select a restore target. The wizard automatically goes to the next step.</p></li>
<li><p>At the <strong>Restore schedule</strong> step, set the job schedule. Click <strong>Next</strong>.</p>
<ul class="simple">
<li><p>Select <strong>Immediate</strong>. ADPS will perform the job immediately after its creation.</p></li>
<li><p>Select <strong>One time</strong> and set the start time for the job.</p></li>
</ul>
</li>
<li><p>At the <strong>Restore options</strong> step, set the options according to your needs. See <a class="reference internal" href="#restore-options">Restore options</a>. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Finish</strong> step, set the job name and confirm the job information. Click <strong>Submit</strong>.</p></li>
<li><p>After the submission, you will be redirected to the <strong>Job</strong> page. You can start, modify, and delete the job.</p></li>
</ol>
</section>
<section id="create-a-recovery-testing-job">
<h3>Create a recovery testing job<a class="headerlink" href="#create-a-recovery-testing-job" title="Link to this heading">#</a></h3>
<p>To create a recovery testing job, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Restore</strong>. The restore job wizard appears.</p></li>
<li><p>At the <strong>Hosts and resources</strong> step, select the host where SQL Server resides and select the resource. The wizard goes to the next step automatically.</p></li>
<li><p>At the <strong>Backup sets</strong> step, do the following:</p>
<p>(1) From the <strong>Restore type</strong> list, select <strong>Recovery testing</strong>.</p>
<p>(2) In the <strong>Restore source</strong> section, select databases for the restore job. If you want to rename the restore source, click the database, the data file, or the path. The <strong>Rename</strong> icon appears beside the name. Click the icon and specify a name in the pop-up window.</p>
<p>(3) Click <strong>Next</strong>.</p>
</li>
<li><p>At the <strong>Restore target</strong> step, select a restore target. The wizard automatically goes to the next step. The restore target supports other instances on the original or a different host.</p></li>
<li><p>At the <strong>Restore schedule</strong> step, set the job schedule. Click <strong>Next</strong>.</p>
<ul class="simple">
<li><p>Select <strong>Hourly</strong>. Set the start time, end time, and time interval to specify the time range for job execution. The unit can be hour(s) or minute(s).</p></li>
<li><p>Select <strong>Daily</strong>. Set the start time and enter the time interval for job execution. The unit is day(s).</p></li>
<li><p>Select <strong>Weekly</strong>. Set the start time, enter the time interval, and select the specific dates in a week for job execution. The unit is week.</p></li>
<li><p>Select <strong>Monthly</strong>. Set the start time and months for job execution. You can select the natural dates in one month or select the specific dates in one week.</p></li>
</ul>
</li>
<li><p>At the <strong>Restore options</strong> step, set the options according to your needs. See <a class="reference internal" href="#restore-options">Restore options</a>. Click <strong>Next</strong>.</p></li>
<li><p>At the <strong>Finish</strong> step, set the job name and confirm the job information. Click <strong>Submit</strong>.</p></li>
<li><p>After the submission, you will be redirected to the <strong>Job</strong> page. You can start, modify, and delete the job.</p></li>
</ol>
</section>
<section id="restore-options">
<h3>Restore options<a class="headerlink" href="#restore-options" title="Link to this heading">#</a></h3>
<p>ADPS provides the following restore options for SQL Server:</p>
<ul class="simple">
<li><p>Advanced options:</p></li>
</ul>
<table class="longtable table" id="id6">
<caption><span class="caption-text">Restore advanced options</span><a class="headerlink" href="#id6" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Option</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Limitations</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Reconnection time</p></td>
<td><p>The value ranges from 1 to 60 minutes. The job continues after the abnormal reset occurs in the network within the set time.</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Resumption buffer size</p></td>
<td><p>Specifies the resumption buffer size. The default value is 10 MiB. The bigger the resumption buffer size is, the more physical storage will be consumed. However, a bigger resumption buffer size can prevent data loss when the throughput of the business system is high.</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Speed limit</p></td>
<td><p>Limits data transfer speed or disk read/write speed for different time periods. The unit can be KiB/s, MiB/s, and GiB/s.</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Precondition</p></td>
<td><p>Checked before the job starts. The job execution will be aborted and the job state will be idle when the precondition is invalid.</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>Pre-/Post-script</p></td>
<td><p>The pre-script is executed after the job starts and before the resource is restored. The post-script is executed after the resource is restored.</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>Restore state</p></td>
<td><p>The default setting is to restore to the RECOVERY state. <br> - RECOVERY: Uncommitted transactions are rolled back, and the database is available for use. <br> - NORECOVERY: Uncommitted transactions are not rolled back, and the database is not usable. Transaction logs can be applied. <br> - STANDBY: Uncommitted transactions are rolled back to a standby file, and the database is in read-only mode.</p></td>
<td><p>Only available for point-in-time restore jobs. <br> Not available when you select synthetic backup sets for the restore job.</p></td>
</tr>
<tr class="row-even"><td><p>Storage protocol</p></td>
<td><p>You can use it to select iSCSI or FC and set the target name to restore the synthetic backup set from a database synthetic pool. During the instant recovery, the selected storage protocol will be used to transfer data between the storage server and the restore target.</p></td>
<td><p>Only available when you select synthetic backup sets for the restore job.</p></td>
</tr>
<tr class="row-odd"><td><p>Keep CDC</p></td>
<td><p>For preserving CDC (Change Data Capture) settings when the database is recovered.</p></td>
<td><p>Only available for point-in-time restore and disaster recovery jobs. <br> Not available when you select synthetic backup sets for the restore job.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="copy-data-management">
<h2>Copy data management<a class="headerlink" href="#copy-data-management" title="Link to this heading">#</a></h2>
<p>On the <strong>CDM</strong> page, you can manage the copies generated by instant recovery and synthetic backup jobs, including viewing, cloning, unmounting, and deleting copies.</p>
<section id="view-a-copy">
<h3>View a copy<a class="headerlink" href="#view-a-copy" title="Link to this heading">#</a></h3>
<p>To view copies, do the following:</p>
<ol class="arabic simple">
<li><p>From the menu, click <strong>CDM</strong>. The <strong>CDM</strong> page appears.</p></li>
<li><p>From the toolbar, select the resource and the period when copies are created. The display area shows copies of this resource in this period. Copies are named by the creation time.</p></li>
<li><p>Click the copy name. The details of this copy appear on the right side of the page. Different icons represent different copy types.</p>
<ul class="simple">
<li><p>Full copy: A data copy created by a synthetic backup.</p></li>
<li><p>Mounted copy: A data copy created by an instant recovery.</p></li>
</ul>
</li>
</ol>
</section>
<section id="clone-a-copy">
<h3>Clone a copy<a class="headerlink" href="#clone-a-copy" title="Link to this heading">#</a></h3>
<p>You can click the <strong>Clone copy</strong> icon to create an instant recovery job for the synthetic copy to create a new mounted copy.</p>
<p>To clone copies, do the following:</p>
<ol class="arabic simple">
<li><p>From the menu, click <strong>CDM</strong>. The <strong>CDM</strong> page appears.</p></li>
<li><p>From the toolbar, select the resource and the period when copies are created. The display area shows the copies in this period.</p></li>
<li><p>On the display area, click the resource. The <strong>Clone copy</strong> icon appears on the right of the resource.</p>
</li>
<li><p>Click the <strong>Clone copy</strong> button. You will be redirected to the <strong>Backup sets</strong> step. See <a class="reference internal" href="#create-an-instant-recovery-job">Create an instant recovery job</a> to configure the job.</p></li>
<li><p>After the instant recovery, a copy with a mounted state is added below the selected point in time on the <strong>CDM</strong> page.</p></li>
</ol>
</section>
<section id="unmount-a-copy">
<h3>Unmount a copy<a class="headerlink" href="#unmount-a-copy" title="Link to this heading">#</a></h3>
<p>You can click the <strong>Unmount</strong> icon to unmount the mounted copies. This operation will make the mounted directory on the restore target inaccessible.</p>
<p>To unmount a copy, do the following:</p>
<ol class="arabic simple">
<li><p>From the menu, click <strong>CDM</strong>. The <strong>CDM</strong> page appears.</p></li>
<li><p>From the toolbar, select the resource and the period when copies are created. The display area shows the copies in this period.</p></li>
<li><p>Expand the full backup copy and select a mounted copy. The <strong>Unmount</strong> icon appears on the right of the copy.</p>
</li>
<li><p>Click the <strong>Unmount</strong> icon. A confirmation window appears.</p></li>
<li><p>Confirm the warning and enter the verification code. Click <strong>OK</strong>.</p></li>
<li><p>After the unmounting, you can see no such mounted copy record under the full copy.</p></li>
</ol>
</section>
</section>
<section id="backup-and-restore">
<h2>Backup and restore<a class="headerlink" href="#backup-and-restore" title="Link to this heading">#</a></h2>
<p>ADPS supports the backup and restore of SQL Server failover clusters, Always On availability groups, and Always On failover clusters. Before you back up and restore the SQL Server cluster, bind nodes into a cluster on the console.</p>
<section id="id2">
<h3>Before you begin<a class="headerlink" href="#id2" title="Link to this heading">#</a></h3>
<p>See <a class="reference internal" href="#install-and-configure-the-agent">Install and configure the agent</a> and <a class="reference internal" href="#activate-licenses-and-authorize-users">Activate license and authorize users</a> to complete the environment deployment on each node.</p>
</section>
<section id="bind-nodes-into-a-cluster">
<h3>Bind nodes into a cluster<a class="headerlink" href="#bind-nodes-into-a-cluster" title="Link to this heading">#</a></h3>
<p>To bind nodes into a cluster on the console, do the following:</p>
<ol class="arabic">
<li><p>From the menu, click <strong>Resource</strong> &gt; <strong>Cluster</strong>. The <strong>Cluster</strong> page appears.</p></li>
<li><p>From the toolbar, click the <strong>+</strong> icon. The <strong>Cluster binding</strong> window appears.</p>
</li>
<li><p>In the <strong>Cluster binding</strong> window, do the following:</p>
<ul class="simple">
<li><p>To bind the nodes of a SQL Server failover cluster:</p></li>
</ul>
<p>(1) In the <strong>Name</strong> field, enter a name for the cluster.</p>
<p>(2) From the <strong>Primary node</strong> list, select the active node in the cluster.</p>
<p>(3) From the <strong>Type</strong> list, select <strong>Active-Passive</strong>.</p>
<p>(4) From the <strong>Nodes</strong> list, select the passive node in the cluster. You can click <strong>x</strong> to remove the selected node.</p>
<p>(5) In the <strong>Database cluster address</strong> field, enter the IP address of the cluster.</p>
<p>(6) Click <strong>Submit</strong>.</p>
<ul class="simple">
<li><p>On the ADPS console, the availability group is shown as a virtual instance. After the binding, you need to activate the license for the virtual instance. To bind the nodes of an Always On availability group:</p></li>
</ul>
<p>(1) In the <strong>Name</strong> field, enter a name in the <code class="docutils literal notranslate"><span class="pre">instance</span> <span class="pre">name-ag-always</span> <span class="pre">on</span> <span class="pre">availability</span> <span class="pre">group</span> <span class="pre">name</span></code> format for the cluster.</p>
<p>(2) From the <strong>Primary node</strong> list, select the virtual instance of the current primary replica.</p>
<p>(3) From the <strong>Type</strong> list, select <strong>Always On availability groups</strong>.</p>
<p>(4) From the <strong>Nodes</strong> list, select virtual instances of secondary replicas.</p>
<p>(5) Click <strong>Submit</strong>.</p>
<p>(6) See <a class="reference internal" href="#activate-licenses-and-authorize-users">Activate licenses and authorize users</a> to activate the virtual instances.</p>
<ul class="simple">
<li><p>To bind the nodes of an Always On failover cluster:</p></li>
</ul>
<p>(1) In the <strong>Name</strong> field, enter a name for the cluster.</p>
<p>(2) From the <strong>Primary node</strong> list, select the active node in the cluster.</p>
<p>(3) From the <strong>Type</strong> list, select <strong>Active-Passive</strong>.</p>
<p>(4) From the <strong>Nodes</strong> list, select the passive node in the cluster. You can click <strong>x</strong> to remove the selected node.</p>
<p>(5) In the <strong>Database cluster address</strong> field, enter the IP address of the cluster.</p>
<p>(6) Click <strong>Submit</strong>. On the <strong>Resource</strong> page, log in to the physical instance. After login, you can see a virtual instance below the physical instance.</p>
<p>(7) Bind the virtual instances using the <strong>Always On availability groups</strong> type.</p>
<p>(8) See <a class="reference internal" href="#activate-licenses-and-authorize-users">Activate licenses and authorize users</a> to activate the virtual instances.</p>
</li>
</ol>
</section>
<section id="id3">
<h3>Backup and restore<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>When a switchover occurs, the new primary node will take over the backup job automatically. To create a SQL Server cluster backup/restore job, see <a class="reference internal" href="#create-a-backup-job">Create a backup job</a> and <a class="reference internal" href="#restore">Restore</a>. Note that:</p>
<ol class="arabic simple">
<li><p>When you create a backup job for a failover cluster, select the instance on the active node at the <strong>Hosts and resources</strong> step.</p></li>
<li><p>When you create a backup job for an Always On availability group or Always On failover cluster, select the virtual instance at the <strong>Hosts and resources</strong> step.</p></li>
</ol>
</section>
</section>
<section id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Link to this heading">#</a></h2>
<table class="longtable table" id="id7">
<caption><span class="caption-text">Limitations</span><a class="headerlink" href="#id7" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Limitations</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Backup</p></td>
<td><p>Before you use ADPS to back up SQL Server, close the backup jobs of SQL Server itself and other third-party backup providers. <br> Cumulative incremental backups do not support the system databases.</p></td>
</tr>
<tr class="row-odd"><td><p>Synthetic backup</p></td>
<td><p>Reqires Microsoft iSCSI Software Initiator installed on the Windows 2003 host. <br> Not available for an environment where the system is 64-bit and the SQL Server database is 32-bit. <br> Not available for Always On availability groups and SQL Server on Linux. <br> Not available for the SQL Server system databases.</p></td>
</tr>
<tr class="row-even"><td><p>Media restore</p></td>
<td><p>SQL Server 2000 only supports offline restore. SQL Server 2005 and later Enterprise Editions support online restore. <br> Cannot be used to restore the deleted databases. <br> Cannot restore from synthetic backup sets. <br> Cannot restore to a different host. <br> Not available for databases in Restoring and Emergency states. <br> After you restore the primary filegroup, run a full backup before running a media restore again. <br> Log backups are required when the databases with the full and bulk-logged recovery models have read-only filegroups. Otherwise, media restore jobs will fail when files are lost. <br> Cannot restore from backup sets in target pools of pool replications</p></td>
</tr>
<tr class="row-odd"><td><p>Point-in-time restore</p></td>
<td><p>Cannot restore Always On availability groups to a specified state.</p></td>
</tr>
<tr class="row-even"><td><p>Instant recovery</p></td>
<td><p>Cannot restore multiple databases at present. <br> Supports online or offline databases. <br> Not available for Always On availability groups and SQL Server on Linux.</p></td>
</tr>
<tr class="row-odd"><td><p>Always On availability groups</p></td>
<td><p>The databases in availability groups must be with the full recovery model. Therefore, when a virtual instance is selected as the restore target, the database with the simple or bulk-logged recovery model cannot be restored to the target. <br> Synthetic backup and instant recovery jobs are not supported.</p></td>
</tr>
<tr class="row-even"><td><p>Authentication method</p></td>
<td><p>Not available for SQL Server on Linux and Always On availability groups on Linux. <br> Only Windows SQL Server single instance supports the access key authentication.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="glossary">
<h2>Glossary<a class="headerlink" href="#glossary" title="Link to this heading">#</a></h2>
<table class="longtable table" id="id8">
<caption><span class="caption-text">Glossary</span><a class="headerlink" href="#id8" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Term</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>fast compression</p></td>
<td><p>A compression method that uses fast compression algorithms to compress data during the backup job.</p></td>
</tr>
<tr class="row-odd"><td><p>log truncation</p></td>
<td><p>Removes inactive virtual log files from the logical transaction logs in a SQL Server database to free up space in the logical logs for reuse by the physical transaction logs. For details, see <a class="reference external" href="https://learn.microsoft.com/en-us/sql/relational-databases/logs/the-transaction-log-sql-server?view=sql-server-ver16#Truncation">Traction log trunction</a>.</p></td>
</tr>
<tr class="row-even"><td><p>failover cluster</p></td>
<td><p>Only one host is allowed to mount the shared disk while the other is closed. When the active node fails, the inactive node will become the active node and mount the shared disk. For details, see <a class="reference external" href="https://learn.microsoft.com/en-us/sql/sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server?view=sql-server-ver16">Windows Server Failover Clustering with SQL Server</a>.</p></td>
</tr>
<tr class="row-odd"><td><p>Always On availability group</p></td>
<td><p>Under synchronous-commit mode, the data of the primary replica is updated to secondary replicas synchronously. Real-time synchronization can be maintained between the primary replica and secondary replicas. When the system detects the failure of the primary replica, a secondary replica will immediately become the new primary. For details, see <a class="reference external" href="https://learn.microsoft.com/en-us/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server?view=sql-server-ver16">What is an Always On availability group?</a>.</p></td>
</tr>
<tr class="row-even"><td><p>snapshot</p></td>
<td><p>A read-only static view of a SQL Server database (source database). For details, see <a class="reference external" href="https://learn.microsoft.com/en-us/sql/relational-databases/databases/database-snapshots-sql-server?view=sql-server-ver16">Database snapshots (SQL Server)</a>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../mysql/mysql.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">User Guide for MySQL</p>
      </div>
    </a>
    <a class="right-next"
       href="../db2/db2.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">User Guide for DB2</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#planning-and-preparation">Planning and preparation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-and-configure-the-agent">Install and configure the agent</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verify-the-compatibility">Verify the compatibility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-agent">Install the agent</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#windows">Windows</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#linux">Linux</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#activate-licenses-and-authorize-users">Activate licenses and authorize users</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backup">Backup</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-types">Backup types</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-policies">Backup policies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#before-you-begin">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#log-in-to-the-instance">Log in to the instance</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-backup-job">Create a backup job</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-options">Backup options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#restore">Restore</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restore-types">Restore types</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-media-restore-job">Create a media restore job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-point-in-time-restore-job">Create a point-in-time restore job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-an-instant-recovery-job">Create an instant recovery job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-disaster-recovery-job">Create a disaster recovery job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-recovery-testing-job">Create a recovery testing job</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restore-options">Restore options</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#copy-data-management">Copy data management</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#view-a-copy">View a copy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#clone-a-copy">Clone a copy</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#unmount-a-copy">Unmount a copy</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backup-and-restore">Backup and restore</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Before you begin</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bind-nodes-into-a-cluster">Bind nodes into a cluster</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Backup and restore</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations">Limitations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glossary">Glossary</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Aurreum
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  Copyright © 2022-2024 Aurreum
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>