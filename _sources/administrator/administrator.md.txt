# Administrator's Guide

## Introduction

ADPS disaster recovery backup platform is an enterprise-level data security protection platform. With the built-in backup cloud system, ADPS provides data backup, disaster recovery, multi-tenant shared use and collaboration of local and cloud data, etc. to protect enterprise data such as operating systems, databases, applications, files, virtual machines, object storage, and many more. When a data disaster occurs, ADPS can restore the data completely, accurately and quickly, to minimize the economic loss as possible.

This guide introduces how to use ADPS as System Admin (the admin).

## System Component

ADPS system components contain Backup Server, Storage Server, and Agent.

**Backup Server**: It is responsible for managing the connections of the Backup Agent and Storage Server. It can monitor and manage the business information of each agent resource, including backups and restores, and the information of storage servers.

**Storage Server**: It is responsible for receiving and storing data as well as processing the recycling mechanisms of backup data. The Backup Server and Storage Server components can be installed on the same device or different devices. One backup server can manage multiple storage servers to achieve storage scalability.

**Agent**: It is installed on the server where users store business data. After the agent connects to the backup server, it will be managed by the Backup Server. The agent is responsible for responding to the commands of the backup server console and performing the backup and restore jobs.

## Features

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Features
| Feature                              | Description                                                  |
| ------------------------------------ | ------------------------------------------------------------ |
| Backup and restore                   | Files backup and restore{{ br }}Databases backup and restore{{ br }}Virtue machines backup and restore{{ br }}Cloud platforms backup and restore{{ br }}Office software backup and restore{{ br }}Operating systems backup and restore |
| Disaster recovery                    | Database replication{{ br }}Continuous log protection{{ br }}Remote disaster recovery |
| Data management                      | Effective data compression{{ br }}Accurate de-duplication{{ br }}Custom backup speed limit within different time periods{{ br }}Synthetic backups of data{{ br }}Multiple copy data management strategies{{ br }}Self-serve BaaS (Backup as a Service){{ br }}Encryption of data transmission and data storage |
| Operation and maintenance (O&M) management | Labeled resource control{{ br }}Rich reports and log output{{ br }}Different user roles and access control permissions{{ br }}Data transfer in weak network environment{{ br }}Distributed multi-level management and unified monitoring{{ br }}Periodic disaster recovery testing{{ br }}Multi-factor authentication |
```
##  User System

ADPS user system is made up of system users and external users. The user system enables users of different roles to be in charge of various operations, and provides unified monitoring, isolation, checks and balances to guarantee that each user's behavior can be monitored and that every event can be traced back.

- System users

After the successful software installation, the system has four system users by default: System Admin (the admin), Audit Admin, System Security, and System Monitor, with the following permissions:

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} System users
| Role                     | Permission                                                   |
| ------------------------ | ------------------------------------------------------------ |
| System Admin (the admin) | Responsible for the system configuration, user management, storage management, license management, resource management, operation and maintenance, etc.{{ br }}Default username and password is "admin/admin". |
| Audit Admin              | Responsible for recording user actions and log retention management. {{ br }}Default username and password is "audit/audit". |
| System Security          | When System Security is enabled, the system user management such as user adding, deleting, modifying, and locking, is responsible by System Security. {{ br }}Default username and password is "security/security". |
| System Monitor           | Responsible for monitoring the operation state of the system. All system information can be monitored, including the system and job state of sub-servers. {{ br }}Default username and password is "sysmonitor/sysmonitor". |
```
- External users

You (System Admin/the admin) can create three roles of external users: Admin, Monitor, and Operator. Different external users have different operational permissions as follows:

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} External users
| Role     | Permission                                                   |
| -------- | ------------------------------------------------------------ |
| Admin    | Responsible for the system management, but without the management of important data in Storage Server. {{ br }}The external Admin's permissions are second only to System Admin (the admin). |
| Monitor  | Responsible for monitoring the operation state of the system. {{ br }}All system information can be monitored, but the system and job state of sub-servers are not included. |
| Operator | Responsible for the management of the backup and restore on the Agent. |
```
## Storage Design

### Multiple Storage Types

Storage media is used to store various backup data. ADPS supports common disk storage, tape storage, object storage and CD storage. You can create different storage pools for users based on the types of storage media.

- Disk storage

  When the disk storage is mounted to the operating system, the file system is formatted as xfs or zfs, and the backup data is saved to the file system. You can create the following types of storage pools: 

```{tabularcolumns} |\Y{0.28}|\Y{0.44}|\Y{0.28}|
```
```{table} Disk storage
  | Type                        | Description                                                  | Note                                                         |
  | --------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | Standard storage pool       | Used to store the backup data of traditional backup types.   | -                                                            |
  | De-duplication storage pool | Used to store the backup data of traditional backup types. {{ br }}The data is sharded and fingerprinted by using source de-duplication, and the data blocks with different fingerprints are saved at the end. | The file system of the disk requires the XFS format.{{ br }}    |
  | Real-time backup pool       | Used to store the backup data for Oracle and MySQL continuous log backups. | -                                                            |
  | File synthetic pool         | Used to store the backup data for File, Hadoop, and OBS synthetic backups. {{ br }}Using NFS technology, it mounts the restored data on the agent for a fast recovery. | The adps-nfs module needs to be installed for fast recovery. |
  | Database synthetic pool     | Used to store the backup data for Oracle, SQL Server, MySQL synthetic backups. {{ br }}It provides block devices for the agent through iSCSI/FC Target, takes snapshots of the block devices, and mounts the snapshots directly to the agent for fast recovery. | The file system of the disk requires the ZFS format. {{ br }}Require an installation of adps-storgaed-lanfree module. |
  | LAN-Free pool               | Used to store the backup data for traditional store types that use a LAN-Free link. {{ br }}It mounts block devices to the Agent via iSCSI/FC Target, and writes or reads data directly. | The file system of the disk requires the ZFS format.{{ br }}Require an installation of adps-storgaed-lanfree module. |
```
- Tape storage

  The storage media connect tape libraries or virtual tape libraries to the tape controller (adps-controller installation required). You can scan the connected tape libraries on the corresponding page and create tape pools to store the backup data.

```{tabularcolumns} |\Y{0.28}|\Y{0.44}|\Y{0.28}|
```
```{table} Tape storage
  | Type      | Description                                                  | Note                                                         |
  | --------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | Tape pool | Used to store the backup data from traditional backup types. {{ br }}The data is backed up directly to tape libraries (D2T). | Require to install adps-controller to manage tape libraries. |
```
- Object storage

  Object storage is secure and convenient. It is increasingly used, and more people prefer to back up local data directly to the cloud (D2C). You can create an object storage service pool by entering the type of the cloud storage, Access Key, Secret Key, etc. and then create a backup job to back up the data on the agent to the object storage service pool.

```{tabularcolumns} |\Y{0.28}|\Y{0.44}|\Y{0.28}|
```
```{table} Object storage
  | Type                        | Description                                                  | Note |
  | --------------------------- | ------------------------------------------------------------ | ---- |
  | Object storage service pool | Used to store the backup data from traditional backup types. {{ br }}The data is backed up directly to the cloud (D2C). | -    |
```
### Flexible Pool Recycling Strategies

The data in storage pools have a well-tried life cycle management. You can set the recycling strategy according to the storage time, space and other factors to achieve the recycling of storage space. 

Supported retention policies are as the followings :

```{tabularcolumns} |\Y{0.15}|\Y{0.28}|\Y{0.57}|
```
```{table} Flexible Pool Recycling Strategies
|   Strategy   | Retention policy                                        | Description                                                  |
| :----------: | :------------------------------------------------------ | :----------------------------------------------------------- |
|     Time     | Backup sets retention days                              | After the full backups of each resource are completed, the backup sets of both incremental backups (that depend on full backups) and log backups will be marked as expired together when they exceed the set retention days. |
|    Space     | Backup sets retention quota                             | When the total size of the backup sets in the pool exceeds the set retention quota, the backup sets of the earliest full backups, incremental backups (that depend on full backups) and log backups will be marked as expired together. |
| Time + Space | Backup sets retention days, backup sets retention quota | If you set the retention days and retention quota, the backup sets will be marked as expired as long as either set condition is met. |
```
**Delay delete backup sets**: You can set the time at which backup sets are actually deleted when they meet the retention policy of the storage pool.

- When checked, if the disk space usage exceeds 90% (the percentage can be modified in **Storage->Storage Server->Modify**), the earliest expired backup sets will be deleted in order to free up space.
- When unchecked, If the backup sets in storage pools reach the expired state, they will be deleted to free up space.

**The minimum backup sets**: You can configure the minimum full backup sets of each resource that will be kept in storage pools, and the default minimum is 1. The backup sets of both the incremental backups which depend on full backups, and cumulative incremental backups will be kept at the same time. When the number of full backups sets is greater than the configured value, the recycling will start according to the retention policy of the storage pool.

> You can configure the value by referring to the following example:
>
> - User environment: The current business data is 20TB and the storage space is about 140T (36*4TiB). Assume that the daily increment is 0.01TB and the annual increment is 40%, which need to back up to one storage pool.  
>
> - Backup schedule: Full backup once a week on Sunday and incremental backup once a day.
>
> - Retention policy: With the minimum backup sets of 1 and Delay Delete Backup Sets disabled, 140/20 = 7 copies. Since the maximum retention days of backup sets cannot exceed 2 months, it is recommended that 45 days (Backup sets retention days) is appropriate.

## Initialize the System

1. When you first access the ADPS interface, you will enter the license request page. After importing the license, you need to log in to ADPS and follow the wizard to continue initializing the system. The wizard interface allows you to initialize the license, register the storage server, add users, user groups, and storage pools.

2. You can enter the IP or domain name of the backup server in the browser address bar to access the login page. Supported browsers and versions are as the followings:
   - IE 11 later versions
   - Firefox 52 and later versions

   - Chrome 49 and later versions

> Note: 
>
> - The initialization wizard is only operated and configured by you (System Admin/the admin), and is not visible to other users. 

### Apply for a License

1. Select Aurreum Data Protection Suite to activate ADPS.

2. Choose the license **Edition**, including **Trial**, **Lease**, **Official**, and **Channel**.

   ![license-02](../image/admin/10-license/license-02.png)

**Trial**: You can try the software for 30 days. After the license expires, you cannot continue using ADPS, and if you want to keep using it, you need to purchase the Official License edition.

**Lease**: You can use the software during the lease duration including one year, two years, three years, and five years after you get authorized. You need to renew the lease to continue using it after the lease duration expires. 

**Official**: Officially licensed version. You can use the software for lifetime after you get the Official license.

**Channel**: Officially licensed version. You can use the software for lifetime after you get the Channel license.

3. Set options for different licenses. 

- Options for the Trial License.


![license-03](../image/admin/10-license/license-03.png)

**Trial license renewal**: When the Trial License expires and by applying for a trial license renewal, you can continue using ADPS. When you apply for a trial license renewal, the settings page is loaded with expired resources by default, and you need to bind the license renewal to the resources. If you delete the expired resource records loaded by default and replace them by adding modules, the resource renewal will be invalid.

**Trial days**: The trial period is 30 days by default. After the expiration, you can't continue using the software, and if you want to continue, you can apply for the Trial License Renewal or purchase the Official License edition.

**Number of each module**: You can customize the number of licenses that need to be applied for each resource module.

**Custom**: You can manually select the platform where the resource is located and the resource type according to your need.

**Unactivated**: After you select this option, the system automatically lists all the resource types associated to the server and the number of unactivated resources.

- Options for the Lease License


![license-04](../image/admin/10-license/license-04.png)

**Lease license renewal**: You can continue using ADPS by applying for a lease licence renewal when the lease duration expires.

**Lease duration**: The lease time period of the authorized use. The lease duration includes one, two, three and five years. You need to renew for further use after the lease duration expires.

**Storage space**: The activated storage space. Users can only use the activated storage space. When the activated storage space is used up, users of the Operator role cannot back up data to the storage server. If you want to expand the storage space, you need to apply for a new license. Storage space unit includes GiB, TiB, and PiB.

**Disk storage**: Used for local storage pool, standard storage pool, de-duplication storage pool, file synthetic pool, real-time backup pool, block device de-duplication pool, database synthetic pool, block device copy pool, and LAN-Free pool.

**Object storage**: Used for object storage service pool.

**Tape storage**: Used for tape storage pool.

**CD storage**: Used for CD-ROM tower storage pool.

- Options for the Official License


![license-05](../image/admin/10-license/license-05.png)

**Licensing mode**: You can choose to license **By Module** or **By Space Storage**. 

- When you choose by module, after the module has been used, you need to apply for another license before you can add another module. 
- When you choose by space storage, the use of modules will not be restricted. When the storage space is used up, you need to reapply for storage space before users of the Operator role can continue to back up data.

**Maintenance time**: The maintenance time is available for six months, one year, two years, three years and five years. You can choose the maintenance time according to your need.

**Support**: You can choose the support service of 7 * 24 hours or of 5 * 8 working hours according to your need.

**Custom**: You can manually select the platform where the resource is located and the resource type according to your need.

**Unactivated**: When you select this option, the system automatically lists all the resource types associated to the server and the number of unactivated resources.

**Storage space**: The activated storage space. Users can only use the activated storage space. When the activated storage space is used up, users of the Operator role cannot back up data to the storage server. If you want to expand the storage space, you need to apply for a new license. Storage space unit includes GiB, TiB, and PiB.

**Disk storage**: Used for local storage pool, standard storage pool, de-duplication storage pool, file synthetic pool, real-time backup pool, block device de-duplication pool, database synthetic pool, block device copy pool, and LAN-Free pool.

**Object storage**: Used for object storage service pool.

**Tape storage**: Used for tape storage pool.

**CD storage**: Used for CD-ROM tower storage pool.

- Options for the Channel License


![license-06](../image/admin/10-license/license-06.png)

**Maintenance time**: The maintenance time is available for six months, one year, two years, three years and five years. You can choose the maintenance time according to your need.

**Support**: You can choose the support service of 7 * 24 hours or of 5 * 8 working hours according to your need.

**Custom**: You can manually select the platform where the resource is located and the resource type according to your need.

**Unactivated**: When you select this option, the system automatically lists all the resource types associated to the server and the number of unactivated resources.

**Storage space**: The activated storage space. Users can only use the activated storage space. When the activated storage space is used up, users of the Operator role cannot back up data to the storage server. If you want to expand the storage space, you need to apply for a new license. Storage space unit includes GiB, TiB, and PiB.

**Disk storage**: Used for local storage pool, standard storage pool, de-duplication storage pool, file synthetic pool, real-time backup pool, block device de-duplication pool, database synthetic pool, block device copy pool, and LAN-Free pool.

**Object storage**: Used for object storage service pool.

**Tape storage**: Used for tape storage pool.

**CD storage**: Used for CD-ROM tower storage pool.

4. You can add modules, customize the number of modules, and choose the OS architectures and resource types of the agent. If you apply for the Official License edition and choose to license by storage space, you don't need to add more modules.

![license-07](../image/admin/10-license/license-07.png)

5. You can choose the relevant options to enable the corresponding **Advanced** functions according to your need. As the module usage period, when the advanced functions of the Trial License expire, you can apply again after the expiration date. If your edition is the Official License, you don't need to repeat the application when advanced functions are enabled.

![license-08](../image/admin/10-license/license-08.png)

**Multi-Tenant**: ADPS establishes an account mechanism for enterprises and organizations. Each account is a tenant, and a private system of backup and restore is established for multiple tenants in a shared backup environment. You can use **Multi-Tenant** to provide individual services for each tenant on demand, configure independent data storage space to achieve data isolation among tenants via the separate management mechanism.

### Import a License

Click **Import License**, and upload the license you have acquired. After you upload the license successfully, its information will be added on the license page. You can view the acquired license information on the **License** page.

> Note: 
>
> - The license is for one-time use only, and it is required to correspond to the last generated application file. If you upload the license generated from the old application file, the license operation will fail.

### Log in to the System

1. Enter **Username** and **Password** as System Admin (the admin). Both the default username and password are admin.

> Note: 
>
> - If the user enter the wrong password, the browser IP will be listed in the IP blocklist of the logged-in user. The user must apply to you (System Admin/the admin) for a release from the IP blocklist before the browser can be used to log in the user again.

2. After the first login, it is mandatory to modify the password and set **New Password**.

![login-2](../image/admin/02-login/login-2.png)

3. Once the new password is set, you will automatically log in to the system and enter the wizard for quick configuration page.

### Quick Configuration

This chapter introduces how you (System Admin/the admin) can quickly configure the users, storage, network, and resources in the wizard. Contents include:

- Add user

- Register storage server

- Add storage pool

- Activate resource
- Set the Network

- Set the Backup index

> Note: 
>
> - The initialization wizard can only be operated by you (System Admin/the admin), not visible by other users.

#### Add User

Functions like backup and restore, data disaster recovery, etc. are executed by the user of the "Operator" role, so you must create a user of the "Operator" role. External users of Admin and Monitor roles are added on demand.

1. Enter **Username**, **Password**, **Maximum password age**, **Email**, **Telephone**. You can also customize the users' **Nickname**, **Organization**, **Department**, **Audit Log Quantity Limit**, and **Audit Log Retention Days**.
2. Select **Operator** as **Roles**. **User Group** sets **Create user group with the same name** by default. Click **Submit**.

     ![user-1](../image/admin/03-guide/user-1.png) 

3. After you add the user successfully, click **Submit** to enter the **Register Storage Server** page.

> Note: 
>
> - If you have multiple users to add, you can further add them on the User page. Please refer to *User Management* in this guide.

#### Register Storage Server

After the storage server software is installed and registered, you can add the storage pool, set up network, and execute other operations.

1. Select the storage server and click ![storage-3](../image/admin/03-guide/storage-3.png) icon to register.

![storage-2](../image/admin/03-guide/storage-2.png)

2. After the registration, you will see a pop-up window confirming the setup of management network. Click **OK** to enter the next step to specify the communication network between the backup server and the storage server.

   ![storage-4](../image/admin/03-guide/storage-4.png)

3. **Network** selects **New** by default. You can set the **Name** of the network, check **Management Network** as **Purposes**, set the **Address**, **SSL**, and **Port** of the network between the storage server and the backup server.

![storage-5](../image/admin/03-guide/storage-5.png)

4. When the storage server is successfully registered and the status is **Online**, click **Next** to enter the Add Storage Pool page.

![storage-6](../image/admin/03-guide/storage-6.png)

> Note: 
>
> - If you have multiple storage servers to add, you can add them on Storage->Storage Server page. See *Storage Server* in this guide.

#### Add Storage Pool

After the storage server is registered, you can add storage pools and assign them to users for storing data, and users can add storage pools on demand as well. 

For example, if you want to add a standard storage pool:

1. Select **Standard Storage Pool** as the **Type**, select the corresponding **Storage Server**, and click **Next**.

![pool-1](../image/admin/03-guide/pool-1.png)

2. Set retention policy, and encryption for the storage pool. For **Backup Sets Retention Policy**, see *Flexible Pool Recycling Strategies* in this guide.

![pool-2](../image/admin/03-guide/pool-2.png)

- **Advanced Options**:

  **Data storage encryption**: Data storage support AES and Blowfish encryption. After you enable this option, select **Encryption algorithm** and **Key length**.

  **Specify UUID**: You can specify the UUID for the pool you add. This option is for rebuilding storage pools in case of accidental deletion, please use with caution!


3. You can customize the name of the storage pool and assign the pool to user groups. Only users under the user group have permissions to the pool.

![poo3](../image/admin/03-guide/poo3.png)

> Note: 
>
> - If you have multiple storage pools added for users, it is recommended to complete this deployment on Storage -> Storage Pool page.

#### Activate Resource

1. After the agent software is installed and registered, you need to activate the license and authorize users before the authorized users can perform the backup and restore.

![agent-1](../image/admin/03-guide/agent-1.png)

2. Click ![agent-2](../image/admin/03-guide/agent-2.png) on the **Resource** page to register the agent. In the pop-up **Activate** window, click **Submit** to activate resources. If you select **Cancel**, you can activate the resource later by referring to *Resource Management->Register hosts/activate licenses/authorize licenses* in this guide.

![agent-3](../image/admin/03-guide/agent-3.png)

3. Click **Authorize** to authorize users under the user group before they have permissions to operate the resources on this agent.

![agent-4](../image/admin/03-guide/agent-4.png)

>  Note: 
>
>  - If you have multiple resource hosts to register and activate, it is recommended to register and batch license on the Resources page.

#### Set the Network

- If the storage server is multi-IP, it is recommended that you create **Data Network** and **Storage Pool Replication Network** to specify the transfer network for backup, restore and pool replication, if not, communication problems may occur to cause jobs fail.

- If the network type of storage servers is single, you are allowed not to specify the network, and the IP will be obtained by default. If there are many items to set, it is recommended to complete this deployment in **Storage** -> **Network**. See *Storage Management->Network* in this guide for details.


![network-1](../image/admin/03-guide/network-1.png)

#### Set the Backup Index

With backup index, the backup server can be self-protected and used together with storage pool replication for scenarios like backup server local/offsite disaster recovery and migration, etc. When users misoperate, the backup server is abnormal or reinstalled, you can use the disaster recovery to reduce the loss.

Set the **Name** of the backup index job, the **Storage Pool** to store data, **Retention Days**, **Start Time**, **Execution Interval**.

>Note: 
>
>- For specific application scenarios of the backup and restore, see *Backup Index*.

![catalog-1](../image/admin/03-guide/catalog-1.png)

After completing the above operations, the basic configuration of the system is finishing.

## Dashboard

The **Dashboard** interface helps you understand the overall state of the system operation. The display modules mainly include:

- O&M statistics
- Overall storage capacity usage
- Licensed storage space usage 
- Storage pool capacity usage
- Data export

![dashboard-1](../image/admin/04-dashboard/dashboard-1.png)

### O&M Statistics

![dashboard-2](../image/admin/04-dashboard/dashboard-2.png)

**Hosts**: Count the total number of registered hosts, and the number of online and offline hosts.

**Resources**: Count the total number of resources of registered hosts, and the number of online and offline resources.

**Storage pools**: Count the total number of storage pools, the number of online and offline storage pools.

**Storage pool replication**: Count the total number of pool replication jobs and the number of successful, failed, and running jobs. You can choose to count the data within 24 hours, 7 days, 30 days, or 90 days.

**Jobs**: Count the total number of backup and restore jobs created and the number of one-time, cycle, and running jobs.

**Histories**: Count the total number of jobs executed and the number of successful, failed, and cancelled jobs. You can choose to count the data within 24 hours, 7 days, 30 days, or 90 days.

**Database replication**: Count the total number of database replication, and the number of the database replication in normal, error, and warning state.

**Alerts**: Count the total number of alerts, errors, and fatal errors generated by users' agents, storage pools, and data synchronization. You can choose to count the data within 24 hours, 7 days, 30 days, or 90 days.

> Note: 
>
> - You can click the names on the display modules to redirect to the relevant pages.

### Overall Storage Capacity Usage

The overall disk storage capacity usage is presented as a pie chart.

- The number in the center shows the total capacity of the disk storage.
- The red area shows the amount of storage capacity used.
- The grey area shows the amount of storage capacity free.

![dashboard-3](../image/admin/04-dashboard/dashboard-3.png)

### Licensed Storage Space Usage 

The Licensed Storage Space Usage is for Official License Edition only. It refers to the activated storage space usage. Users can only use the activated storage space. When the activated storage space is used up, users of the "Operator" role cannot back up data to the storage server. If you want to expand the storage space you need to re-apply for a license.

![dashboard-4](../image/admin/04-dashboard/dashboard-4.png)

### Storage Pool Space Usage

The usage of each disk storage capacity is displayed as a pie chart, and the usage of the storage pool under each disk is displayed as a bar graph.

- The progress bar appears in blue when the pool usage is below 80% of the total pool capacity.

- The progress bar appears in orange when the pool usage is above 80% but below 90%, and an alert email will be sent to users.
- The progress bar appears in red when the pool usage is greater than 90% of the total pool capacity, and an alert email will be sent to users. Storage pool capacity usage is presented as bar graphs.

![dashboard-8](../image/admin/04-dashboard/dashboard-8.png)

> Note: 
>
> - If there are tape library pool and object storage service pool existing, the tape library pool and object storage service pool will also show the corresponding usage in bar graphs.

### Data Export

You can export data shown on the Dashboard. Click the ![dashboard-6](../image/admin/04-dashboard/dashboard-6.png) icon of the upper-right corner to export the visual data to CSV format.

![load-1](../image/admin/04-dashboard/load-1.png)

**Refresh**: Click the ![dashboard-5](../image/admin/04-dashboard/dashboard-5.png) icon of the upper-right corner to refresh all data of the Dashboard. To avoid frequent refreshing, the refresh icon is locked for 3 seconds during the refreshing process. If you set automatic refresh in **Set Up**,  the refresh icon will rotate slowly and a progress bar at the bottom of the icon will indicate the progress of triggering the next refresh.

**Set up**: By clicking the ![dashboard-7](../image/admin/04-dashboard/dashboard-7.png) icon of the upper-right corner, you can set the frequency of automatic refresh for 30 seconds, 1 minute, 3 minutes or 5 minutes. Also, you can hide or show the specified modules, and the CSV downloaded does not contain the corresponding data from the hidden modules. 

## User Management

This chapter introduces how you can add users of different roles and assign operational permissions of resources and storage pools to users under user groups. Contents include:

- Add user
- Assign user group

### Add User 

Select **User**->**User** to enter the user page, which allows you to view and manage the information about users. You (System Admin/the admin) can add new users with roles of Admin, Monitor and Operator. Backup and restore, disaster recovery, and other functions are executed by the Operator, so you must create a user of the **Operator** role. You can add users with roles of **Admin** and **Monitor** on demand. The supported operations are as follows:

- Add Operator, Monitor, Auditor
- Lock/unlock user
- Modify user information
- Delete user
- Add IP address to the login blocklist

![user-1](../image/admin/05-user/user-1.png)

1. Click the icon ![user-2](../image/admin/05-user/user-2.png) to add the user.

2. Enter **Username**, **Password**, **Maximum password age**, **Email**, **Telephone**. You can also customize the user's **Nickname**, **Organization**, **Department**, **Audit Log Quantity Limit**, and **Audit Log Retention Days**.

3. Select **Operator** as **Roles**. set **User Group**. Click **Submit** to finish the adding.

    ![user-add](../image/admin/05-user/user-add.png)

    > Note: 
    >
    > - The steps to add users of the Admin role or Monitor role are the same as above.

**Modify user information**: Click ![user-3](../image/admin/05-user/user-3.png) to modify user information. You can modify nickname, password, Email, phone and other information of all users.

**Lock user**: If you need to disable a user, click ![user-4](../image/admin/05-user/user-4.png) to lock the user with the ![user-8](../image/admin/05-user/user-8.png) state, the user will not be able to log in to the management console.

**Delete user**: Click ![user-5](../image/admin/05-user/user-5.png) to delete users.

**Login IP address blocklist**: For system security and to prevent brute-force cracking, if you add a user's IP to the **Login IP address blocklist**, this user cannot log in anymore using the IP that you add, and the login is not allowed until you release the IP from the blocklist.

- Click ![ip-5](../image/admin/05-user/ip-5.png) to batch view the blocklist of all users' login IP address. Click ![ip-3](../image/admin/05-user/ip-3.png) to release the IP from the blocklist.

- Click ![user-6](../image/admin/05-user/user-6.png) to access the pop-up window where you can click ![ip-2](../image/admin/05-user/ip-2.png) to add the IP to the blocklist.

![ip-1](../image/admin/05-user/ip-1.png)

> Note: 
>
> - When a user fails to log in more than 3 times, this user' current browser IP will also be blocklisted from logging in, and the user needs to contact you (System Admin/the admin) to ask for a release from the blocklist before being allowed to log in.

### Assign User Group

Click **User**->**User Group** to enter the User Group page. This page allows you to view and manage users under user groups, resources and storage pools, and you can assign users permissions to operate resources and storage pools. The supported operations are as follows:

- Add user group
- Modify user group
- Delete user group

![group-2](../image/admin/05-user/group-2.png)

1. Click ![ip-2](../image/admin/05-user/ip-2.png) to select **Users**, **Resources**, and **Storage Pools**.
2. Click **Submit** to add user groups. Only users under the same user group have the access and operational permissions to resources and storage pools. 

![group-1](../image/admin/05-user/group-1.png)

**Modify user group**: Click ![group-3](../image/admin/05-user/group-3.png) to add or delete users under user groups, resources, and storage pools.

**Delete user group**: Click ![group-4](../image/admin/05-user/group-4.png) to delete the configuration for user groups.

## Storage Management

Storage media is used to store various backup data. ADPS supports common disk storage, tape storage, object storage and CD storage. You can create different storage pools for users based on the types of storage media. This chapter introduces the management of various storage media, included:

- Storage server 
- Storage pool
- Pool replication job
- Network
- SCSI Target 
- RAID controller (Data protection appliance)
- Software RAID (Data protection appliance)

### Storage Server

Click **Storage** -> **Storage Server** to enter the storage server page. After the storage server software is installed and registered, you can add storage pools and set up networks.

1. Select the storage server, and click ![storage-3](../image/admin/03-guide/storage-3.png) to register.

![storage-1](../image/admin/06-storage/storage-1.png)

2. After the registration, you will see a pop-up window confirming the setup of management network. Click **Submit** to enter the next step to specify the communication network between the backup server and storage server.
3. The system allows only one Management Network to be created. If there is no Management Network existing, the system will add Management Network by default. In the **Add Network** window, set the name of the **Network**, check **Management Network**, and fill in the **Address**, and **Port** of the network between the storage server and the backup server.

![net](../image/admin/06-storage/net.png)

4. The storage server is successfully registered and the status is **Online**.

   ![storage-4](../image/admin/06-storage/storage-4.png)

   - Modify used space alarm threshold: Click ![storage-5](../image/admin/06-storage/storage-5.png) to modify the name of the storage server and used space alarm threshold. The threshold value is 0 ~ 99. No alert Email is sent when it is 0, and the Email will be sent when the physical space usage ratio exceeds the set value.
   - Modify the network: Click ![storage-6](../image/admin/06-storage/storage-6.png) to view, modify and delete the network setting of the storage server.
   - Unregister the storage server: Click ![storage-7](../image/admin/06-storage/storage-7.png) to unregister the storage server. The backup and restore jobs of the storage pool on the storage server will fail when the storage server is unregistered. If the unregistration is an accidental deletion, you can re-register the storage server to the backup server again, and the jobs related to the storage server can be executed normally.

> Note: 
>
> - Please be careful to modify the configuration of the storage server, otherwise the agent may not be able to connect to the added storage pool.

### Storage Pool

After the storage server is registered, you can add storage pools and assign them to users to store data. Users can add storage pools according to their needs. See *Storage Design* in this guide for details.

Click **Storage** -> **Storage Pool** to enter the Storage Pool page where you can view and manage information about storage pools.

![pool-1](../image/admin/06-storage/pool-1.png)

####  Add Storage Pool

##### Add Standard Storage Pool

1. Click ![pool-2](../image/admin/06-storage/pool-2.png) , select **Standard Storage Pool** as the **Type**, and select the **Storage Server** where the storaged module is installed.

 ![pool-sta-1](../image/admin/06-storage/pool-sta-1.png)

**Multi-storage**: You can expand or merge storage capacity by adding multiple storage servers. When adding a storage pool, enable **Multi-storage** and select **Allocate Storage Space**. You cannot modify its configuration after the adding.

**Allocate storage space**: If you enable **Multi-storage**, you need to allocate storage space to the storage pool, which means backup sets are allowed to use the amount of storage space. If the allocated space for the storage has been used up, no further backups can be made to the storage server.

2. Set the retention policy for the storage pool

![pool-sta-2](../image/admin/06-storage/pool-sta-2.png)

- **Common options**:

  **Time policy**: This policy only shows the option of **Backup sets retention days**, and the option of **Backup sets retention quota** is not displayed.

  **Space policy**: This policy only shows the option of **Backup sets retention quota**, and the option of **Backup sets retention days** is not displayed. 

  **Time and space policy**: The options of **Backup sets retention days** and **Backup sets retention quota** are displayed. 

  - If you enter 0 in both the options, the Backup Sets Retention Policy of the pool you added on the Storage Pool page shows **Unlimited**. 
  - If you enter 0 in one of the options, the Backup Sets Retention Policy of the pool you added on the Storage Pool page shows the value you entered. 
  - If you enter values in both the options, the Backup Sets Retention Policy of the pool you added on the Storage Pool page shows **XX days or XX GiB/PiB** you entered.

  **Backup sets retention quota**: Set the retention quota for the storage pool backup sets. 10 GiB is retain by default. 0 means no restriction on the retention quota.

  **Backup sets retention days**: Set the retention days for the storage pool backup sets. The default is 30 days. 0 means no restriction on the retention days.

  **Delay delete backup sets**: 

- When it's enabled, the backup sets in the storage pool that are expired will not be deleted immediately and the backup sets can still be restored. 

   - When the disk space usage exceeds 90%, the earliest expired backup sets will be deleted first so that the disk space usage is below 90%. 

   - For multi-storage pools, when all allocated storage space are used up, only the earliest expired backup sets are deleted to free up the storage space. 

- When it's disabled, the backup sets in the storage pool will be deleted as soon as it expires.

  **Min full backups retention**: Set the number of full backup sets that each resource will retain at least when the pool recycling strategy triggers.

  ![pool-sta-5](../image/admin/06-storage/pool-sta-5.png)

- **Advanced options**:

  **Data storage encryption**: After enabling this option, you need to select **Encryption Algorithm**, **Cipher Length**, **Encryption Mode**, and the transfer and storage of backup sets will be encrypted. 

  - The encryption algorithms available are **AES**, **Blowfish** and **SM4**. 
  - The cipher length available under AES encryption algorithm are **128**, **192**, and **256**. 
  - AES algorithm supports five encryption modes that are **CBC**, **CFB**, **CTR**, **ECB** and **OFB**, while Blowfish and SM4 algorithms support four encryption modes that are **CBC**, **CFB**, **ECB** and **OFB**.

3. You can customize the name of the pool and assign permissions to user groups, and only users under the specified user group have permissions to use the pool.

   ![pool-sta-8](../image/admin/06-storage/pool-sta-8.png)

   **Name**: You can customize the name of the storage pool and the name cannot be repeated.
   
   **User group**: You can select users to use storage pools. Only the resources and users under that user group have permissions to operate and use the pool.
   
   **Owner**: You can select tenants to use the storage pool. Only the owner of that pool and its subordinate operators have permissions to the pool. This configuration is only available for multi-tenant environments.

###### **Add Storage**

After creating a standard storage pool with Multi-storage enabled, you can add multiple storage, consolidate the storage capacity, and expand the storage pool space.

![pool-sta-6](../image/admin/06-storage/pool-sta-6.png)

Click "**+**" on the right side of the specified storage pool to access the Add Storage window.

![pool-sta-7](../image/admin/06-storage/pool-sta-7.png)

**Type**: Select **Standard Storage Pool** by default.

**Address**: Select the domain name or IP address of the server corresponding to the device on which the storaged module is installed.

**SSL**: When you enable this option, the storage uses SSL and the data is encrypted when backed up to this storage pool.

**Port**: Enter the port number of the device. The default port is 50306. If SSL is enabled, the default port is 60306.

**Allocate storage space**: The storage pool allocates storage space, which means the backup sets are allowed to use the amount of this storage space. If this allocated storage space is used up, no further backups can be made to this storage.

##### Add De-duplication Storage Pool

1. Click ![pool-2](../image/admin/06-storage/pool-2.png) , select **De-duplication Storage Pool** as the **Type**, select the storage server where the storaged module is installed, and set **Chuck Size**, which is **Adaptive** by default.

 ![pool-dep](../image/admin/06-storage/pool-dep.png)

![pool-dep-5](../image/admin/06-storage/pool-dep-5.png)

**Chunk Size**: Supports **Adaptive**, **Variable**, **64 KiB**, **128KiB**, **256KiB**, and **512KiB**. It is recommended that you back up each resource to the de-duplication pool with the appropriate block size to achieve the best de-duplication effect.

2. Set the retention policy for the storage pool

![pool-dep-3](../image/admin/06-storage/pool-dep-3.png)

![pool-dep-4](../image/admin/06-storage/pool-dep-4.png)

- **Advanced options**:

  **Fingerprint database compression**: If you enable the option, the storage size of the fingerprint database will be compressed.

  **Redundancy (Number of copies)**: Set the number of redundant copies. The default value cannot exceed the number of storage nodes, and the maximum is 3.

  **Data storage encryption**: Data storage supports AES and Blowfish encryption. After enable this option, select **Encryption algorithm** and **Key length**.

  **Specify UUID**: You can specify the UUID of the created pool. It's used to rebuild storage pools in case there are mistaken deletions, please use with caution!

3. You can customize the name of the pool and assign permissions to user groups, and only users under the specified user group have permissions to use the pool.

##### Add Real-time Backup Pool

1. Click ![pool-2](../image/admin/06-storage/pool-2.png) , select **Real-time Backup Pool** as the **Type**, and select the storage server on which the storaged module is installed. 

 ![pool-time-1](../image/admin/06-storage/pool-time-1.png)

2. Set the retention policy for the storage pool

    ![pool-time-3](../image/admin/06-storage/pool-time-3.png)

    ![pool-time-2](../image/admin/06-storage/pool-time-2.png)

- **Advanced options**: 

    **Specify UUID**: You can specify the UUID of the created pool. It's used to rebuild storage pools in case there are mistaken deletions, please use with caution!

3. You can customize the name of the pool and assign permissions to user groups, and only users under the specified user group have permissions to use the pool.

##### Add File Synthetic Pool

File synthetic pool allows the pool to synthesize the backup sets as the base with subsequent incremental backups. By scanning directories, it recycles the space occupied by the redundant files in the full backup sets. With the Synthetic Backup Sets Retention enabled, the full backups and the incremental backups will be merge automatically.

1. Click ![pool-2](../image/admin/06-storage/pool-2.png) , select **File Synthetic Pool** as the **Type**, and select the **Storage Server** on which the storaged module is installed. This server requires the nfsd module to be installed as well. 

 ![pool-file-merge-1](../image/admin/06-storage/pool-file-merge-1.png)

> Note: 
>
> - File synthetic pool does not support Windows for now. When you enter the address that the storage server installed on Windows, the page indicates that the file synthetic pool is not supported.

2. Set retention policy and advanced options for the storage pool

    ![pool-file-merge-2](../image/admin/06-storage/pool-file-merge-2.png)

**Specify UUID**: You can specify the UUID of the created pool. It's used to rebuild storage pools in case there are mistaken deletions, please use with caution!

3. You can customize the name of the pool and assign permissions to user groups, and only users under the specified user group have permissions to use the pool.

##### Add Database Synthetic Pool 

1. Click ![pool-2](../image/admin/06-storage/pool-2.png) , select **Database Synthetic Pool** as the **Type**, and select the **Storage Server** on which the storaged module is installed. This server requires the storaged- lanfree module to be installed as well. 

 ![pool-database](../image/admin/06-storage/pool-database.png)

**As a pool replication target**: When it's enabled, database synthetic pool can only be used as a pool replication target, not as a backup target, and cannot be modified after the creation.

2. Set the number of **Backup Sets Retention**, and the number of **Synthetic Pool Snapshot Retention**. You should set a reasonable value considering the backup period.

    ![pool-database-1](../image/admin/06-storage/pool-database-1.png)

**Protocol type**: Support iSCSI and FC. 

**Target**: Set names for the created iSCSI and FC Target, One Target should only correspond one storage pool. You should note the FC type, and select the online WWPN as the target. 

**Compression**: You can select to use compression to store data.

**Capacity**: Set the capacity for the storage pool. The capacity of storage pool should include the size of LUN and the capacity of snapshot. It is recommended that the size of the pool created should be at least twice the total size of the database, or larger if the amount of data changes and the snapshot retention is large.

**Dynamic allocation of space**: When creating a storage pool, you can set whether to immediately take up space on the storage server.

- **Advanced options**:


![pool-database-2](../image/admin/06-storage/pool-database-2.png)

**Asynchronous I/O for backend storage**: 

- When the option is enabled, it means "Asynchronous". You can use the command “zfs get all” to view pool information, and the state of sync is disable.

- When the option is disabled, it means "Synchronous". You can use the command “zfs get all” to view pool information, and the state of sync is standard.

**Backend storage block size**: You can select **512B** and **128KB**. The block size is exponentially larger. You can use the command "zfs get all" to view the pool information, and the volblocksize is the selected size.

**Verify data integrity**: You can use the command "zfs get all" to view pool information. "On" means enabled, while "Off" means disabled.

**File system format**: You can select formats such as xfs, ext4, ext3, ext2, and you can use the command "mount" on the agent to view the mounted format.

**Formatting options**: After setting parameters with different formatting commands for different file systems, you can view the parameters with the corresponding commands in the background 

> For example: 
>
> - After setting the block size, you can use the 'tune2fs -l /dev/sda1|(enter the pipe symbol) grep "Block size" to view it in the background.)

**Mount options**: You can use the command "mount" on agent to view. The default state is rw, noatime, nouuid, inode64, and noquota.

**Discard unused blocks on source filesystem after synthetic backup**: To recycle the unused blocks on the backend storage and source filesystem, you need to execute fstrim manually on the agent to free up space.

3. You can customize the name of the pool and assign permissions to user groups, and only users under the specified user group have permissions to use the pool.

#####  Add LAN-Free Pool

1. Click ![pool-2](../image/admin/06-storage/pool-2.png) , select **LAN-Free Pool** as the type, select the storage server with the storaged module installed. The server needs to install the storaged-lanfree module at the same time.

    ![pool-lanfree](../image/admin/06-storage/pool-lanfree.png)

2. Set the retention policy and the advanced options

    ![pool-lanfree-1](../image/admin/06-storage/pool-lanfree-1.png)

**Protocol type**: Support iSCSI and FC protocol. 

**Target**: Set the name of the created iSCSI and FC Target, with one Target for one storage pool. You should note the FC type, and select the online WWPN as the target. 

**Compression**: You can select to use compression to store data.

**Capacity**: Set the capacity for the storage pool. The capacity of storage pool should include the size of LUN and the capacity of snapshot. It is recommended that the size of the pool created should be at least twice the total size of the database, or larger if the amount of data changes and the snapshot retention is large.

**Dynamic allocation of space**: When creating a storage pool, you can set whether to immediately take up space on the storage server.

- **Advanced options**

![pool-database-2](../image/admin/06-storage/pool-database-2.png)

**Asynchronous I/O for backend storage**: 

- When the option is enabled, it means "Asynchronous". You can use the command “zfs get all” to view pool information, and the state of sync is disable.

- When the option is disabled, it means "Synchronous". You can use the command “zfs get all” to view pool information, and the state of sync is standard.

**Backend storage block size**: You can select **512B** and **128KB**. The block size is exponentially larger. You can use the command "zfs get all" to view the pool information, and the volblocksize is the selected size.

**Verify data integrity**: You can use the command "zfs get all" to view pool information. "On" means enabled, while "Off" means disabled.

**File system format:** You can choose formats such as xfs, ext4, ext3, ext2, and you can use the command "mount" on the agent to view the mounted format.

**Formatting options**: After setting parameters with different formatting commands for different file systems, you can view the parameters with the corresponding commands in the background. 

> For example: 
>
> - After setting the block size, you can use the 'tune2fs -l /dev/sda1|(enter the pipe symbol) grep "Block size" to view it in the background.)

**Mount options**: You can use the command "mount" on agent to view. The default state is rw, noatime, nouuid, inode64, and noquota.

**Discard unused blocks on source filesystem after synthetic backup**: To recycle the unused blocks on the backend storage and source filesystem, you need to execute fstrim manually on the agent to free up space.

> Note: 
>
> - There is no delayed deletion policy of backup sets for LAN-Free pools, and expired backups are deleted immediately when the backup sets retention policy is met.

3. You can customize the name of the pool and assign permissions to user groups, and only users under the specified user group have permissions to use the pool.

4. After you create a LAN-Free pool, you need to add storage. Each LUN added can only be used by one host.


![pool-lanfree-3](../image/admin/06-storage/pool-lanfree-3.png)

**Allocate storage space**: Set the size of storage space allocated to LUN.

##### Add Tape Library Pool

Tapes are used as a physical storage to hold archived user data. Before creating a tape pool, you need to scan the tape first.

###### Scan the Tape

1. Enter **Storage** - **Tape Library** page and click **Add**.

   ![tape-con-1](../image/admin/06-storage/tape-con-1.png)

2. In the pop-up window, enter the **Name** of the tape controller, enter the **Address** and **Port** of the server where the adps-controller module is installed and the tape library is connected. Fill in the **Remark** and click **Submit**.

    ![tape-con-2](../image/admin/06-storage/tape-con-2.png)

3. After submitted, information about the the tape library attached to the controller is listed.

4. Click **Initialize**, and the tape library will be initially scanned. The initial scan lasts for a period of time, depending on the tape loading speed of the tape library drive.

   ![tape-con-3](../image/admin/06-storage/tape-con-3.png)

###### Add Tape Library Pool

1. Enter **Storage** - **Storage Pool** page and click ![pool-2](../image/admin/06-storage/pool-2.png) , select **Type Library Pool** as the type, select the storage server where the storaged module is installed and the tape library is connected.

    ![pool-tape-1](../image/admin/06-storage/pool-tape-1.png)

2. Set **Backup Sets Retention Policy**, and the tape pool only supports **Time Policy**.

3. Based on the scanned tape library information, select **Target - LUN**, and set the **Space** of the allocated tape by dragging the slider control.

    ![pool-tape-2](../image/admin/06-storage/pool-tape-2.png)

- **Advanced options**:

![pool-tape-3](../image/admin/06-storage/pool-tape-3.png)

**Data storage encryption**: Data storage supports AES and Blowfish encryption. After enabling this option, select **Encryption algorithm** and **Key length**.

**Specify UUID**: You can specify the UUID of the created pool. It's used to rebuild storage pools in case there are mistaken deletions, please use with caution!

**Block size**: Set the block size used by the tape during the read and write. The default block size is **256 KiB**.

5. You can customize the name of the pool and assign permissions to user groups, and only users under the specified user group have permissions to use the pool.

6. After adding the tape library pool, you can re-allocate the tape storage space. In **Storage->Storage Pool** page, you can expand the storage pool information by clicking the **"+"** button on the left size of the tape library pool, and click the **Allocate Tapes** icon on the expand panel to access the pop-up Allocate Tapes window where you can re-configure options to re-allocate tapes. 

**Target-LUN**: Modify the Target-LUN of tape library pool.

**Dynamically Allocated**: Modify whether the tape of the tape library pool is dynamically allocated.

**Space**: Add or reduce the tape space by dragging the slider control, excluding tapes that have been used or backup sets that have not been recycled.

##### Add Object Storage Service Pool

1. Click ![pool-2](../image/admin/06-storage/pool-2.png) and select the **Object Storage Service Pool** as the type.

2. Select the **Vendor** of the cloud service and configure relevant options. Currently Amazon Web Service (AWS), Microsoft Azure, Backblaze B2 and other S3-compliant cloud vendors are supported. 

   ![pool-cloud-2](../image/admin/06-storage/pool-cloud-2.png)

**Endpoint**: Select or enter the cloud server endpoint address.

**Region**: Select or enter the region where the data center is located (It's automatically filled in by default based on the Endpoint).

**SSL**: Select whether to use SSL. If the cloud service vendor supports using SSL, you can select this option on demand.

**Access key**: Enter the access key. 

**Secret key**: Enter the secret key. 

**Bucket**: Select or enter a bucket name. If users of the Access Key and Secret Key do not have bucket permission, the bucket cannot be loaded when the object storage service pool is added, and in this case users can manually enter a bucket name.

3. Set the retention policy for the storage pool and set advanced options

>  Note: 
>
>  - There is no delayed deletion policy of backup sets for object storage service pools, and expired backups are deleted immediately when the backup sets retention policy is met.

4. You can customize the name of the pool and assign permissions to user groups, and only users under the specified user group have permissions to use the pool.

#### Modify Storage Pool and Storage

The configuration of storage pool includes two part: the pool configuration and the storage configuration. You can modify the relevant configuration by clicking the **Modify** icon on different places. 

1.  Modify storage pools

The Modify icon on the right side of the specific storage pool allows you to modify the storage pool in the pop-up Edit window.

![pool-tape-5](../image/admin/06-storage/pool-tape-5.png)

**Name**: Modify the name of the storage pool.

**Backup sets retention quota**: Modify the retention quota for the backup sets of the storage pool. It will take effect only when the next backup is executed.

**Backup sets retention days**: Modify the retention days for the backup sets of the storage pool. It will take effect only when the next backup is executed.

**Delay delete backup sets**: 

- When it's enabled, the backup sets in the storage pool that are expired will not be deleted immediately and the backup sets can still be restored at this time. The earliest expired backup sets will be deleted first when the disk space usage exceeds 90%, so that the disk space usage is below 90%. For the multi-storage pools, when all allocated storage space is used up, only the earliest expired backup sets are deleted to free the storage space. 
- When it's disabled, the backup sets in the storage pool will be deleted as soon as it expires.

**Min full backups retention**: Modify the number of full backup sets of each resource will retain at least when the pool recycling strategy triggers.

2. Modify the storage

By clicking the **"+"** button on the left side of the specific storage pool, there is an expansion panel where you can see another **Modify** icon. Click the Modify icon to modify the storage. 

   ![pool-tape-6](../image/admin/06-storage/pool-tape-6.png)

**Address**: You need to modify this option when the IP address of the storage server changes. The backup sets of the storage pool are still available after you modify the address. When there is a pool replication relationship, you need to modify the IP address of the source pool first, and then modify the IP address of the target pool.

**SSL**: Modify to use SSL or not.

**Port**: Modify the port number of the device. The default port is 50306.

#### Delete the Storage Pool

You can delete the corresponding pool by clicking the **Delete** icon. 

- When a storage pool exists a pool replication relationship, deleting the pool will fail. 
- When the storage server is online, only delete the storage pool after the resource is recycled.
- When the storage server is offline, there is a red delete icon providing a forced deletion. The forced deletion may cause part of the authorized space unable to be recycled.
- If an abnormal service occurs during the deletion, the deletion can be continued after the service restarts.

### Storage Pool Replication

You can manually set storage pools to replicate pool by pool. When you set a pool replication, and run a backup job to the source storage pool, the backup sets are automatically backed up to the target storage pool; If the source pool fails and the related backup sets files are lost, you can restore the backup sets from the target pool.

#### Set Up Pool Replication

1. Click **Storage** -> **Storage Pool** and click the **Set Up Pool Replication** icon of the source storage pool.

![set](../image/admin/06-storage/replicate/set.png)

2. Set **Target Storage Pool** in the pop-up window.

 ![](../image/admin/06-storage/replicate/set-1.png)

**Reconnection time**: Set the reconnection time. Support 1~60 minutes.

**Speed limit**: You can limit the network transfer speed when replicating backup sets within a certain time period. The unit is MiB/s. You can customize different speed limits within different periods.

3. Click **Submit** and the setup of storage pool replication is successful.

   ![](../image/admin/06-storage/replicate/list-1.png)

#### Pool Replicate Job

Click **Storage** -> **Pool Replicate Job** and enter the Pool Replicate Job page to view all the storage pool replicating job records.

![](../image/admin/06-storage/replicate/copy-1.png)

**Restore from pool replication target**: Click ![](../image/admin/06-storage/replicate/copy-2.png) to restore the backup sets from the target storage pool to the source storage pool.

**Redo**: When the job replication fails, click ![](../image/admin/06-storage/replicate/copy-3.png) to manually retry the replication job.

#### Pool Replication List

You can view all pool replication information in **Pool Replication List**. 

1. Click the icon ![](../image/admin/06-storage/replicate/list.png) of **Pool Replication List** to enter the list page, view and operate the pool replication.

![](../image/admin/06-storage/replicate/list-2.png)

2. Click ![](../image/admin/06-storage/replicate/setting.png) to enter the Set Up page where you can set the **Restore Source**, **Reconnection Time** and **Speed Limit**. You can choose to restore from the source or target storage pool, both of which can achieve direct data restore from offsite pool. 

![](../image/admin/06-storage/replicate/modify-1.png)

**Delete**: Delete the pool replication relation. Backup sets cannot be restored from the target storage pool if the pool replication is deleted, please operate it with caution!

#### Repair Source Pool

You can repair index data between the source pool and the target pool when the source pool device fails.

1. Configure the same IP as the source storage pool on the new device, install the storaged module and re-register.
2. On **Storage** -> **Storage Pool** page, click the Pool Replication List icon to enter the Pool Replication List page, and click ![](../image/admin/06-storage/replicate/modify.png) to repair the index data between the source pool and the target pool.
2. Click the **Restore from Pool Replication Target** icon on the Pool Replicate Job page. The option allows you to retrieve the backup sets from the target storage pool to the source storage pool, and continue the backup and restore jobs.

> Note: 
>
> - If the source pool is an object storage service pool, repairing the source pool is not supported.

### Network

Click **Storage** -> **Network** to enter the Network page, and you can view all network information on this page. To distinguish the different IP usage in the case of multi-IP storage server, you can create multiple networks to specify the transfer channels between the storage server and the backup server, the backup and restore on agent, and the pool storage.

![](../image/admin/06-storage/net-1.png)

#### Add Data Network

You can specify the data transfer network for the agent and storage server during the backup and restore process. 

1. Click the "**+**" button in the upper left corner to access the Add window. Enter the **Name** of the network and check **Data Network** as **Purposes**. After you click **Submit**, the network is created successfully.

![](../image/admin/06-storage/net-2.png)

2. Click "**+**" button on the left side of the network to access the expansion panel. On the expansion panel, click the "**+**" button on the right side of the **Storage Servers** and **Hosts**. You can specify the IP of the storage server to be used for the backup and restore, and specify the host. 

![](../image/admin/06-storage/net-3.png)

3. After you click **Submit**, the storage server and agent bind the data network successfully. During the backup and restore, the network for transferring data is the IP of the storage server that you just have set.

![](../image/admin/06-storage/net-6.png)

####  Add Pool Replication Network

You can specify the transfer network during the storage pool replication. 

1. Click the "**+**" in the upper left corner to access the Add window. Enter the **Name** of the network and check **Storage Pool Replication Network** as **Purposes**. After you click **Submit**, the network is created successfully.

![](../image/admin/06-storage/net-7.png)

2. Click "**+**" button on the left side of the network to expand the list. On the expansion panel, by clicking "**+**" button right next to the **Storage Servers**, you can add a storage server where the source and target storage pools are located, and specify the transfer IP between the storage pools on the storage server.

![](../image/admin/06-storage/net-8.png)

#### Add Management Network

You can specify a network to control and manage the backup server and storage server, as well as to achieve network isolation between the management and the business.

1. Click the "**+**" button in the upper left corner to access the Add window, enter the **Name** of the network and check **Management Network** as **Purposes**. After you click **Submit**, the network is created successfully.

![](../image/admin/06-storage/net-9.png)

2. Click "**+**" button on the left side of the network to expand the list. On the expansion panel, by clicking "**+**" button right next to the **Storage Servers**, you can specify the IP and port between the backup server and the storage server.

![](../image/admin/06-storage/net-10.png)

> Note:
>
> - Only one Management Network is allowed. If there is already a Management Network, you can directly add a new storage server in the Edit window of the Management Network.
>
> - When the pools replicate, its network is based on the network of the target pool replication. When the backup sets are retrieved, its network is based on the network of the source pool replication. It is preferable that you use the same network label for the source pool node and the target pool node, and select the network label when setting up the pool replication.

### SCSI Target 

The SCSI Target provides iSCSI target and FC target to the agent on the storage server with the storaged-lanfree module installed.

Before you can use this feature, you need to add a storage server with the storaged-lanfree module installed to the storage pool.

1. Click **Storage** -> **SCSI Target** to enter the setup page of SCSI Target.

2. Select a storage server and by default **iSCSI** will be listed, or **FC** if the storage server has FC HBA cards installed.

    ![](../image/admin/06-storage/iscsi-02.png)

#### iSCSI target

##### Add

1. Click "**+**" button next to **iSCSI**, and modify the name of the iSCSI target in the pop-up window. Click "**√**" button to add an iSCSI target.

    ![](../image/admin/06-storage/iscsi-02.png)

2. After adding a target, you need to add one or more LUNs to the target. Click the "**+**" button next to the newly added target and drag the slider control in the pop-up window or enter a value to set the size of the LUN.

    ![](../image/admin/06-storage/iscsi-03.png)

3. Click "**√**" button to add a LUN. The newly added LUN will not allocate the corresponding space on the storage server immediately, but will allocate the space according to the actual usage.

    ![](../image/admin/06-storage/iscsi-04.png)

4. Click **Access Control List (ACL)** to bring up the Access Control List window of the LUN, you can add one or more initiators, and only the initiators in the list can access the LUN. When using the Lan-Free pool or database synthetic pool for backup jobs, you will be prompted to select a storage device and the initiator will be automatically added to the corresponding LUN after your selection.

    ![](../image/admin/06-storage/iscsi-05.png)

##### Delete

Deleting a target or LUN will erase all the data on the LUN. Please read the prompts displayed on the page carefully and make sure the target or LUN is not in use before deleting it.

#### FC target

To create FC target, you need to install FC HBA card on the storage server and set the operating mode of the HBA card to target mode. This version only supports Qlogic HBA card.

##### Add

By default, targets are automatically created according to the number of interfaces on the HBA card, and you only need to add LUNs under the corresponding targets.

1. Click "**+**" button next to the target, and drag the slider control in the pop-up window or enter a value to set the LUN size.

    ![](../image/admin/06-storage/fc-01.png)

2. Click "**√**" button to add a LUN or multiple LUNs in one target. The newly added LUNs will not allocate the corresponding space on the storage server immediately, but will allocate the space according to the actual usage.

    ![](../image/admin/06-storage/fc-02.png)

3. Click **Access Control List (ACL)** to bring up the Access Control List window of the LUN, you can add HBA card port WWPN, and only the agent with WWPN added in the list can access the LUN. When using the Lan-Free pool or database synthetic pool for backup jobs, you will be prompted to select a storage device and the port WWPN of HBA card will be automatically added to the corresponding LUN after your selection.

    ![](../image/admin/06-storage/fc-03.png)

##### Delete

Deleting a LUN will erase all the data on the LUN. Please read the prompts displayed on the page carefully and make sure the LUN is not in use before deleting it. Click the Delete icon next to LUN to delete the LUN.

### Tape Library

1. Click **Storage** -> **Tape Library** to enter the Tape Library page. You can add tape controllers on this page.

    ![](../image/admin/06-storage/tape-01.png)

2. Click the "**+**" button to add the tape controller. In the pop-up window, enter the **Name** of the tape controller, the **Address** and **Port** of the server where the tape library controller module is installed, fill in the **Remark**, and click **Submit**.

    ![](../image/admin/06-storage/tape-02.png)

3. After **Submit**, it will list the tape library information attached to the controller.

    ![](../image/admin/06-storage/tape-10.png)

4. Click the **Initialize** icon to perform an initial scan of the tape library. The scan will last for a period of time, which is affected by the tape loading speed of the tape library drive.

    ![](../image/admin/06-storage/tape-03.png)

5. Click the **Controller** button at the top of the page to enter the Controller page.

    ![](../image/admin/06-storage/tape-21.png)

6. Click the **Rescan** icon under the Action bar to rescan the tape library and update the tape library information.

    ![](../image/admin/06-storage/tape-22.png)

7. Click the **Drives** icon under the Action bar to enter the Drives page.

    ![](../image/admin/06-storage/tape-23.png)

8. Click the **Media Management** icon under the Action bar to enter the Tape Library Media page.

    ![](../image/admin/06-storage/tape-24.png)

9. Click the **Task Management** icon under the Action bar to enter the Tape Library Task page.

    ![](../image/admin/06-storage/tape-25.png)

10. Click the **Set Up** icon to access the pop-up window where you can manually configure the capacity of the tape.

    ![](../image/admin/06-storage/tape-26.png)
    
    > Note:
    >
    > -  When the system cannot get the tape capacity correctly, it's necessary to set up the tape capacity to perform the capacity statistics.

#### Tape Library Controller

1. Click **Controller** at the top left of the page to enter the **Tape Library Controller** page. Click the **"+"** button on the left side of the controller to list the names of the tape libraries connected to the controller.

    ![](../image/admin/06-storage/tape-05.png)

2. Click the **"+"** button at the top left of the page to access the Add Tape Controller window. You can enter the **Name** of the controller, the **Address** and **Port** of the server where the tape library controller module is installed, fill in the **Remark**, and click **Submit**.

    ![](../image/admin/06-storage/tape-11.png)

3. After you submit the adding of the tape controller, the page will list the tape library records connected the tape controller. You need to back to the **Tape Library** page and initialize the tape controller.

4. Click the **Rescan** icon to update the tape library records connected to the controller.

    ![](../image/admin/06-storage/tape-12.png)

5. Click the **Modify** icon under the Action bar to access the Modify Tape Controller window.

6. Click the **Delete** icon under the Action bar to delete the controller.

   > Note: 
   >
   > - When you delete the controller, the corresponding connected tape library records will be deleted also. Please operate with caution.

#### Controller Drives

1. Click the **Drives** icon under the Action bar to enter the Drives page where you can view the state of the tape library drives and information about the media loaded on the drives.

    ![](../image/admin/06-storage/tape-07.png)

2. When a faulty drive is detected, the drive **State** on the Tape Library Controller page is displayed in red. You cannot select the faulty drive.

    ![](../image/admin/06-storage/tape-13.png)

2. You can enter the Drives page to execute operations for the faulty drive.

    ![](../image/admin/06-storage/tape-14.png)

3. To repair the faulty drive, click **Remove Tapes** to unload the tape media first, and then click **Repair**, select the tape media, and click **Test** to execute operations like loading the drive or uninstalling the tape.

    ![](../image/admin/06-storage/tape-15.png)

4. After the test is passed, the state of the drive is shown in green, indicating a "normal" state, and you can use it normally.

    ![](../image/admin/06-storage/tape-07.png)

#### Tape Library Media

1. Click the **Media Management** icon under the Action bar to enter the Tape Library Media page where you can view information about tape media. When the state of the tape library is **Current**, **Full**, or **Expired**, a red **Forced Recycling**  icon is displayed in the **Actions** column of the page.

   ![](../image/admin/06-storage/tape-17.png)

   > Note:
   >
   > - The Forced Recycling will delete the associated backup sets in the tape library pool to free up the licensed space and the space used by the tape library.
   > - If a backup set occupies two tapes, when force recycle one tape and the corresponding backup set in that tape will be deleted, the backup set on the other tape will not be deleted.

2. Click the **Discover New Tape** icon to synchronize the latest slot state of the tape library and new tapes will be added to the tape list automatically. If the capacity of the old and new tapes are different, you can set the tape capacity manually.

3. Select the tape media, and click the **Tape Out** icon to export the selected tape media. 

   ![](../image/admin/06-storage/tape-18.png)

4. When the Tape Out task is executed, it will redirect to the Task Management page. The system automatically moves the tape media to the gateway of the tape library, and the task is completed when the tape is removed.

   ![](../image/admin/06-storage/tape-09.png)

5. When the tape with state of "Blank" or "Clean" successfully out, the Tape Library Media list will delete the corresponding records; when the tape with the state of "Current" successfully out, its state will be changed to the "Offline" state.

   ![](../image/admin/06-storage/tape-17.png)

6. When the relevant backup sets are set to **Offline** state after the tape out of the library, you can retrieve the offline backup sets. 

   ![](../image/admin/06-storage/tape-19.png)

7. Click **Retrieve** to view the tapes and retrieve the backup sets. The **Retrieve** task will add the tapes to the library to complete the retrieval.

   ![](../image/admin/06-storage/tape-20.png)

   > Note:
   >
   > - The Retrieve task detects the in-library tapes and automatically moves the tapes to the slot if the required tapes are in the tape library gateway.
   > - Tapes will be checked for expiration when they are in library, and tapes in retrieved state cannot write data.

#### Tape Library Task

1. Click the **Task Management** icon under the Action bar to enter the Tape Library Task page.

    ![](../image/admin/06-storage/tape-09.png)

2. Click the **Modify** icon to withdraw the tape media. The withdrawal task will refresh the tape list, and return the tape to the slot.

3. Click the task name to enter the Tape Library Task Detail page where you can **Print** the page.

    ![](../image/admin/06-storage/tape-16.png)

### RAID Card (Data Protection Appliance)

Click **Storage** -> **RAID Card** to enter the RAID Card page where you can view the RAID card state of storage servers. The state of Adaptec and MegaRAID are also supported.

1. Click **Adapter**, and you can view the basic information about the RAID card.

    ![](../image/admin/06-storage/raid-01.png)

2. Click **Virtual Drives**, and you can view the basic information about the logical drives. Click the "**+**" icon on the left side of the drive, more detailed information will be displayed.

    ![](../image/admin/06-storage/raid-02.png)

3. Click **Physical Drives**, and you can view the state and details of the drives on the servers.

    ![](../image/admin/06-storage/raid-03.png)

4. Click **Connector** (for Adaptec) or **Battery** (for MegaRAID), and you can view information about the connector or the battery.

    ![](../image/admin/06-storage/raid-04.png)

### Software RAID (Data Protection Appliance)

1. Mount disks on the device where the RAID needs to be created (Usually the device where the storaged module is installed).

2. Log in as System Admin/the admin, click **Storage Pool** -> **RAID Card** to enter the Software RAID page.

   > Note: 
   >
   > - You need to create a storage pool before entering the Software RAID page, otherwise the page will show "Unable to get the storage pool!".

    ![](../image/admin/06-storage/raid-05.png)

3. Click **Initialize Software RAID**. In the pop-up window, select the **RAID Devices**, **RAID Type**, and **Spare Devices** for storage (RAID 1, RAID 5, and RAID 6 support the spare devices for storage).

   ![](../image/admin/06-storage/raid-06.png)

4. Click **Submit**, wait a few moments for the initialization to complete and then the software RAID enters the data synchronization state.

    ![](../image/admin/06-storage/raid-07.png)

5. After the software RAID data synchronization is completed, it enters the active state, and the software RAID is successfully created and mounted to the /infokist directory.

    ![](../image/admin/06-storage/raid-08.png)

> Note: 
>
> - Make sure the host has the mdadm tool properly installed before creating the software RAID, otherwise the creation will fail.

## Resource Management

The **Resource** of the Menu includes **Resource** and **Cluster**. After the installation of the agent is complete, you need to register the agent, activate the license, and authorize users before users of the "Operator" role execute the backup and restore. Contents include:

- Register hosts/activate licenses/authorize licenses
- Batch register/batch activate/batch authorize
- Cluster binding

#### Register Hosts/Activate Licenses/Authorize Licenses

1. On **Resource** page, click the **Register Host** ![](../image/admin/03-guide/agent-2.png) icon.

![](../image/admin/07-resource/resoure-1.png) 

2. Click **Submit** to activate all the resources that meet the requirements.

![](../image/admin/03-guide/agent-3.png)

3. Click **Authorize**. Only the users under the specified user group have permissions to operate the resources of this agent.

 ![](../image/admin/03-guide/agent-4.png)

#### Batch Register/Batch Activate/Batch Authorize

1. If there are multiple agents to register, click the **Batch Register** icon ![resoure-3](../image/admin/07-resource/resoure-3.png) in the upper left corner. Check the agent that needs to be registered in the pop-up Batch Register window.

 ![](../image/admin/07-resource/resoure-2.png)

2. Click the icon ![](../image/admin/07-resource/resoure-5.png) on the upper left corner, and check the resources that need to be activated in the pop-up **Batch Activation** window.

 ![](../image/admin/07-resource/resoure-4.png)

> Note:
>
> - If the resource module is installed, but there is no corresponding license, the "Activate" link will not be displayed next to the resource module.
>
> - You can set the same user group when activating resources. If you need to assign the resources to different user groups, see *Assign User Group* in this guide for details.
>
> - The "Unregister" icon is displayed to the right of the registered resource. If there is a change in the resource's user name or password that the program cannot detect in time, the resource cannot be used properly. In this case, you can click the "Unregister" icon to log out and log back in with a new username and password.

#### Cluster Binding

Click **Resource->Cluster** to enter the cluster management page where you can bind and manage the cluster environment on agents. 

![](../image/admin/07-resource/resoure-6.png)

- The currently supported cluster binding environments include:
  
```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Cluster Binding
  | Resource   | Cluster Type                                      |
  | ---------- | ------------------------------------------------- |
  | Oracle     | Active-Passive, RAC                               |
  | SQL Server | Active-Passive, Always On Availability Groups     |
  | MySQL      | Master-Slave Replication, Dual-Master Replication |
  | SAP HANA   | Active-Passive                                    |
  | PostgreSQL | Master-Slave Replication                          |
```
- Please refer to the relevant users' guide for the specific binding operation of each resource cluster.

- Delete binding: Click the icon ![](../image/admin/07-resource/resoure-8.png) on the right of the cluster page to delete the binding cluster.

- Modify binding: Click the icon ![](../image/admin/07-resource/resoure-7.png) on the right of the cluster page to modify the cluster name, nodes, etc.

## System Management

Click **Settings** of the Menu to enter the ADPS server settings page where you can set the following items:

- System Configuration

- Webhooks 

- Approval

### System Configuration

Click **Settings** to enter the page where you can configure the convention, server, index, security, SMTP, and storage etc.

#### Convention

Set **Localization** including **Default language** and **Relative time**. 

![](../image/admin/08-setting/set-1.png)

**Localization**:

- **Default language**: Set the default language for the new user.

- **Relative time**: Set the time format of jobs, alerts, history, reports, etc.

**Agent installation config**: You can set the download address of the installation package on the agent based on the default address format.

- Default address: If you use the default address, you need to upload the agent package on **Upgrade**->**Upload Packages** page.
- Other address: If you use other address, you need to configure the address that can be accessed, and save the agent package on the server.

**Backup server connection config**: You can set the backup server address.

- **SSL**: Set whether the agent using the SSL connection.
- **Port**: Set the agent to connect to the backup server. The default is 50305. When the SSL is enabled, the default is 60305.

#### Server

![](../image/admin/08-setting/set-2.png)

**Date & Time**: Click the time, and you can modify the server time in the pop-up window.

**Reboot**: Click the button to restart the server remotely.

**Shutdown**: Click the button to shut down the server remotely.

**Network interface**: All the network interfaces bound by all servers are listed. You can set the connection **Method** of the network interface, **IP address**, **Netmask**, **Default gateway**, **Preferred DNS** and **Alternate DNS** as needed. The modification takes effect immediately after you click **Modify**. Click **Reset** to restore the default value. 

#### Index

The backup server can be self-protected by the backup index. With storage pool replication, backup index can be used for scenarios like backup server local/offsite disaster recovery, migration, and etc. When you or other users have misoperations, or the backup server has abnormalities or re-installation, you can use disaster recovery to reduce the loss. 

For example, set the index backup to be executed at 16:00 every day.

![](../image/admin/08-setting/set-4.png)

> Note:
>
> - For specific backup & restore application scenarios, see *Backup Index* for details

#### Security

![](../image/admin/08-setting/set-5.png)

**Safe options**:

- **No action prompt timeout**: Log out after timeout. The page shows “Your session has expired, please sign in again!”
- **Maximum login attempts**: You can set a limit on the number of unsuccessful login attempts that a user can make. Once the limit is exceeded, the IP address of the browser the user using will be blocked or the user will be locked out. The user must contact you to release the IP address from the blocklist. 
- **Login failed exceeded limit**: If the maximum number of unsuccessful login is exceeded, you can set to block the IP address of the browser the user using, or lock the user. 
- **Add to the IP address blocklist**
    - External users need to contact you (System Admin/the admin) to remove the blocked IP.
  - System users such as you (System Admin/the admin), Audit Admin, etc. need to contact the External Admin to remove the blocked IP. See *Appendix* for reference.
- **Lock user**
    - External users are automatically unlocked after ten minutes by default, otherwise they need to contact you (System Admin/the admin) to unlock manually.
    - System users such as you (System Admin/the admin), Audit Admin, etc. will be unlocked automatically after ten minutes by default. You can customized the lock time. See *Appendix* for reference.
- **Enable security user**: You can transfer the user management permissions of the External Admin (including user modification and user group assignment) to the System Security.
- **Restrict user to single role**: Enabling the option will not allow to create multi-role users. When you or other users add or modify a new user, you or they can only select one of the roles for the new user.
- **Enable multilevel tenant**: You can set up a parent tenant when you create tenants, and tenants can also create users of the tenant role.
- **Enable operating child tenant's resource**: You can allocate child tenants' resource permissions to control their resources.
- **Encrypt job definition**: The contents of Job Template files under the server are encrypted.
- **Show upgrade management page**: If you disable the Upgrade Management, the page will hide the upgrade management function and the login page will hide the download function.
- **Access key login instance**: When it's enabled, the Access Key authentication will be added to the instance login page, so that you can choose to log in with the Access Key of your current account if you forget your OS password.
- **2FA by email**: When it's enabled, you need to enter the additional verification code that you receive via email to log in to Resource Instance and Restore CD. Only the Restore CD that you use the username and password method to log in supports two authentication attempts. 

**Password policy**: You can set policies for password including the length, the characters required to contain, encryption before the transfer, and etc.

**Access control list**: You can set IP address/CIDR allowlist, and MAC address allowlist.

- **IP address/CIDR allowlist**: When the IP address to access the host is not in the allowlist, the login will report an error. The allowlist is empty and has no restrictive address by default.

- **MAC address allowlist**: When the MAC address to access the host is not in the allowlist, the login will report an error. The allowlist is empty and has no restrictive address by default.

> Note:
>
> - Only support the LAN environment. You need to access the backupd within the same network.
> - Support access via IPv4 only. For example, If MAC control is enabled, you cannot use IPv6 to log in.
>
> - The MAC address allowlist only supports the format 00:00:00:00:00:00:00, separated by a colon.

#### SMTP 

You can set the SMTP sender's information. It can send  automatically the system-generated alerts to the user's personal email. The Email contents include job execution state, insufficient storage space, network disconnection, etc.

1. Click the **Not Set** label to access the SMTP settings window.
2. Enter the sender's **Email**, **Password**, and the SMTP **Server** address, **Port**, and select whether to use **Secure** connection.

![](../image/admin/08-setting/set-6.png)

3. Click **Submit** and the settings take effect. Click **Send a test message** to check whether the user's personal mailboxes receive emails normally.
3. For the **Advanced Options**, the default username is the same as the Email address. When you need to log in to a domain-controlled environment, you can set a separate username in the format of "grand\xxx".

#### LDAP Authentication

ADPS supports LDAP integration service, and you can log in or allow users to log in to the system and operate directly with the LDAP user/password.

1. **Enable** LDAP Authentication.
2. Enter the host, port, user, password, Base DN of the LDAP server, and click **Connect**.

![](../image/admin/08-setting/set-8.png)

3. After successfully connecting to the LDAP server, you can add **Username** and **Mailbox** under the **Attributes** for the synchronized users. Other attributes are optional.


> Note: 
>
> - You cannot check users that are unable to sync LDAP Authentication. When the synchronization with LDAP fails, the page can display the failure reason. Mouse over to see the reason.
> - When the LDAP authentication is enabled, the backup server allows the login with the LADP user and password, and when it's disabled, the LADP user and password can not be used to log in to the backup server.

#### Storage

You can set the min full backups retention when creating storage pools, and set the used space alarm threshold for all storage servers.

**Min full backups retention**: Backup set recycling may occur only if the number of full backup sets in the storage pool exceeds the set value. You can set 0 as the minimum default value.

> Note: 
>
> - When you set the Min Full Backups Retention is 0, the backup sets may be fully recycled and cannot be restored! Please operate with caution.

**Used space alarm threshold**: The alert Email will be sent when the physical space occupancy ratio of the storage server exceeds the set value. No alert Email is sent when it is 0.

![](../image/admin/08-setting/set-7.png)

#### WebHooks

Log in ADPS as System Admin/the admin, click **Settings** -> **WebHooks** to enter the Webhooks page.

![](../image/admin/08-setting/webhook-03.png)

##### Add

Click the **Add** icon to enter the Add Webhooks page. On Add Webhooks page, enter the **URL** to receive the Webhooks information, enter the **Secret Token** information, check the corresponding event, and click the **Add Webhook** button at the bottom of the page to add the Webhook.

##### More Description 

On top of the URL input box on the Add Webhook page, you can click **More Description** to view more details.

#### Approval

Only you (System Admin/the admin) can see the approval page. 

![](../image/admin/08-setting/approval-01.png)

**Approval**: Approval types available are as follows:

- **Add storage pool**: The addition of a storage pool by an operator needs to be approved by the specified approver before it can be executed.

- **Modify storage pool**: The modification of a storage pool by an operator needs to be approved by the specified approver before it can be executed.

- **Add job**: The addition of a job by an operator needs to be approved by the specified approver before it can be executed. 

  > For example:
  >
  > - If a backup job requires the approval, when an operator adds a backup job, it needs to be approved by the specified approver before execution.

**Approvers**: You can give specified users permissions to grant approval.

**Actions**: You can enable or disable the approvals. When the approval is Add Job, you need to select or multi select **Approval Required Jobs**. After the selecting, click **Submit**.

![](../image/admin/08-setting/approval-02.png)

## License

Click **License** to enter the page where you can view the acquired License information, including: license space, maintenance deadline, advanced features, and module etc.

![](../image/admin/10-license/license-1.png)

**Import**: Import the license file issued by the vendors..

**Request**: If you need to add license again, you can follow *Apply for a License* in this guide to generate the license file and send it to vendors.

> Note:
>
> - When a trial license or resource has expired, click Request->Trial, you will see Trial License Renewal option. When it's checked, a "Resource" list will be displayed on the module page to automatically list resources available for trial renewal.

## Backup Index

With the backup index, information about users, user groups, storage pools, backup sets, etc. can be retained. It is generally used in combination with storage pool replication for backup server local/offsite disaster recovery, backup server migration and other scenarios.

### Disaster Recovery

Backup Index supports local and off-site disaster recovery, requiring that the recovery target device and the storage server that stores the index backup sets can communicate with each other.

#### Off-site Disaster Recovery

Deploy one server each locally and offsite, the network is made isolated and the servers can communicate with each other. Both servers are installed with backup server and storage server to recover the backup sets of local agent's resources in offsite.

1. Add two storage pools belonged to local and offsite storage servers respectively, and set the storage pool replication that replicates from local to offsite.

   ![](../image/admin/08-setting/set-10.png)

2. Set the **Backup Schedule** for the index to periodically back up to the local storage pool.

   ![](../image/admin/08-setting/set-11.png)

3. Create backup jobs of resources to a local storage pool.

4. Index Disaster Recovery

   - Log in to the offsite backup server as System Admin/the admin, go to the **Settings**->**Settings** page and click **Index**->**Disaster Recovery**.

   - If backup sets of the index are stored in a standard storage pool, de-duplication storage pool, or tape library pool, you can enter the IP address of the offsite storage server (i.e., the storage server where the target storage pool is located) and select **Restore by Scanning** as the **Restore Source**. When restoring, select the **Point-in-Time** that needs to recover, which is related to the range of backup sets that the resource is allowed to restore. The resource can only restore the backup sets that have been replicated to the target storage pool prior to this point in time.

     ![](../image/admin/08-setting/set-12.png)

   - If backup sets are stored in the object storage service pool, you can restore it by selecting **Restore by Entering the URL Directly** as the **Restore Source**. When restoring, you need to fill in the s3 object storage path where the catalog backup sets are located, and enter the **Access Key** and **Secret Key**.

     ![](../image/admin/08-setting/set-13.png)
   
   > Note: 
   >
   > - After the recovery is completed, you need to restart the backup server manually.
   
5. Apply for a license: The Disaster Recovery of Index only keeps licenses for activated resources and does not restore all applied licenses. After registering the agent on the offsite backup server, you need to apply licenses for the resources on the offsite agent.

6. Deploy an offsite agent and associate it to an offsite backup server.

7. Set both the local agent and offsite agent to a same user group.

8. Create restore jobs: Log in to the backup server as the operator, go to the **Restore** page, select the local agent and resources, select the backup sets, select the resources on the offsite agent for the restore target, and create the restore job.


> Note: 
>
> - There are two portals for index recovery on the different host. Index recovery on authorized systems is available on the setup page. Index recovery on unauthorized system is available on the product activation page.

#### Local Disaster Recovery

In case there is a backup server disaster, you can deploy a new backup server to restore the system to normal state by restoring the index.

1. Deploy a new backup server, set the IP as the IP of the backup server that occurs disaster, and ensure that the new backup server can communicate properly with the target storage pool of the pool replication.

   - The IP of the new backup server is different from that of the old backup server. Before repairing the source pool, you need to enter the **Storage** -> **Storage Pool** page, select the storage pool record of the old storage server (old backup server), modify the address of the new storage pool device and then repair the storage pool. 

   - After repairing the source pool, all agents need to be reconfigured to the new backup server before the backup and restore system can resume normal operation. 

   - It is recommended that you set the IP be consistent with the old backup server IP to reduce the loss caused by misoperation.

2. Index Disaster Recovery

   - Log in to the local backup server as System Admin/the admin, go to the **Settings**->**Settings** page and click **Index**->**Disaster Recovery**.

   - If the backup sets of the index are stored in a standard storage pool, de-duplication storage pool, or tape library pool, you can enter the IP address of the offsite storage server (i.e., the storage server where the target storage pool is located) and select **Restore by Scanning** as the **Restore Source**. When restoring, select the latest **Point-in-Time** to minimize the impact caused by data loss.

     ![](../image/admin/08-setting/set-14.png)

   - If the backup sets are stored in the object storage service pool, you can restore it by selecting **Restore by Entering the URL Directly** as the **Restore Source**. When restoring, you need to fill in the s3 object storage path where the catalog backup sets are located and enter the **Access Key** and **Secret Key**.

     ![](../image/admin/08-setting/set-15.png)

   > Note: 
   >
   > - After the recovery is completed, you need to restart the backup server manually.

3. Repair Source Pool

   Log in to the backup server as System Admin/the admin, enter the **Storage** -> **Storage Pool** page, click the **Pool Replication List** icon, select the storage pool record of the old storage server (old backup server), click the **Repair Source Pool** icon to repair the source pool. It is recommended to perform a full backup of all resources after repairing the source pool to ensure the continuity of the backup sets in the future.

   ![](../image/admin/08-setting/set-16.png)

   > Note:
   >
   > - Repairing the source pool only restores the database records from the source storage pool and does not restore the backup sets. To create a restore job, you should restore the relevant backup sets by pool replicating them first before restoring them.
   > - Instead of repairing the source pool, you can also set to restore the backup sets directly from the target storage pool.

4. Apply for a license

   - The index's disaster recovery to different host only retains licenses for activated resources and does not restore all requested licenses. If you need to license a new agent or a new resource, you need to reapply for a license. 

5. After completing the above operations, the backup-and-restore system will resume normal state.

### Backup

After you configure the Backup Schedule, click the **Backup** button on the Index page, and the top right corner will show **Submission Succeeded**, indicating that an index backup is performed immediately to the storage pool configured in the backup schedule. While the backup is in progress, the Backup button will show the loading state.

![](../image/admin/08-setting/set-17.png)

### Restore

You can restore the index backup of the current backup server.

1. After you configure the schedule, the Index page will show the Restore button. 

2. Click the **Restore** button, you can see the index backup records of the current backup server.

   ![](../image/admin/08-setting/set-18.png)

3. Select a record and click **Submit** to restore.

### Backup Schedule

1. Set the Backup Schedule on Index page.

![](../image/admin/08-setting/set-19.png)

2. Select the **Storage Pool**. Backup index supports backing up to standard storage pool, de-duplication storage pool, tape library pool, and object storage service pool. If the selected storage pool is configured with the storage pool replication, the backup sets of the index will also be replicated to the target storage pool. 

3. Set the **Retention Days**. The retention policy for the index backup sets. Both the Retention Days of the index backup sets and the Retention Policy of the storage pool are in effect for the index backup sets, and the backup sets will expire when one of the set retention days or the retention policy of the storage pool is reached.

4. Set the **Start Time**. The time when the backup schedule starts to execute.

> Note:
>
> - The Start Time is the start time of the Backup Schedule. When you set the Start Time earlier than the current time, the backup schedule will start at the next day's scheduled start time.
> - The Start Time is not equal to the backup server time on the interface page, the backup server time on the interface page is only the time of the browser device, and the Start Time is based on the real time of the backup server.

5. Set the **Execution Interval** to perform a backup at a scheduled execution interval.

6. Click **Modify** to submit the Backup Schedule.

### Restore Schedule

Restore Schedule, the periodic restore of the backup index, is used to recover the backup index with recovery testing, and verify the availability and integrity of the index backup sets.

1. Click **Restore Schedule** on Index page.

   ![](../image/admin/08-setting/set-20.png)

2. Enter the storage pool address of the backup server where the index backup is made, in the format such as 192.168.83.232. You can enter the storage pool address of the current backup server, as well as the storage pool address of other backup server. 

3. Enter the Start Time, which is the time when the restore schedule starts to execute.

   > Note:
   >
   > - The Start Time is the start time of the Restore Schedule. When you set the Start Time earlier than the current time, the restore schedule will start at the next day's scheduled start time.
   > - The Start Time is not equal to the backup server time of the Web page, the backup server time of the Web page is only the time of the browser device, the Start Time is based on the real time of the backup server.
   
4. Enter **Execution Interval** to execute a restore at every set interval based on the Start Time.

5. Click **Modify** to submit the Restore Schedule.

## Operation and Maintenance Management

### Job

Click **Job** to enter the page where you can view backup and restore jobs for all resources of all agents. You can also filter the columns to display.

![](../image/admin/11-O&M/O&M-01.png)

**Filter**: You can filter different columns to specify the shown information.

**Job**: View backup jobs, restore jobs, or all jobs. You can sort jobs in ascending or descending order according to the name of the job.

**State**: You can view the state of all jobs or an individual job.

**Host**: View jobs for all hosts or for a single host.

**Resource**: View jobs for individual or all resources.

### History

Click **History** to enter the page. This page allows you to view the records of the index backup and restore jobs. If the Multi-tenant is enabled, the job records of all users are displayed by default. You can filter to display all records, or the job records of a specified user.

![](../image/admin/11-O&M/O&M-02.png)

**Edit**: By clicking the **Edit** icon, you can select the job records to delete. You can batch delete the selected record or all records. When delete all records, you need to enter the verification code in the pop-up window.

**Columns**: You can filter different columns to specify the shown information.

**Job**: You can view backup jobs, restore jobs, or all jobs by ascending or descending order of historical job names.

**Status**: You can view the job history of completed, error, cancelled or all by status.

**Host**: You can view the job history for an individual host or all hosts.

**Custom download**: Click the **Custom download** icon to enter the page where you can export the relevant Job History file. Select the **Custom Download** format, **Type**, **Column Name**, filter the Job **History** according to your need, and click **Download**. 
- Customized download formats include: pretty formatter and raw formatter. 
- The type includes: CSV, XML, UOF. 
- The filter include: job, type, state, host, resource, storage pool, start time. 
- Each condition can also be used in combination.

> Note: 
>
> - Only you (System Admin/the admin) can export all job histories.

### Alert

#### Alert

Click **Alert** -> **Alert** to enter the page where you can view the alert level, host, module, alert time, message type, message, etc. generated during the job execution. The latest job alerts are displayed by default, and you can search by alert level and host.

![](../image/admin/11-O&M/O&M-03.png)

**Mark**: Alert Emails can be marked as read or unread. Unread alerts are shown in bold font.

**Delete**: Click **Edit** to enter the Delete page where you can delete the selected record.

**Export alert view**: You can filter the alert view and select the corresponding type and format. After clicking download, the relevant alert view file can be exported. 

- Customized download formats include: pretty formatter and raw formatter. 
- The type includes: CSV, XML, UOF. 
- The filter include: job, type, state, host, resource, storage pool, start time. 
- Each condition can also be used in combination.

> Note: 
>
> - Only you (System Admin/the admin) can export all job histories.

#### Subscription

Click **Subscription** to enter the subscription page where you can view the alert levels and methods of subscription under the current resource module.

![](../image/admin/11-O&M/O&M-04.png)

**Subscribe**: You or users can subscribe various levels of alerts for any resource that is within your or their permissions. The subscribe level is warning by default. Enable **Mail** as the **Subscription Type**, the generated alert will be sent to the your email. 

**Unsubscribe**: You can select one or multiple resources to unsubscribe the alert. After you unsubscribe the selected resources, the **Subscription Type** of the selected resources show **Not Subscribed**.

**Resource**: Display the resources within your permissions. 

**Subscription level**: Five levels are available: **Debug**, **Info**, **Warning**, **Error**, and **Fatal**.

- **Debug**: Send the system operating state.
- **Info**: Send feedback on the current system state.
- **Warning**: The system detects an abnormal state and can perform restorative work to restore the system to a normal state.
- **Error**: The system detects errors and abnormalities that prevent the normal completion of the target operation, but can still perform restorative work to make the target operation complete normally.
- **Fatal**: The system detects serious errors and anomalies, at which point it should retain as much valid system data as possible and stop operation.

**Subscription type**: Click the **Edit** icon to access the pop-up window where you set the subscription type. Currently, only support subscribing by mail. For the unsubscribed resource, it shows **Not Subscribed**.

> Note: 
>
> - The subscription requires the use of SMTP server. You should configure SMTP server properly, and the Alert Email will be successfully delivered to your mailbox.

#### Download

Click **Download Log** to enter the page where you can view backup server, storage server and the current agent information in the log list. Select the server or agent and click **Download** to download to the corresponding log file package. Support search by host and type statistics.

![](../image/admin/11-O&M/O&M-05.png)

### Statistics

The statistics function is mainly used to count the global data of the system. With the Multi-tenant enabled, you can also specify the statistics of a specified tenant. To perform statistics, you can select different dimensions that include storage size, hosts, resource, job speed and job duration, and the statistics are displayed as a line graph.

#### Storage Size

Storage Size counts the size of all backup jobs in a certain period, and shows the trend of data storage size in the form of a line chart. In addition to counting the size of all backup jobs, it can also count the original size and the backup sets size of backup jobs. See below:

![](../image/admin/11-O&M/O&M-06.png)

#### Host

Host counts the number of all hosts that have executed jobs in a certain period, and shows the number and trend of active hosts in a line chart. See below:

![](../image/admin/11-O&M/O&M-07.png)

#### Resource

Resource counts the number of resources that have executed jobs in a certain period, and shows the number and trend of active resources in a line chart. See below:

![](../image/admin/11-O&M/O&M-08.png)

#### Job Speed

Job Speed counts the execution speed of each job in a certain period, and shows the speed trend of each job in a line chart. See below:

![](../image/admin/11-O&M/O&M-09.png)

#### Job Duration

Job Duration counts the execution time of each job over a certain period. See below:

![](../image/admin/11-O&M/O&M-10.png)

#### Export

You can export the current statistics in png format.

### Report

Click **Report** to enter the Report page. On this page, you can view **Name**, **Type**, **Description**, and **Actions** of all report records. You can filter types on demand, including job, job count, job history, backup success rate, alert, agent count, storage resource, space usage of the host storage. You can also modify and delete the report.

![](../image/admin/11-O&M/O&M-11.png)

#### Add Report

1. Click **“+”** to access the **New Report** page, select the **Report Info Type**, **Custom Fields**, **Custom Filter**. 

   ![](../image/admin/11-O&M/O&M-12.png)

   **Report info**: Contain type, name, and description. Type contains job, job count, job history, backup success rate, alert, agent count, storage resource, space usage of the host storage. After selecting the report type, fill in the name and description.

   **Custom fileds**: Contain all fields under Job History and Alert.

   **Custom filter**: You can select the filter fields supported by the appropriate report type according to your need.

2. After creating a report, the report page displays information about the custom fields. The number of records displayed per page can be changed by modifying the options in the drop-down list below.

   ![](../image/admin/11-O&M/O&M-13.png)

#### Modify Report

Select the report and click the **Modify** icon to enter the Modify page where you can edit the report information, custom fields and custom filters.

![](../image/admin/11-O&M/O&M-14.png)

#### Search

You can enter the name, type or description in the search input box to filter out the report.

#### Download report

Select the report, click the **Download** icon ![](../image/admin/11-O&M/O&M-16.png) to select the format to generate the report, you can choose the format from **CSV**, **XML**, **UOF** to automatically download records within the current time period of the report to the local.

**Pretty formatter**: When you download the report in **Pretty Formatter**, the display of field content such as "Original Size" and "Transfer Speed" is consistent with the content of the page, and the field content of "Start Time" and "End time" is displayed in a specific date and time format.

**Raw formatter**: When you download the report in **Raw Formatter**, the display of field content such as "Original Size" and "Transfer Speed" is displayed in bytes, and the field content of "Start Time" and "End time" is displayed in a specific date and time format.

#### Print Report

Select the report and click the **Print** icon ![](../image/admin/11-O&M/O&M-17.png) to print the current report. If the report has too many fields to print completely, you can set the print layout or modify the print settings.

![](../image/admin/11-O&M/O&M-15.png)

### Upgrade

After logging into the system, you can click the red number in the pop-up login window to redirect to the upgrade page. On the upgrade management page, you can view the host, state, address, OS information and current version of the currently connected agent. You can also notify the online agent for batch or one-time upgrade.

![](../image/admin/11-O&M/O&M-18.png)

> Note:	
>
> - The agent supports upgrades on Windows, Ubuntu, Linux and AIX platforms.
> - The backup server supports the upgrade of backupd module and common module under Windows, Ubuntu and Linux platforms.
> - The storage server supports the upgrade of storaged modules for Windows, Ubuntu, and Linux platforms, provided that the device has the backupd module installed.
> - Upload package via upgrade management page: By default, there is no installation package to download. You need to upload the corresponding package to the upgrade page first.

#### Upload package

Click **Upload Package** to upload the upgrade package. The successfully uploaded upgrade package is located in the /var/opt/aurreum/adps/backupd/updates/ directory of the backup server. The upload of each upgrade package can be viewed in the Audit Log.

> Note: 
>
> - The Linux server needs to install the gpg tool, and uploading the rpm installer requires installing the rpm tool on the Linux server and restarting the backupd service. 		

- Take Ubuntu for example:                

  ```
  sudo apt install gnupg rpm
  sudo systemctl restart adps-backupd
  ```

#### View Package

Click the **View Packages** icon to view the information about the uploaded upgrade package, including the name, modification time and size of the upgrade package.

**Delete**: Click the **Delete** icon to delete the specified upgrade package.

**Delete all**: Click to delete all upgrade packages.

## Limitation

### Storage Pool

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Storage Pool Limitation List
| Function                    | Limitation Description                                       |
| -----------------------     | ------------------------------------------------------------ |
| Standard storage pool       | For the standard storage pool with multi-storage, when the primary device is down, you cannot restore data from other devices. |
| De-duplication storage pool | Default recycling will free up space. {{ br }}Do not support sparse file system. For example, in XFS (before Linux 2.6.38), spatial reuse is still used for space reclamation.{{ br }}Supported file system:　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　NTFSXFS (since Linux 2.6.38) ext4 (since Linux 3.0) Btrfs (since Linux 3.7) |
| Real-time backup pool       | Only Oracle and MySQL continuous log backup are supported.   |
| File synthetic pool         | Only support Linux storage server.{{ br }}Limitations on file system and kernel versions for synthetic backups:{{ br }}XFS (since Linux 2.6.38) ext4 (since Linux 3.0)).{{ br }}NeoKylin 6 kernal 2.6.32-0.18 does not support file synthetic pool. |
| Database synthetic pool     | Only support Ubuntu storage server.{{ br }}Support synthetic backups of Oracle, SQL Server, MySQL with data volume greater than 1T, which needs to be used in 16.04 ZFS file system. {{ br }}only support level-1 pool replication relationship. |
| LAN-Free storage pool       | Only support Ubuntu storage server. {{ br }}Backups to LAN-Free pools are not supported for data in dual-cluster environments.{{ br }}Oracle RAC does not support the backup to LAN-Free pools.{{ br }}The agent supports Linux (Red Hat 4.0 and later), AIX and Windows 2008 and later platforms.{{ br }}To use iSCSI, you need to install iscsi-initiator-utils on the agent first. |
```
### Job Replication

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Job Replication Limitation List
| Function                | Limitation Description                                       |
| ----------------------- | ------------------------------------------------------------ |
| Replicate storage pools | Pool replication is not supported for Local Storage Pool, LAN Free Pool, and File Synthesis Pool. |
| Replicate jobs          | Do not support deleting job replication records. When executing a job replication, you cannot restore the corresponding backup point of the target pool; When executing the restore of the target pool, you cannot make a replication of the corresponding backup point as well. Block device de-duplication storage pools do not support modifing network in the settings of pool replication. |
| Repair the source pool  | Pool replication where the object storage service pool is the source storage pool does not support repairing the source pool. |
```
### Multi-tenant

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Multi-tenant Limitation List
| Function          | Limitation Description                                       |
| ----------------- | ------------------------------------------------------------ |
| Use storage pools | Users can only use the corresponding storage pools after the pricing of storage space  is enabled. |
| Add storage pools | Users can only create object storage service pool or create standard storage pool, de-duplication storage pool, and block device storage pool via storage regions. |
```
### Index

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Index Limitation List
| Function          | Limitation Description                                       |
| ----------------- | ------------------------------------------------------------ |
| Backup            | Support the following types of storage pools: standard storage pool, de-duplication storage pool, tape library pool, and object storage service pool. |
| Disaster recovery | To restore the backup sets to the agent of the offsite backup server, you need to restore the index first and then associate the agent to the offsite backup server, otherwise restoring the backup sets of local resources will fail. |
```
### License

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} License Limitation List
| Function          | Limitation Description                                       |
| ----------------- | ------------------------------------------------------------ |
| Initialize system | Before the initialization of the system, when the license edition is selected as "Leased", the module cannot be selected because the host is not yet registered, so you need to enter the system after the initialization is completed, associate the agent with the host, and then license the host with the lease edition. |
```
### Approval

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Approval Limitation List
| Function | Limitation Description               |
| -------- | ------------------------------------ |
| Job      | Support databases, files, and Linux. |
```
### Jobs

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Jobs Limitation List
| Function    | Limitation Description                                       |
| ----------- | ------------------------------------------------------------ |
| Modify jobs | Only supports modifying the backup content of file backup jobs and Linux OS backup jobs. For clustered environments (RAC, dual cluster), all nodes need to be online in order to modify jobs. |
| Stop jobs   | Oracle, SQL Server, MySQL, MongoDB, DB2, Informix, GBase, File support stopping jobs. For clustered environments (RAC, dual cluster), all nodes need to be online in order to stop jobs. |
| Delete jobs | For clustered environments (RAC, dual cluster), all nodes need to be online in order to delete jobs. |
```
### Upgrade

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Upgrade Limitation List
| Function        | Limitation Description                                       |
| --------------- | ------------------------------------------------------------ |
| Upload packages | The version of the upgrade package must be consistent with the version of the backup server adps-backupd. You must upload all installed packages of adps modules on the backup server or agent to upgrade properly. adps-storaged is installed on the same device as adps-backupd or adps-agent to allow automatic upgrades. HP-UX, Solaris, and AIX agents do not support upgrades via the interface and you need to upgrade them manually. |
```
### Access Key 

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Access Key Limitation List
| Function           | Limitation Description                                       |
| ------------------ | ------------------------------------------------------------ |
| Log in to resource | Oracle, DB2, MongoDB, Domino, File, Linux OS resource login are supported. When Oracle restores to the latest instance, it does not support access key logging agent. |
```
### Installation Packages

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Installation Packages Limitation List
| Function | Limitation Description                                       |
| -------- | ------------------------------------------------------------ |
| Windows  | Windows, AIX, Solaris, HP-UX do not support the installation of Backup Server, Storage Server. |
```
## Glossary

```{tabularcolumns} |\Y{0.28}|\Y{0.72}|
```
```{table} Glossary Limitation List
| Term                    | Description                                                  |
| ----------------------- | ------------------------------------------------------------ |
| Traditional backup      | The backup interface of the target application is connected with agent to obtain data for protection on a regular basis, such as full backup, incremental backup, log backup and so on. |
| System user             | System built-in user.                                        |
| External user           | User that you can create.                                    |
| Tape library controller | The tape controller connects the central processor and the logical control circuit device of the tape drive. The tape controller receives commands from the central processor, analyzes and monitors the execution of the commands. |
| SMTP                    | SMTP is a protocol that provides reliable and efficient email delivery. |
| LDAP                    | LDAP can be used for permission authentication and System User management and authentication. |
```
## Appendix

1. Login failed exceeded limit:

   - See the following to release from the login IP address blocklist for System Users:

     ```
     #Enter MariaDB database
     mysql -u root -p
     MariaDB [(none)]> use adps
     #Query the blacklisted ip and id
     MariaDB [adps]> select id ，ip from user_black_ip;
     +----+---------------+
     | id | ip            |
     +----+---------------+
     |  2 | 192.168.83.51 |
     +----+---------------+
     MariaDB [adps]> delete from user_black_ip where id =2;
     MariaDB [adps]> flush privileges;
     ```

2. Lock period of failed login: The default is read-only and unmodifiable, and you need to modify in the background. To modify the configuration of "Lock period of failed login" and "Auto Unlock", see the following:

   - Access the /etc/opt/aurreum/adps/backupd/svc.conf.d/00-base.conf file under the backup server. BACKUPD Service adds "--non-sysuser-auto-unlock" (Enable external users to unlock automatically) and "-- user-auto-unlock-wait-seconds" (The unlock waiting time (in seconds)).
