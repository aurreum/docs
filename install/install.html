
<!DOCTYPE html>


<html lang="en-US" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Installation Guide &#8212; ADPS V3.0.44811</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css?v=84d92f63" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=6da122b0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'install/install';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Agent Installation Guide" href="../agent_install/agent_install.html" />
    <link rel="prev" title="User Guides" href="../index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en-US"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="ADPS V3.0.44811 - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="ADPS V3.0.44811 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agent_install/agent_install.html">Agent Installation Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Management</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../administrator/administrator.html">Administrator’s Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Databases</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../oracle/oracle.html">User Guide for Oracle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mysql/mysql.html">User Guide for MySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mssql/mssql.html">User Guide for Microsoft SQL Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db2/db2.html">User Guide for DB2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sybase/sybase.html">User Guide for Sybase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../informix/informix.html">User Guide for Informix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postgresql/postgresql.html">User Guide for PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cachedb/cachedb.html">User Guide for Caché</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hana/hana.html">User Guide for SAP HANA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mariadb/mariadb.html">User Guide for MariaDB</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Files</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../file/file.html">User Guide for File</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Big Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../mongodb/mongodb.html">User Guide for MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hadoop/hadoop.html">User Guide for Hadoop</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Object Storage</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../obs/obs.html">User Guide for Object Storage Service</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Applications</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../exchange/exchange.html">User Guide for Exchange</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Operating Systems</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../linux_os/linux_os.html">User Guide for Linux OS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Virtualization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../vmware/vmware.html">User Guide for VMware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openstack/openstack.html">User Guide for OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hyper_v/hyper_v.html">User Guide for Hyper-V</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Installation Guide</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adps-components">ADPS components</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-process">Installation process</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#server-requirements">Server requirements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prepare-software-packages">Prepare software packages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-the-kernel">Update the kernel</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-mariadb">Install MariaDB</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-adps-software">Install the ADPS software</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ubuntu">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#centos">CentOS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connect-catalog-to-mariadb">Connect catalog to MariaDB</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-optional-modules">Install optional modules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-lan-free-module">Install the LAN-Free module</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">CentOS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-tape-library-controller-module">Install the Tape Library Controller module</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">CentOS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-file-instant-recovery-module">Install the File Instant Recovery Module</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">CentOS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-auxiliary-tools">Install auxiliary tools</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#open-access-ports">Open access ports</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-the-service-state">Check the service state</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#web-console">Web console</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix">Appendix</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#uninstall-the-software">Uninstall the software</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">CentOS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reconfigure-storaged">Reconfigure storaged</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#supported-fc-hba-list">Supported FC HBA List</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="installation-guide">
<h1>Installation Guide<a class="headerlink" href="#installation-guide" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>This guide describes how to properly install the ADPS backup server and storage server.</p>
<p><img alt="" src="../_images/install-1.png" /></p>
</section>
<section id="adps-components">
<h2>ADPS components<a class="headerlink" href="#adps-components" title="Link to this heading">#</a></h2>
<p>ADPS components include Backup Server, Storage Server, and Agent.</p>
<p><strong>Backup Server</strong>: Responsible for managing the connections and business information of Agents and the Storage Servers.</p>
<p><strong>Storage Server</strong>: Responsible for receiving and storing data as well as processing the recycling mechanisms of backup data. Backup Server and Storage Server components can be installed on the same or different machines. One backup server can manage multiple storage servers to achieve storage scalability.</p>
<p><strong>Agent</strong>: Responsible for responding to the commands of the backup console and performing the backup/restore jobs. The Agent is installed on the server where users store business data. It will be managed by the backup server after their connection.</p>
</section>
<section id="installation-process">
<h2>Installation process<a class="headerlink" href="#installation-process" title="Link to this heading">#</a></h2>
<p>This document introduces the process of deploying a new ADPS system in which the backup server and the storage server are on the same machine (all-in-one configuration). Please follow the steps below.</p>
<p>Step 1. Prepare the environment</p>
<p>Step 2. Update the kernel</p>
<p>Step 3. Install MariaDB</p>
<p>Step 4. Install ADPS</p>
<p>Step 5. Connect the Catalog database</p>
<p>Step 6. Install online manual</p>
<p>Step 7. Install optional modules</p>
<p>Step 8. Install auxiliary tools</p>
<p>Step 9. Open access ports</p>
<p>Step 10. Check the service state</p>
<section id="server-requirements">
<h3>Server requirements<a class="headerlink" href="#server-requirements" title="Link to this heading">#</a></h3>
<p>The followings are the hardware requirements for the ADPS backup/storage server. You can refer to the server configuration of the Aurreum Data Protection Appliance (ADPA). If you use an outdated server, problems such as incompatibility may occur.</p>
<ol class="arabic">
<li><p>Architecture</p>
<p>A physical server or virtual machine with an x86-64 architecture is required.</p>
</li>
<li><p>Memory</p>
<table class="table" id="id9">
<caption><span class="caption-text">Memory</span><a class="headerlink" href="#id9" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Item</p></th>
<th class="head"><p>Standard configuration</p></th>
<th class="head"><p>Minimum configuration</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Software installation</p></td>
<td><p>More than 32G</p></td>
<td><p>More than 16G</p></td>
<td><p>Less than 16G may result in unacceptable performance.</p></td>
</tr>
<tr class="row-odd"><td><p>With CDM or data de-duplication service</p></td>
<td><p>At least 1.5‰ of the data disk</p></td>
<td><p>More than 16G</p></td>
<td><p>For example, if the data disk space is 64T, the storage server memory should be at least 96G.</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Storage</p>
<p>The storage of the all-in-one appliance should be divided into root partition and data partition. Please prepare at least two disks for installation.</p>
<table class="table" id="id10">
<caption><span class="caption-text">Storage</span><a class="headerlink" href="#id10" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Storage</p></th>
<th class="head"><p>Recommendation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Root partition</p></td>
<td><p>Prepare two solid-state disks (SSDs) for the root partition and set up RAID 1. If you select Auto Mode for installation, the disk space for the root partition should be more than 60 G.</p></td>
</tr>
<tr class="row-odd"><td><p>Data partition</p></td>
<td><p>Use separate disks to configure the XFS data partition and the root partition. With multiple disks, set up RAID. The size of a data partition depends on the hardware configuration of the server and the backup business volume.</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Network</p>
<p>Use at least two network interface cards (GE/10GE) to isolate networks for different usages such as management and storage. An iSCSI/FC HBA card is also required for LAN-free and synthetic backup features. See the <em>Appendix</em> for compatible models of the supported HBA card.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For hardware servers other than ADPA, you need to handle the compatibility issues of hardware devices and system software by yourselves, including network interface card and HBA card.</p>
</div>
</li>
<li><p>Operating system</p>
<p>The following operating systems are supported for the backup/storage server:</p>
<table class="table" id="id11">
<caption><span class="caption-text">Operating system</span><a class="headerlink" href="#id11" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Operating system</p></th>
<th class="head"><p>CPUarchitecture</p></th>
<th class="head"><p>Operating system bits</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ubuntu 20.04</p></td>
<td><p>x86</p></td>
<td><p>64</p></td>
</tr>
<tr class="row-odd"><td><p>CentOS 7.6</p></td>
<td><p>x86</p></td>
<td><p>64</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>File system</p>
<p>(1) Root disk</p>
<p>Use the Logical Volume Manager (LVM) to create a volume group (VG) (<code class="docutils literal notranslate"><span class="pre">systemvg</span></code>) on the system disk and then create a logical volume (LV) on the <code class="docutils literal notranslate"><span class="pre">systemvg</span></code>. The recommended system partitions are:</p>
<table class="table" id="id12">
<caption><span class="caption-text">Root disk</span><a class="headerlink" href="#id12" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Partition</p></th>
<th class="head"><p>Mount point</p></th>
<th class="head"><p>Partition size</p></th>
<th class="head"><p>File system</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>boot</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/boot</span></code></p></td>
<td><p>512 MiB</p></td>
<td><p>ext2</p></td>
</tr>
<tr class="row-odd"><td><p>rootlv</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td><p>32 GiB and above</p></td>
<td><p>xfs</p></td>
</tr>
<tr class="row-even"><td><p>swaplv</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">swap</span></code></p></td>
<td><p>16 GiB and above</p></td>
<td><p>swap</p></td>
</tr>
</tbody>
</table>
<p>(2) Data disk</p>
<p>Create an XFS or ZFS file system on the data disk. For LAN-free and synthetic backup features, create a ZFS file system. For other scenarios, create an XFS file system.</p>
<p><strong>XFS file system</strong></p>
<p>Use LVM to create a VG (<code class="docutils literal notranslate"><span class="pre">datakistvg</span></code>) on the data disk and create a LV (<code class="docutils literal notranslate"><span class="pre">datakistlv</span></code>) on <code class="docutils literal notranslate"><span class="pre">datakistvg</span></code>.</p>
<table class="table" id="id13">
<caption><span class="caption-text">XFS file system</span><a class="headerlink" href="#id13" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Partition</p></th>
<th class="head"><p>Mount point</p></th>
<th class="head"><p>Capacity</p></th>
<th class="head"><p>File system type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>datakistlv</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/datakist</span></code></p></td>
<td><p>All data disk space</p></td>
<td><p>XFS</p></td>
</tr>
</tbody>
</table>
<p><strong>ZFS file system</strong></p>
<p>To create a ZFS file system on the data disk, configure JBOD mode (pass-through mode) on the RAID controller. Use the zpool create command to create a pool (<code class="docutils literal notranslate"><span class="pre">datakist</span></code>) on the data disk and then mount the pool to the <code class="docutils literal notranslate"><span class="pre">/datakist</span></code> directory.</p>
<table class="table" id="id14">
<caption><span class="caption-text">ZFS file system</span><a class="headerlink" href="#id14" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>ZFS pool</p></th>
<th class="head"><p>Mount point</p></th>
<th class="head"><p>Capacity</p></th>
<th class="head"><p>File system type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>datakist</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/datakist</span></code></p></td>
<td><p>All data disk space</p></td>
<td><p>ZFS</p></td>
</tr>
</tbody>
</table>
<p>First, check the device ID of each hard disk. For example, <code class="docutils literal notranslate"><span class="pre">/dev/disk/by-id/wwn-0x5000cca271c7dcd2</span></code> is the device ID of <code class="docutils literal notranslate"><span class="pre">/dev/sda</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">-</span><span class="n">l</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span>
</pre></div>
</div>
<p>Create a zpool. Take 24 HDDs for example. First, check the HDD physical sector size.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">blockdev</span> <span class="o">--</span><span class="n">getpbsz</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c7dcd2</span>
<span class="mi">4096</span>
</pre></div>
</div>
<p>If the physical sector size of the disk is 4 KiB (i.e. “Advanced Format”: https://en.wikipedia.org/wiki/Advanced_Format), then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">zpool</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="o">-</span><span class="n">m</span> <span class="o">/</span><span class="n">datakist</span> <span class="o">-</span><span class="n">o</span> <span class="n">ashift</span><span class="o">=</span><span class="mi">12</span> <span class="n">datakist</span> \
<span class="n">raidz2</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c7dcd2</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c81fa3</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8259e</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8273b</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c82b67</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c82d9e</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c83674</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c836e4</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c840eb</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c846dd</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c848a6</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8509f</span> \
<span class="n">raidz2</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c76773</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c79f59</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8080a</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c82df7</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8371d</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c837e9</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c837f7</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c84cf8</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c84cfd</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c84cff</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8508f</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c85193</span>
</pre></div>
</div>
<p>If the physical sector size of the disk is 512 B, then:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">zpool</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="o">-</span><span class="n">m</span> <span class="o">/</span><span class="n">datakist</span> <span class="n">datakist</span> \
<span class="n">raidz2</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c7dcd2</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c81fa3</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8259e</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8273b</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c82b67</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c82d9e</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c83674</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c836e4</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c840eb</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c846dd</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c848a6</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8509f</span> \
<span class="n">raidz2</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c76773</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c79f59</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8080a</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c82df7</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8371d</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c837e9</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c837f7</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c84cf8</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c84cfd</span> \
   <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c84cff</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c8508f</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">disk</span><span class="o">/</span><span class="n">by</span><span class="o">-</span><span class="nb">id</span><span class="o">/</span><span class="n">wwn</span><span class="o">-</span><span class="mh">0x5000cca271c85193</span>
</pre></div>
</div>
<p>After the creation, the zpool will be mounted to the /datakist directory automatically. You can use the <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">-h</span></code> command to check the results.</p>
</li>
<li><p>Set the time zone</p>
<p>We recommend setting the time zone of the operating system as that of your current location. The command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">timedatectl</span> <span class="nb">set</span><span class="o">-</span><span class="n">timezone</span> <span class="o">&lt;</span><span class="n">your_time_zone</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="prepare-software-packages">
<h3>Prepare software packages<a class="headerlink" href="#prepare-software-packages" title="Link to this heading">#</a></h3>
<p>You can go to the Aurreum website or contact our technical support to get the required ADPS packages. The product versions installed on all components must be the same. Mixed version installation may result in abnormal Web access and functions. The following table shows the packages and their functions:</p>
<table class="table" id="id15">
<caption><span class="caption-text">Prepare Software Packages</span><a class="headerlink" href="#id15" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Software package</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>adps-common-version-architecture.suffix</p></td>
<td><p>A base package that must be installed.</p></td>
</tr>
<tr class="row-odd"><td><p>adps-backupd-version-architecture.suffix</p></td>
<td><p>Provides ADPS backup server service.</p></td>
</tr>
<tr class="row-even"><td><p>adps-storaged-version-architecture.suffix</p></td>
<td><p>Provides ADPS storage server service.</p></td>
</tr>
<tr class="row-odd"><td><p>adps-nginx-version-architecture.suffix</p></td>
<td><p>Provides ADPS Web management service.</p></td>
</tr>
<tr class="row-even"><td><p>adps-datakist-version-architecture.suffix</p></td>
<td><p>Feature pack that moves the ADPS file directory to <code class="docutils literal notranslate"><span class="pre">/datakist</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>adps-storaged-lanfree-version-architecture.suffix</p></td>
<td><p>Feature pack of ADPS LAN-free and synthetic backup.</p></td>
</tr>
<tr class="row-even"><td><p>adps-controller-version-architecture.suffix</p></td>
<td><p>Feature pack that ADPS manages tape libraries.</p></td>
</tr>
<tr class="row-odd"><td><p>adps-nfsd-version-architecture.suffix</p></td>
<td><p>Feature pack that ADPS mounts files.</p></td>
</tr>
<tr class="row-even"><td><p>system-MariaDB-version.tar.gz</p></td>
<td><p>ADPS database software package.</p></td>
</tr>
<tr class="row-odd"><td><p>kernel_version-zfs_version-ubuntu2004_architecture.tar.gz</p></td>
<td><p>Kernel and ZFS tool package for Ubuntu 20.04.</p></td>
</tr>
<tr class="row-even"><td><p>kernel_version-zfs_version-centos76_architecture.tar.gz</p></td>
<td><p>Kernel and ZFS tool package for CentOS 7.6.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="update-the-kernel">
<h3>Update the kernel<a class="headerlink" href="#update-the-kernel" title="Link to this heading">#</a></h3>
<p>If the data disk of the operating system uses the ZFS file system, you must update the kernel to the internal source version (not the public source version) before installing the ADPS software. Otherwise, it will affect the normal use of LAN-free and synthetic backup. To update the kernel, do the following:</p>
<ul>
<li><p>Ubuntu</p>
<p>(1) Run the following commands with root privileges:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>tar<span class="w"> </span>-xf<span class="w"> </span><span class="m">5</span>.4.0-132_zfs0.8.6_ubuntu2004_amd64_aurreum.tar.gz<span class="w"> </span>-C<span class="w"> </span>/home/aurreum/<span class="w">    </span><span class="c1">#If you do not have the /home/aurreum directory, use the command sudo mkdir /home/aurreum to create the directory first</span>
secho<span class="w"> </span>deb<span class="w"> </span><span class="o">[</span>signed-by<span class="o">=</span>/home/aurreum/ubuntu2004_amd64/repo.gpg<span class="o">]</span><span class="w"> </span>file:///home/aurreum/ubuntu2004_amd64<span class="w"> </span>bionic<span class="w"> </span>main<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/apt/sources.list.d/aurreum.list
sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>linux-<span class="o">{</span>image,modules,modules-extra,headers<span class="o">}</span>-5.4.0-132-generic<span class="w"> </span>linux-base<span class="w"> </span>linux-firmware
</pre></div>
</div>
<p>(2) After updating the kernel, you must restart the server.</p>
</li>
<li><p>CentOS</p>
<p>(1) Run the following commands with root privileges:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>-zvxf<span class="w"> </span><span class="m">5</span>.4.96-200.el7_zfs0.8.6_centos76_x86_64.tar.gz
rpm<span class="w"> </span>-Uvh<span class="w"> </span>kernel/*
</pre></div>
</div>
<p>(2) After updating the kernel, you must restart the server.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The kernel has hardware adaptation compatibility issues. Therefore, the hardware server is better in the same version as the ADPA. Otherwise, updating the kernel may lead to compatibility problems, like the server cannot be started or the operating system is damaged.</p>
</div>
</section>
<section id="install-mariadb">
<h3>Install MariaDB<a class="headerlink" href="#install-mariadb" title="Link to this heading">#</a></h3>
<ol class="arabic">
<li><p>Installation method</p>
<ul class="simple">
<li><p>Ubuntu</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>tar<span class="w"> </span>-zvxf<span class="w"> </span>Ubuntu2004_amd64_MariaDB10.6.tar.gz
<span class="nb">cd</span><span class="w"> </span>Ubuntu2004_amd64_MariaDB10.6
sudo<span class="w"> </span>sh<span class="w"> </span>install_MariaDB10.6.sh
</pre></div>
</div>
<ul class="simple">
<li><p>CentOS</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>tar<span class="w"> </span>-zvxf<span class="w"> </span>Centos7_x86-64_MariaDB10.6.tar.gz
<span class="nb">cd</span><span class="w"> </span>Centos7_x86-64_MariaDB10.6
sudo<span class="w"> </span>sh<span class="w"> </span>install_MariaDB10.6.sh
</pre></div>
</div>
</li>
<li><p>Set the root password</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>mariadb
sudo<span class="w"> </span>mysqladmin<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>password<span class="w"> </span><span class="s1">&#39;xxxxxx&#39;</span><span class="w">   </span><span class="c1">#(xxxxxx is the password that you set for the root user)</span>
</pre></div>
</div>
</li>
<li><p>Modify the configuration file</p>
<p>Add sql_mode, remote access, and other settings in the MariaDB configuration file. Modify the <code class="docutils literal notranslate"><span class="pre">/etc/mysql/mariadb.conf.d/50-server.cnf</span></code> configuration file on Ubuntu and the <code class="docutils literal notranslate"><span class="pre">/etc/my.cnf.d/server.cnf</span></code> configuration file on CentOS.</p>
<p>(1) Add sql_mode</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>mysqld<span class="o">]</span>
<span class="nv">sql_mode</span><span class="o">=</span><span class="s1">&#39;ONLY_FULL_GROUP_BY&#39;</span>
</pre></div>
</div>
<p>(2) Enable remote access. Set the bind address to 0.0.0.0</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>mysqld<span class="o">]</span>
bind-address<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>.0.0.0
</pre></div>
</div>
<p>(3) Use root to log in to MariaDB and grant the root user the remote access privilege.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-p
MariaDB<span class="w"> </span><span class="o">[(</span>none<span class="o">)]</span>&gt;<span class="w"> </span>GRANT<span class="w"> </span>ALL<span class="w"> </span>PRIVILEGES<span class="w"> </span>ON<span class="w"> </span>*.*<span class="w"> </span>TO<span class="w"> </span><span class="s1">&#39;root&#39;</span>@<span class="s1">&#39;%&#39;</span><span class="w"> </span>IDENTIFIED<span class="w"> </span>BY<span class="w"> </span><span class="s1">&#39;xxxxxx&#39;</span><span class="p">;</span><span class="w">  </span><span class="c1">#(xxxxxx is the password that you set for the root user)</span>
MariaDB<span class="w"> </span><span class="o">[(</span>none<span class="o">)]</span>&gt;<span class="w"> </span>FLUSH<span class="w"> </span>PRIVILEGES<span class="p">;</span>
</pre></div>
</div>
<p>(4) Restart MariaDB</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>mariadb
</pre></div>
</div>
</li>
<li><p>Set MariaDB to start on boot</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">enable</span> <span class="n">mariadb</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="install-the-adps-software">
<h3>Install the ADPS software<a class="headerlink" href="#install-the-adps-software" title="Link to this heading">#</a></h3>
<section id="ubuntu">
<h4>Ubuntu<a class="headerlink" href="#ubuntu" title="Link to this heading">#</a></h4>
<ol class="arabic">
<li><p>In the directory where the installation package is located, run the following commands in sequence with root privileges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dpkg</span> <span class="o">-</span><span class="n">i</span> <span class="n">adps</span><span class="o">-</span><span class="n">common_version_amd64</span><span class="o">.</span><span class="n">deb</span> <span class="n">adps</span><span class="o">-</span><span class="n">backupd_version_amd64</span><span class="o">.</span><span class="n">deb</span> <span class="n">adps</span><span class="o">-</span><span class="n">storaged_version_amd64</span><span class="o">.</span><span class="n">deb</span> <span class="n">adps</span><span class="o">-</span><span class="n">nginx_version_amd64</span><span class="o">.</span><span class="n">deb</span> <span class="n">adps</span><span class="o">-</span><span class="n">datakist_version_amd64</span><span class="o">.</span><span class="n">deb</span><span class="o">||</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="o">-</span><span class="n">y</span> <span class="o">-</span><span class="n">f</span> <span class="n">install</span>
</pre></div>
</div>
</li>
<li><p>Configure adps-storaged and set the IP address for the backup server, e.g., 192.168.88.239</p>
<p><img alt="" src="../_images/install-3.png" /></p>
</li>
<li><p>Set the port for the backup server. The default port is 50305, which means that data is transferred without encryption. You can encrypt the data by modifying the port to 60305.</p>
<p><img alt="" src="../_images/install-4.png" /></p>
</li>
<li><p>If you enter 50305 in the previous step, choose “No” to disable the SSL protocol. If you enter 60305, choose “Yes” to enable the SSL protocol.</p>
<p><img alt="" src="../_images/install-5.png" /></p>
</li>
<li><p>Wait for the installation to complete. After the installation, symbolic links will be created between the ADPS-related directories and the /datakist under the data disk.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Install the adps-datakist package after the installation of the adps-storaged package. Otherwise, the /datakist directory space may not be available.</p>
</div>
</section>
<section id="centos">
<h4>CentOS<a class="headerlink" href="#centos" title="Link to this heading">#</a></h4>
<ol class="arabic">
<li><p>In the directory where the installation package is located, install the packages in sequence with root privileges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rpm</span> <span class="o">-</span><span class="n">i</span> <span class="n">adps</span><span class="o">-</span><span class="n">common_version_x86_64</span><span class="o">.</span><span class="n">rpm</span>  <span class="n">adps</span><span class="o">-</span><span class="n">backupd_version_x86_64</span><span class="o">.</span><span class="n">rpm</span> <span class="n">adps</span><span class="o">-</span><span class="n">storaged_version_x86_64</span><span class="o">.</span><span class="n">rpm</span> <span class="n">adps</span><span class="o">-</span><span class="n">nginx_version_x86_64</span><span class="o">.</span><span class="n">rpm</span> <span class="n">rpm</span> <span class="o">-</span><span class="n">i</span> <span class="n">adps</span><span class="o">-</span><span class="n">datakist_version_x86_64</span><span class="o">.</span><span class="n">rpm</span>
</pre></div>
</div>
</li>
<li><p>Wait for the installation to complete. After the installation, symbolic links will be created between the ADPS-related directories and the <code class="docutils literal notranslate"><span class="pre">/datakist</span></code> under the data disk.</p></li>
<li><p>After the installation, configure adps-storaged:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/etc/init.d/adps-storaged<span class="w"> </span>config
Please<span class="w"> </span>input<span class="w"> </span>Aurreum<span class="w"> </span>Data<span class="w"> </span>Protection<span class="w"> </span>Suite<span class="w"> </span>Backup<span class="w"> </span>Server<span class="w"> </span>host<span class="o">[]</span>:<span class="w">     </span><span class="c1">##Enter the IP address of the backup server here, e.g., 192.168.88.239</span>
Please<span class="w"> </span>input<span class="w"> </span>Aurreum<span class="w"> </span>Data<span class="w"> </span>Protection<span class="w"> </span>Suite<span class="w"> </span>Backup<span class="w"> </span>Server<span class="w"> </span>port<span class="o">[]</span>:<span class="w">     </span><span class="c1">##Enter the port of the backup server here. The default port of the system: 60305</span>
Does<span class="w"> </span>Aurreum<span class="w"> </span>Data<span class="w"> </span>Protection<span class="w"> </span>Suite<span class="w"> </span>Backup<span class="w"> </span>Server<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>SSL<span class="w"> </span>protocol?<span class="o">[</span>N<span class="o">]</span>:<span class="w">     </span><span class="c1">##Enter Yes here</span>
Saving<span class="w"> </span>adps-storaged<span class="w"> </span>config<span class="o">[</span>OK<span class="o">]</span>:<span class="w">       </span><span class="c1">##Press &quot;Enter&quot; to save the modification</span>
Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>restart<span class="w"> </span>adps-storaged<span class="o">[</span>Y<span class="o">]</span>:<span class="w">    </span><span class="c1">##Enter Y here to restart the service</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="connect-catalog-to-mariadb">
<h3>Connect catalog to MariaDB<a class="headerlink" href="#connect-catalog-to-mariadb" title="Link to this heading">#</a></h3>
<p>The ADPS catalog should be connected to the MariaDB database.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo /etc/init.d/adps-backupd config mysql
Please input mysql host[]: 127.0.0.1
Please input mysql port[3306]:
Please input mysql user[root]:
Please input mysql password:
Loaded /opt/aurreum/adps/lib/libmysqlclient.so.18 with flags 0x00000101(RTLD_LAZY | RTLD_GLOBAL)
Test MySQL connectivity OK!
Select Y when you see the following prompt;
Do you want to restart backupd? [Y]: y
[ ok ] Restarting adps-backupd (via systemctl): adps-backupd.service.
</pre></div>
</div>
</section>
</section>
<section id="install-optional-modules">
<h2>Install optional modules<a class="headerlink" href="#install-optional-modules" title="Link to this heading">#</a></h2>
<section id="install-the-lan-free-module">
<h3>Install the LAN-Free module<a class="headerlink" href="#install-the-lan-free-module" title="Link to this heading">#</a></h3>
<p>If the data disk of the operating system uses the ZFS file system, you should install the adps-storaged-lanfree software package on the storage server to realize LAN-free backups and synthetic backups through iSCSI/FC Target. The installation commands are:</p>
<section id="id1">
<h4>Ubuntu<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<ol class="arabic">
<li><p>Install the lio-utils and zfsutils-linux dependent packages.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>tar<span class="w"> </span>-xf<span class="w"> </span><span class="m">5</span>.4.0-132_zfs0.8.6_ubuntu2004_amd64_aurreum.tar.gz<span class="w"> </span>-C<span class="w"> </span>/home/aurreum/<span class="w">  </span><span class="c1">#If you do not have the /home/aurreum directory, use the command sudo mkdir /home/aurreum to create the directory first</span>
sudo<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>deb<span class="w"> </span><span class="o">[</span>signed-by<span class="o">=</span>/home/aurreum/ubuntu2004_amd64/repo.gpg<span class="o">]</span><span class="w"> </span>file:///home/aurreum/ubuntu2004_amd64<span class="w"> </span>bionic<span class="w"> </span>main<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/apt/sources.list.d/aurreum.list
sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>zfs*<span class="w"> </span>lio-utils
</pre></div>
</div>
</li>
<li><p>Install the adps-storaged-lanfree software package.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dpkg</span> <span class="o">-</span><span class="n">i</span> <span class="n">adps</span><span class="o">-</span><span class="n">storaged</span><span class="o">-</span><span class="n">lanfree_version_amd64</span><span class="o">.</span><span class="n">deb</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id2">
<h4>CentOS<a class="headerlink" href="#id2" title="Link to this heading">#</a></h4>
<ol class="arabic">
<li><p>Install the lio-utils and zfsutils-linux dependent packages.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>-zvxf<span class="w"> </span><span class="m">5</span>.4.0-115_zfs0.8.6_ubuntu2004_amd64.tar.gz
rpm<span class="w"> </span>-ivh<span class="w"> </span>lio-zfs-utils/lio-utils-3.1-11.noarch.rpm
rpm<span class="w"> </span>-ivh<span class="w"> </span>lio-zfs-utils/zfs-utils/*
</pre></div>
</div>
</li>
<li><p>Install the adps-storaged-lanfree software package.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rpm</span> <span class="o">-</span><span class="n">ivh</span> <span class="n">adps</span><span class="o">-</span><span class="n">storaged</span><span class="o">-</span><span class="n">lanfree_version_amd64</span><span class="o">.</span><span class="n">deb</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="install-the-tape-library-controller-module">
<h3>Install the Tape Library Controller module<a class="headerlink" href="#install-the-tape-library-controller-module" title="Link to this heading">#</a></h3>
<p>To back up data to the tape library, install the adps-controller package on a server and make the server the tape library controller. The tape library controller must be connected to the tape library over the IP-SAN or FC-SAC network. adps-controller handles all requests from the agent to the tape library. The installation commands are:</p>
<section id="id3">
<h4>Ubuntu<a class="headerlink" href="#id3" title="Link to this heading">#</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dpkg</span> <span class="o">-</span><span class="n">i</span> <span class="n">adps</span><span class="o">-</span><span class="n">controller_version_amd64</span><span class="o">.</span><span class="n">deb</span>
</pre></div>
</div>
</section>
<section id="id4">
<h4>CentOS<a class="headerlink" href="#id4" title="Link to this heading">#</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rpm</span> <span class="o">-</span><span class="n">ivh</span> <span class="n">adps</span><span class="o">-</span><span class="n">controller_version_x86_64</span><span class="o">.</span><span class="n">rpm</span>
</pre></div>
</div>
</section>
</section>
<section id="install-the-file-instant-recovery-module">
<h3>Install the File Instant Recovery Module<a class="headerlink" href="#install-the-file-instant-recovery-module" title="Link to this heading">#</a></h3>
<p>To achieve file instant recovery, install the adps-nfsd package on the storage server. Then the file backup sets in storage pools can be mounted to the host with the agent installed. The installation commands are:</p>
<section id="id5">
<h4>Ubuntu<a class="headerlink" href="#id5" title="Link to this heading">#</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dpkg</span> <span class="o">-</span><span class="n">i</span> <span class="n">adps</span><span class="o">-</span><span class="n">nfsd_version_amd64</span><span class="o">.</span><span class="n">deb</span>
</pre></div>
</div>
</section>
<section id="id6">
<h4>CentOS<a class="headerlink" href="#id6" title="Link to this heading">#</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rpm</span> <span class="o">-</span><span class="n">ivh</span> <span class="n">adps</span><span class="o">-</span><span class="n">nfs_version_x86_64</span><span class="o">.</span><span class="n">rpm</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="install-auxiliary-tools">
<h2>Install auxiliary tools<a class="headerlink" href="#install-auxiliary-tools" title="Link to this heading">#</a></h2>
<p>We recommend installing auxiliary tools such as lzop, zip, sqlite3, and rpm gnupg to facilitate subsequent system operation and maintenance.</p>
</section>
<section id="open-access-ports">
<h2>Open access ports<a class="headerlink" href="#open-access-ports" title="Link to this heading">#</a></h2>
<p>For the safe running of the system, open the firewall and set the access ports according to the following list.</p>
<table class="table" id="id16">
<caption><span class="caption-text">Open Access Ports List</span><a class="headerlink" href="#id16" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Port</p></th>
<th class="head"><p>Function</p></th>
<th class="head"><p>Protocol</p></th>
<th class="head"><p>Encrypted</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>80</p></td>
<td><p>Nginx server HTTP</p></td>
<td><p>TCP (HTTP)</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>443</p></td>
<td><p>Nginx server HTTPS</p></td>
<td><p>TCP (HTTPS)</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>22</p></td>
<td><p>SSH service</p></td>
<td><p>TCP</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>3306</p></td>
<td><p>MySQL service</p></td>
<td><p>TCP</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>Random port (From 32768 to 65535)</p></td>
<td><p>rpc.mountd (NFS service dependency)</p></td>
<td><p>TCP</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>50305</p></td>
<td><p>Data transfer</p></td>
<td><p>TCP (HTTP)</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>60305</p></td>
<td><p>Data encryption</p></td>
<td><p>TCP (HTTPS)</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-odd"><td><p>3260</p></td>
<td><p>iSCSI</p></td>
<td><p>TCP</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-even"><td><p>50306</p></td>
<td><p>Data transfer</p></td>
<td><p>TCP</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>60306</p></td>
<td><p>Data encryption</p></td>
<td><p>TCP</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>50308</p></td>
<td><p>Loading and unloading tapes</p></td>
<td><p>TCP</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>60308</p></td>
<td><p>Loading and unloading tapes</p></td>
<td><p>TCP</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>50309</p></td>
<td><p>Agent interprocess communication</p></td>
<td><p>TCP</p></td>
<td><p>No</p></td>
</tr>
<tr class="row-odd"><td><p>60309</p></td>
<td><p>Agent interprocess communication</p></td>
<td><p>TCP</p></td>
<td><p>Yes</p></td>
</tr>
<tr class="row-even"><td><p>10000</p></td>
<td><p>NDMP backup and restore</p></td>
<td><p>TCP</p></td>
<td><p>NDMP</p></td>
</tr>
</tbody>
</table>
</section>
<section id="check-the-service-state">
<h2>Check the service state<a class="headerlink" href="#check-the-service-state" title="Link to this heading">#</a></h2>
<p>After the installation, check whether the following ADPS services are running normally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">adps</span><span class="o">-</span><span class="n">backupd</span>
<span class="n">adps</span><span class="o">-</span><span class="n">storaged</span>
<span class="n">adps</span><span class="o">-</span><span class="n">nginx</span>
<span class="n">adps</span><span class="o">-</span><span class="n">controller</span>
<span class="n">mariadb</span>
</pre></div>
</div>
<p>For example, you can check the adps-backupd service using the following commands. The active state means that the service is running normally. The query commands for other services are the same.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/etc/init.d/adps-backupd  status
● adps-backupd.service - adps backup server daemon
   Loaded: loaded (/lib/systemd/system/adps-backupd.service; enabled; vendor preset: enabled)
   Active: active (running) since Tue 2022-05-17 13:54:37 CST; 2 days ago
 Main PID: 6064 (adps-backupd)
    Tasks: 11 (limit: 1111)
   CGroup: /system.slice/adps-backupd.service
           └─6064 /opt/aurreum/adps/bin/adps-backupd --reactor=dev_poll -f /etc/opt/aurreum/adps/backupd/svc.conf.d

May 17 13:54:37 ubuntu2004 systemd[1]: Started adps backup server daemon.
May 17 13:54:37 ubuntu2004 adps-backupd[6064]: Created &#39;dev_poll&#39; reactor
</pre></div>
</div>
</section>
<section id="web-console">
<h2>Web console<a class="headerlink" href="#web-console" title="Link to this heading">#</a></h2>
<p>After the installation, enter the IP or domain name on the browser. If you can access the ADPS Web console, the installation is successful.</p>
<p><img alt="" src="../_images/install-6.png" /></p>
<p>You must import a product license to use the Web console. Download the “Request License” file and send it to Aurreum technical support. We will send you a file with a license certificate after approval. For details, see the <a class="reference internal" href="../administrator/administrator.html"><span class="std std-doc">Administrator’s Guide</span></a>.</p>
</section>
<section id="appendix">
<h2>Appendix<a class="headerlink" href="#appendix" title="Link to this heading">#</a></h2>
<section id="uninstall-the-software">
<h3>Uninstall the software<a class="headerlink" href="#uninstall-the-software" title="Link to this heading">#</a></h3>
<p>Before you uninstall the software, please confirm that you want to uninstall it. You cannot retrieve relevant data after uninstallation.</p>
<section id="id7">
<h4>Ubuntu<a class="headerlink" href="#id7" title="Link to this heading">#</a></h4>
<ul>
<li><p>Uninstall a module. For example, to uninstall the controller module, run the following command with root privileges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">purge</span> <span class="n">adps</span><span class="o">-</span><span class="n">controller</span>
</pre></div>
</div>
</li>
<li><p>To uninstall all ADPS software, run the following command with root privileges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">purge</span> <span class="n">adps</span><span class="o">-</span><span class="n">common</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This command will thoroughly remove the packages and configuration files.</p>
</div>
</li>
<li><p>After the above operation, check if there is any ADPS service.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">dpkg</span> <span class="o">-</span><span class="n">l</span><span class="o">|</span><span class="n">grep</span> <span class="n">adps</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id8">
<h4>CentOS<a class="headerlink" href="#id8" title="Link to this heading">#</a></h4>
<ul>
<li><p>Uninstall a module. For example, to uninstall the controller module, run the following command with root privileges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rpm</span> <span class="o">-</span><span class="n">e</span> <span class="n">adps</span><span class="o">-</span><span class="n">controller</span>
</pre></div>
</div>
</li>
<li><p>To uninstall all ADPS software, run the following command with root privileges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>rpm -e `rpm -qa | grep adps`
</pre></div>
</div>
</li>
<li><p>After the above operation, check if there is any ADPS service.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rpm</span> <span class="o">-</span><span class="n">qa</span><span class="o">|</span><span class="n">grep</span> <span class="n">adps</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="reconfigure-storaged">
<h3>Reconfigure storaged<a class="headerlink" href="#reconfigure-storaged" title="Link to this heading">#</a></h3>
<p>You can run the following commands to reconfigure adps-storaged when the server address is changed or you have inputted the wrong backup server address, port, and protocol.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/etc/init.d/adps-storaged config
Please input Aurreum Data Protection Suite Backup Server host[192.168.20.115]: 192.168.87.115
Please input Aurreum Data Protection Suite Backup Server port[50305]:
Does Aurreum Data Protection Suite Backup Server enable SSL protocol? [N]:
Saving adps-storaged config *
Do you want to restart adps-storaged? [Y]:
[....] Restarting adps-storaged (via systemctl): adps-storaged.service
. ok
</pre></div>
</div>
</section>
<section id="supported-fc-hba-list">
<h3>Supported FC HBA List<a class="headerlink" href="#supported-fc-hba-list" title="Link to this heading">#</a></h3>
<table class="table" id="id17">
<caption><span class="caption-text">QLogic</span><a class="headerlink" href="#id17" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>Port</p></th>
<th class="head"><p>Supported speed (GBit/s)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>QLE2560</p></td>
<td><p>1</p></td>
<td><p>2, 4, 8</p></td>
</tr>
<tr class="row-odd"><td><p>QLE2562</p></td>
<td><p>2</p></td>
<td><p>2, 4, 8</p></td>
</tr>
<tr class="row-even"><td><p>QLE2670</p></td>
<td><p>1</p></td>
<td><p>4, 8, 16</p></td>
</tr>
<tr class="row-odd"><td><p>QLE2672</p></td>
<td><p>2</p></td>
<td><p>4, 8, 16</p></td>
</tr>
<tr class="row-even"><td><p>QLE2690</p></td>
<td><p>1</p></td>
<td><p>8, 16, 32</p></td>
</tr>
<tr class="row-odd"><td><p>QLE2692</p></td>
<td><p>2</p></td>
<td><p>8, 16, 32</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">User Guides</p>
      </div>
    </a>
    <a class="right-next"
       href="../agent_install/agent_install.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Agent Installation Guide</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adps-components">ADPS components</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation-process">Installation process</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#server-requirements">Server requirements</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prepare-software-packages">Prepare software packages</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#update-the-kernel">Update the kernel</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-mariadb">Install MariaDB</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-adps-software">Install the ADPS software</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ubuntu">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#centos">CentOS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#connect-catalog-to-mariadb">Connect catalog to MariaDB</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-optional-modules">Install optional modules</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-lan-free-module">Install the LAN-Free module</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">CentOS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-tape-library-controller-module">Install the Tape Library Controller module</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">CentOS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-the-file-instant-recovery-module">Install the File Instant Recovery Module</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">CentOS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install-auxiliary-tools">Install auxiliary tools</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#open-access-ports">Open access ports</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#check-the-service-state">Check the service state</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#web-console">Web console</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix">Appendix</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#uninstall-the-software">Uninstall the software</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Ubuntu</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">CentOS</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reconfigure-storaged">Reconfigure storaged</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#supported-fc-hba-list">Supported FC HBA List</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Aurreum
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  Copyright © 2022-2024 Aurreum
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>